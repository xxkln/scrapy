[{"url_object_id": "7b546d2831d0a697c88ce542ad53b7ee", "title": "如何在 Linux/Unix/Windows 中发现隐藏的进程和端口", "url": "http://blog.jobbole.com/113593/", "create_date": "2018/01/30", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/04/7a91ae8776d0953ac776284a7d92e861.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Linux,Unix,Windows", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.cyberciti.biz/tips/linux-unix-windows-find-hidden-processes-tcp-udp-ports.html\">Vivek Gite</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9288-1.html\">Linux中国/fan Li</a>   </div><p><code>unhide</code> 是一个小巧的网络取证工具，能够发现那些借助 rootkit、LKM 及其它技术隐藏的进程和 TCP/UDP 端口。这个工具在 Linux、UNIX 类、MS-Windows 等操作系统下都可以工作。根据其 man 页面的说明：</p>\n<blockquote><p>Unhide 通过下述三项技术来发现隐藏的进程。</p>\n<ol>\n<li>进程相关的技术，包括将 <code>/proc</code> 目录与 <a title=\"Linux / Unix ps command\" href=\"https://www.cyberciti.biz/faq/show-all-running-processes-in-linux/\">/bin/ps</a> 命令的输出进行比较。</li>\n<li>系统相关的技术，包括将 <a title=\"Linux / Unix ps command\" href=\"https://www.cyberciti.biz/faq/show-all-running-processes-in-linux/\">/bin/ps</a> 命令的输出结果同从系统调用方面得到的信息进行比较。</li>\n<li>穷举法相关的技术，包括对所有的进程 ID 进行暴力求解，该技术仅限于在基于 Linux2.6 内核的系统中使用。</li>\n</ol>\n</blockquote>\n<p>绝大多数的 Rootkit 工具或者恶意软件借助内核来实现进程隐藏，这些进程只在内核内部可见。你可以使用 <code>unhide</code> 或者诸如 <a href=\"https://www.cyberciti.biz/faq/howto-check-linux-rootkist-with-detectors-software/\">rkhunter 等工具，扫描 rootkit 程序 、后门程序以及一些可能存在的本地漏洞</a>。</p>\n<p>这篇文章描述了如何安装 unhide 并搜索隐藏的进程和 TCP/UDP 端口。</p>\n<h3 id=\"toc_1\">如何安装 unhide</h3>\n<p>首先建议你在只读介质上运行这个工具。如果使用的是 Ubuntu 或者 Debian 发行版，输入下述的 <a title=\"See Linux/Unix apt-get command examples for more info\" href=\"https://www.cyberciti.biz/tips/linux-debian-package-management-cheat-sheet.html\">apt-get</a>/<a title=\"See Linux/Unix apt command examples for more info\" href=\"//www.cyberciti.biz/faq/ubuntu-lts-debian-linux-apt-command-examples/\">apt</a> 命令以安装 Unhide：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9843717746874\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo apt-get install unhide\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9843717746874-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9843717746874-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9843717746874-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">apt</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">get </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">unhide</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9843717746874-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>一切顺利的话你的命令行会输出以下内容：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed984f751597754\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[sudo] password for vivek: \r\nReading package lists... Done\r\nBuilding dependency tree       \r\nReading state information... Done\r\nSuggested packages:\r\n  rkhunter\r\nThe following NEW packages will be installed:\r\n  unhide\r\n0 upgraded, 1 newly installed, 0 to remove and 0 not upgraded.\r\nNeed to get 46.6 kB of archives.\r\nAfter this operation, 136 kB of additional disk space will be used.\r\nGet:1 http://in.archive.ubuntu.com/ubuntu artful/universe amd64 unhide amd64 20130526-1 [46.6 kB]\r\nFetched 46.6 kB in 0s (49.0 kB/s)\r\nSelecting previously unselected package unhide.\r\n(Reading database ... 205367 files and directories currently installed.)\r\nPreparing to unpack .../unhide_20130526-1_amd64.deb ...\r\nUnpacking unhide (20130526-1) ...\r\nSetting up unhide (20130526-1) ...\r\nProcessing triggers for man-db (2.7.6.1-2) ...\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed984f751597754-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed984f751597754-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">password </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vivek</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-2\"><span class=\"crayon-e\">Reading </span><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lists</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Done</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-3\"><span class=\"crayon-e\">Building </span><span class=\"crayon-e\">dependency </span><span class=\"crayon-e\">tree       </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-4\"><span class=\"crayon-e\">Reading </span><span class=\"crayon-e\">state </span><span class=\"crayon-v\">information</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Done</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-5\"><span class=\"crayon-e\">Suggested </span><span class=\"crayon-v\">packages</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">rkhunter</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-7\"><span class=\"crayon-e\">The </span><span class=\"crayon-e\">following </span><span class=\"crayon-r\">NEW</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">packages </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">installed</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-8\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">unhide</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-9\"><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">upgraded</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">newly </span><span class=\"crayon-v\">installed</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">remove </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">upgraded</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-10\"><span class=\"crayon-e\">Need </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">get</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">46.6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB </span><span class=\"crayon-e\">of </span><span class=\"crayon-v\">archives</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-11\"><span class=\"crayon-e\">After </span><span class=\"crayon-r\">this</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">operation</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">136</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">additional </span><span class=\"crayon-e\">disk </span><span class=\"crayon-e\">space </span><span class=\"crayon-e\">will </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-12\"><span class=\"crayon-v\">Get</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//in.archive.ubuntu.com/ubuntu artful/universe amd64 unhide amd64 20130526-1 [46.6 kB]</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-13\"><span class=\"crayon-i\">Fetched</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">46.6</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0s</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">49.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kB</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-14\"><span class=\"crayon-e\">Selecting </span><span class=\"crayon-e\">previously </span><span class=\"crayon-e\">unselected </span><span class=\"crayon-t\">package</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">unhide</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-15\"><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Reading </span><span class=\"crayon-i\">database</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">205367</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">files </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">directories </span><span class=\"crayon-e\">currently </span><span class=\"crayon-v\">installed</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-16\"><span class=\"crayon-e\">Preparing </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">unpack</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">unhide_20130526</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1_amd64.deb</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-17\"><span class=\"crayon-e\">Unpacking </span><span class=\"crayon-e\">unhide</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20130526</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-18\"><span class=\"crayon-e\">Setting </span><span class=\"crayon-e\">up </span><span class=\"crayon-e\">unhide</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20130526</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed984f751597754-19\"><span class=\"crayon-e\">Processing </span><span class=\"crayon-e\">triggers </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">man</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">db</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2.7.6.1</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed984f751597754-20\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0041 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">如何在 RHEL/CentOS/Oracle/Scientific/Fedora 上安装 unhide</h3>\n<p>输入下列 yum Type the following yum command (first turn on EPLE repo on a CentOS/RHEL version 6.x or version 7.x):</p>\n<p>输入以下的 <a title=\"See Linux/Unix yum command examples for more info\" href=\"https://www.cyberciti.biz/faq/rhel-centos-fedora-linux-yum-command-howto/\">yum</a> 命令（CentOS/RHEL <a href=\"https://www.cyberciti.biz/faq/fedora-sl-centos-redhat6-enable-epel-repo/\">6.x</a> 或 <a href=\"https://www.cyberciti.biz/faq/installing-rhel-epel-repo-on-centos-redhat-7-x/\">7.x</a> 上首先打开 EPEL 仓库）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9855707580084\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo yum install unhide\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9855707580084-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9855707580084-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9855707580084-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">yum </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">unhide</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9855707580084-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在 Fedora 上则使用以下 dnf 命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9858708676375\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf install unhide\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9858708676375-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9858708676375-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9858708676375-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">unhide</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9858708676375-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">如何在 Arch 上安装 unhide</h3>\n<p>键入以下 pacman 命令安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9867918487657\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo pacman -S unhide\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9867918487657-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9867918487657-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9867918487657-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">pacman</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">unhide</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9867918487657-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">如何在 FreeBSD 上安装 unhide</h3>\n<p>可以通过以下的命令使用 port 来安装 unhide：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed986b543245991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# cd /usr/ports/security/unhide/\r\n# make install clean\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed986b543245991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed986b543245991-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed986b543245991-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed986b543245991-1\"><span class=\"crayon-p\"># cd /usr/ports/security/unhide/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed986b543245991-2\"><span class=\"crayon-p\"># make install clean</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed986b543245991-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或者可以通过二进制文件安装 hide，使用 pkg 命令安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed986e810378690\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pkg install unhide\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed986e810378690-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed986e810378690-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed986e810378690-1\"><span class=\"crayon-p\"># pkg install unhide</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed986e810378690-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0002 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">如何使用 unhide 工具？</h3>\n<p>unhide 的语法是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9871228312917\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nunhide [options] test_list\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9871228312917-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9871228312917-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9871228312917-1\"><span class=\"crayon-i\">unhide</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">options</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">_</span>list</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9871228312917-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><code>test_list</code> 参数可以是以下测试列表中的一个或者多个标准测试：</p>\n<ol>\n<li>brute</li>\n<li>proc</li>\n<li>procall</li>\n<li>procfs</li>\n<li>quick</li>\n<li>reverse</li>\n<li>sys</li>\n</ol>\n<p>或基本测试：</p>\n<ol>\n<li>checkbrute</li>\n<li>checkchdir</li>\n<li>checkgetaffinity</li>\n<li>checkgetparam</li>\n<li>checkgetpgid</li>\n<li>checkgetprio</li>\n<li>checkRRgetinterval</li>\n<li>checkgetsched</li>\n<li>checkgetsid</li>\n<li>checkkill</li>\n<li>checknoprocps</li>\n<li>checkopendir</li>\n<li>checkproc</li>\n<li>checkquick</li>\n<li>checkreaddir</li>\n<li>checkreverse</li>\n<li>checksysinfo</li>\n<li>checksysinfo2</li>\n<li>checksysinfo3</li>\n</ol>\n<p>你可以通过以下示例命令使用 <code>unhide</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9875947443443\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# unhide proc\r\n# unhide sys\r\n# unhide quick\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9875947443443-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9875947443443-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9875947443443-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9875947443443-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9875947443443-1\"><span class=\"crayon-p\"># unhide proc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9875947443443-2\"><span class=\"crayon-p\"># unhide sys</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9875947443443-3\"><span class=\"crayon-p\"># unhide quick</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9875947443443-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed987a883378464\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUnhide 20130526\r\nCopyright © 2013 Yago Jesus &amp; Patrick Gouin\r\nLicense GPLv3+ : GNU GPL version 3 or later\r\nhttp://www.unhide-forensics.info\r\n\r\nNOTE : This version of unhide is for systems using Linux &gt;= 2.6 \r\n\r\nUsed options: \r\n[*]Searching for Hidden processes through  comparison of results of system calls, proc, dir and ps\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed987a883378464-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed987a883378464-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed987a883378464-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed987a883378464-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed987a883378464-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed987a883378464-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed987a883378464-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed987a883378464-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed987a883378464-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed987a883378464-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed987a883378464-1\"><span class=\"crayon-i\">Unhide</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20130526</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed987a883378464-2\"><span class=\"crayon-i\">Copyright</span><span class=\"crayon-h\"> </span>©<span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2013</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Yago </span><span class=\"crayon-v\">Jesus</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Patrick </span><span class=\"crayon-e\">Gouin</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed987a883378464-3\"><span class=\"crayon-e\">License </span><span class=\"crayon-v\">GPLv3</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GNU </span><span class=\"crayon-e\">GPL </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">later</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed987a883378464-4\"><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//www.unhide-forensics.info</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed987a883378464-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed987a883378464-6\"><span class=\"crayon-v\">NOTE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">This</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">version </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">unhide </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">systems </span><span class=\"crayon-e\">using </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed987a883378464-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed987a883378464-8\"><span class=\"crayon-e\">Used </span><span class=\"crayon-v\">options</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed987a883378464-9\"><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">]</span><span class=\"crayon-e\">Searching </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Hidden </span><span class=\"crayon-e\">processes </span><span class=\"crayon-e\">through  </span><span class=\"crayon-e\">comparison </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">results </span><span class=\"crayon-e\">of </span><span class=\"crayon-e\">system </span><span class=\"crayon-v\">calls</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">proc</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dir </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ps</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed987a883378464-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0018 seconds] -->\r\n<p></p>\n<h3 id=\"toc_6\">如何使用 unhide-tcp 工具辨明 TCP/UDP 端口的身份</h3>\n<p>以下是来自 man 页面的介绍：</p>\n<blockquote><p><code>unhide-tcp</code> 取证工具通过对所有可用的 TCP/IP 端口进行暴力求解的方式，辨别所有正在监听，却没有列入 <a title=\"Linux netstat command\" href=\"https://www.cyberciti.biz/tips/linux-display-open-ports-owner.html\">/bin/netstat</a> 或者 <a href=\"https://www.cyberciti.biz/tips/linux-investigate-sockets-network-connections.html\">/bin/ss</a> 命令输出的 TCP/IP 端口身份。</p>\n<p>注一：对于 FreeBSD、OpenBSD系统，一般使用 netstat 命令取代在这些操作系统上不存在的 iproute2，此外，sockstat 命令也用于替代 fuser。</p>\n<p>注二：如果操作系统不支持 iproute2 命令，在使用 <code>unhide</code> 时需要在命令上加上 <code>-n</code> 或者 <code>-s</code> 选项。</p></blockquote>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed987e393131420\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# unhide-tcp\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed987e393131420-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed987e393131420-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed987e393131420-1\"><span class=\"crayon-p\"># unhide-tcp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed987e393131420-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9881956202508\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUnhide 20100201\r\nhttp://www.security-projects.com/?Unhide\r\n\r\nStarting TCP checking\r\n\r\nStarting UDP checking\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9881956202508-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9881956202508-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9881956202508-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9881956202508-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9881956202508-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9881956202508-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9881956202508-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9881956202508-1\"><span class=\"crayon-i\">Unhide</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20100201</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9881956202508-2\"><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//www.security-projects.com/?Unhide</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9881956202508-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9881956202508-4\"><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">TCP </span><span class=\"crayon-e\">checking</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9881956202508-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9881956202508-6\"><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">UDP </span><span class=\"crayon-i\">checking</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9881956202508-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>上述操作中，没有发现隐藏的端口。</p>\n<p>但在下述示例中，我展示了一些有趣的事。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9884118137259\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# unhide-tcp\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9884118137259-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9884118137259-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9884118137259-1\"><span class=\"crayon-p\"># unhide-tcp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9884118137259-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed9887121827460\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nUnhide 20100201\r\nhttp://www.security-projects.com/?Unhide\r\n\r\n\r\nStarting TCP checking\r\n\r\nFound Hidden port that not appears in netstat: 1048\r\nFound Hidden port that not appears in netstat: 1049\r\nFound Hidden port that not appears in netstat: 1050\r\nStarting UDP checking\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9887121827460-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9887121827460-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9887121827460-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9887121827460-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9887121827460-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9887121827460-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9887121827460-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9887121827460-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9887121827460-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed9887121827460-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed9887121827460-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed9887121827460-1\"><span class=\"crayon-i\">Unhide</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20100201</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9887121827460-2\"><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//www.security-projects.com/?Unhide</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9887121827460-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9887121827460-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a76364ed9887121827460-5\"><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">TCP </span><span class=\"crayon-e\">checking</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9887121827460-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a76364ed9887121827460-7\"><span class=\"crayon-e\">Found </span><span class=\"crayon-e\">Hidden </span><span class=\"crayon-e\">port </span><span class=\"crayon-e\">that </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">appears </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">netstat</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1048</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9887121827460-8\"><span class=\"crayon-e\">Found </span><span class=\"crayon-e\">Hidden </span><span class=\"crayon-e\">port </span><span class=\"crayon-e\">that </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">appears </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">netstat</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1049</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9887121827460-9\"><span class=\"crayon-e\">Found </span><span class=\"crayon-e\">Hidden </span><span class=\"crayon-e\">port </span><span class=\"crayon-e\">that </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">appears </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">netstat</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1050</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed9887121827460-10\"><span class=\"crayon-e\">Starting </span><span class=\"crayon-e\">UDP </span><span class=\"crayon-i\">checking</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed9887121827460-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>可以看到 <code>netstat -tulpn</code> 和 <code>ss</code> 命令确实没有反映出这三个隐藏的端口：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed988b354697109\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# netstat -tulpn | grep 1048\r\n# ss -lp\r\n# ss -l | grep 1048\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed988b354697109-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed988b354697109-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed988b354697109-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed988b354697109-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed988b354697109-1\"><span class=\"crayon-p\"># netstat -tulpn | grep 1048</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed988b354697109-2\"><span class=\"crayon-p\"># ss -lp</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed988b354697109-3\"><span class=\"crayon-p\"># ss -l | grep 1048</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed988b354697109-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>通过下述的 man 命令可以更多地了解 <code>unhide</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76364ed988e408824364\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man unhide\r\n$ man unhide-tcp\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76364ed988e408824364-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76364ed988e408824364-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76364ed988e408824364-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76364ed988e408824364-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-i\">unhide</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76364ed988e408824364-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-v\">unhide</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">tcp</span></div><div class=\"crayon-line\" id=\"crayon-5a76364ed988e408824364-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3 id=\"toc_7\">Windows 用户如何安装使用 unhide</h3>\n<p>你可以通过这个<a href=\"http://www.unhide-forensics.info/?Windows:Download\">页面</a>获取 Windows 版本的 unhide。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113593\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113593votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113593\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/e4ef10899dd499cd91f9102bff717ea3d2311bfc.jpg"},{"url_object_id": "c3a165a85c1b1642729fbb63e5c98e50", "title": "揭秘 Quora 的 Web 服务器架构", "url": "http://blog.jobbole.com/113576/", "create_date": "2018/01/29", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/08/73516834d333d2a79d72cfc38b225dd4.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Quora", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/PassWarer\">10111000</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://engineering.quora.com/Web-Server-Architecture-at-Quora\">engineering.quora</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：Quora 曾经在 2012 年 8 月使用了一种新的并行架构去渲染页面。相比以前， 3-10 倍的速度来渲染页面。如今，我们又对原来的架构设计做了一些改进，从而进一步提高了速度并节省了成本。Quora 工程师在本文和大家一起分享他们是如何改造的。</p>\n<h3>原来的并行架构：Webpara</h3>\n<p>原来的并行架构设计服从主从模式，它的设计和参数是在生产环境中经过一系列基准测试后选定的。该设计中的主结点和从结点在不同的层级里：主结点机器我们称之为 webpara，每个结点上跑有 6 个主进程；从结点机器我们称之为 webworker，每个结点上有 6 个工作进程和一个用 C++ 语言编写的 fastrouter 进程。主进程和工作进程中的应用逻辑跑在相同的 web 服务器中，fastrouter 进程则是跑在一个用 C++ 定制的多线程队列服务器中，支持任意数据的快速入队和出队。这两层都是使用了AWS的 c1.xlarge EC2 实例，它们有 8 核和 6MB 的共享 CPU 高速缓存。<br>\n<a href=\"http://jbcdn2.b0.upaiyun.com/2015/08/089385ecfe9ad6d5a8a03cc3b88745dd.jpeg\"><img class=\"alignnone size-full wp-image-67144\" src=\"http://jbcdn2.b0.upaiyun.com/2015/08/089385ecfe9ad6d5a8a03cc3b88745dd.jpeg\" alt=\"Webpara Architecture\" width=\"605\" height=\"452\"></a></p>\n<p>一个来自负载均衡器的请求会被分配给某个 webpara 机器中的空闲主进程，这个进程会先完成一部分的页面渲染工作，然后再把剩余的工作作为子请求通过工作结点机器上的快速路由分发给对应的工作进程。每个工作进程可以完成子请求需要的所有响应，或者是准备一部分响应并进一步将工作分配给别的工作进程，甚至是不同机器上的工作进程。最终，由原始的主进程把工作进程返回的所有子响应合并，并对客户的页面请求发出响应。因为这种分治的思想，使得我们有能力在许多不同的工作机器上并行的工作，从而快速的进行页面渲染。</p>\n<p>不过，因为工作进程和主进程是在不同的机器上，所以所有的通信都依赖于网络。每个子请求和子响应都需要作为有效载荷在我们的 EC2 环境里跨机器进行传输。2012 年 12 月左右，我们开始面临一些规模扩展问题，尽管我们使用了这种并行的架构设计，但对于Quora的访问依然慢了下来。</p>\n<p>我们的网络流量已经增长到足以挑战这种设计的极限 — 即使增加主结点机器和从结点机器，也依然不能很好改变这种情况。而像 Memcached 和 Redis 这样的外部服务调用也会随着时间的推移变得越来越慢。随后，我们意识到，我们的瓶颈在于网络 I/O 而不是 CPU。太多的网络调用导致了大量的上下文切换。</p>\n<p>因此，我们不得不找到一种方法去减少网络容量和网络调用的数量，而所有的这些都不能影响到 CPU 的执行效率或是增加成本。为了达到这个目标，我们重新安排了架构的各个部分，通过几次A / B测试收集了详细的指标，并选择了可能实现这些目标的最佳配置。由此产生的架构就是我们所说的 Ultralisk。[1]</p>\n<h3>新的并行架构：Ultralisk</h3>\n<p>这种新的 Ultralisk 架构是由同一种机器类型组成 — EC2 的 cc2.8xlarge 实例，这种类型的机器在硬件虚拟化这一方面会更有效率（与其他的 EC2 实例类型相比）。另外，这些机器有着很高的网络I/O容量。</p>\n<p>这个架构仍然与之前的架构一样采用主从模式。Ultralisk 架构主要的改进在于其中的每台物理机器同时拥有主进程和工作进程。所有由主进程生成的子请求都将交给同一台机器上的工作进程处理。因此，主进程和工作进程之间的通信不再依赖于外部网络。因为我们这种类型的通信是并行架构中的其他网络流量的 1.5 倍，所以这种变化使我们的外部网络流量减少了超过 60% 。主进程和工作进程之前的通信可以很简单的基于 TCP 连接或者 Unix 套接字实现。在我们的实验中，这两种实现方式的性能很接近，Unix套接字只是稍快一些。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2015/08/2c55cc1aa1f2aee7a363cc37f88ac0ea.jpeg\"><img class=\"alignnone size-full wp-image-67148\" src=\"http://jbcdn2.b0.upaiyun.com/2015/08/2c55cc1aa1f2aee7a363cc37f88ac0ea.jpeg\" alt=\"Ultralisk_arch\" width=\"602\" height=\"452\"></a></p>\n<p>每台物理机器上主进程和工作进程的个数是整体性能的关键。如果工作进程太少，我们就不能很好的利用并行从而导致系统变慢；如果工作进程太多，会导致太多的上下文切换。同样，在决定主进程的个数时，则需要在成本和速度之间进一步权衡。经过我们的实验，我们发现一个优化的配置是在每台物理机器上跑 6 个主进程，27 个工作进程和 1 个快速路由。CPU 的亲和性设置可以使得每个工作进程和快速路由进程跑在固定的 CPU 内核上。两个主进程共享一个核（因此 6 个主进程需要占用 3 个内核），剩下的核留给系统的内核进程，包括处理所有的 I/O中断，但并不仅限于此。[2]</p>\n<p>这种架构减少了网络 I/O 数量和 I/O 资源的占用，从而使得外部服务的调用变得更快。下图给出了在 Memcached 调用时请求响应时间（毫秒）在 99% 分位处的改进。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2015/08/31d0d1236e6d7ce91262929987656760.png\"><img class=\"alignnone size-full wp-image-67146\" src=\"http://jbcdn2.b0.upaiyun.com/2015/08/31d0d1236e6d7ce91262929987656760.png\" alt=\"effect_on_network_calls\" width=\"500\" height=\"300\"></a></p>\n<p>总体来看，新的架构比之前的要快上 20-35%。下图给出了两种架构体系中请求响应时间在中位数与 90% 分位处的比率。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2015/08/b1a2fadde397e18777aa45ac94f34260.png\"><img class=\"alignnone size-full wp-image-67147\" src=\"http://jbcdn2.b0.upaiyun.com/2015/08/b1a2fadde397e18777aa45ac94f34260.png\" alt=\"effect_on_overall\" width=\"500\" height=\"300\"></a></p>\n<p>总而言之，Ultralisk 架构更快，更便宜，对网络资源的占用更少，而且比我们之前的 Webpara 架构更有扩展性。另外，现在每台机器都是相同的配置，完全与其他所有的机器独立，而我们也精确的知道每台机器每秒可以处理多少请求，所以我们可以以自动的方式来水平扩展我们的 Web 服务器。此外，这种新架构将我们需要管理的机器数量减少为原来的四分之一，从而可以更轻松的管理和部署。</p>\n<p>我们在二月份已经把这种新架构完全部署到了生产环境，尽管我们的网络流量呈指数级增长，但目前还没有看到任何问题。一如既往，性能对我们至关重要，我们的速度和基础架构团队致力于让Quora给你更好的体验。</p>\n<p>（作者 Nikhil Garg 是一名 Quora 工程师，并供职于速度团队）</p>\n<p><strong>补注：</strong></p>\n<ul>\n<li>[1] Ultralisk 是虫族最大和最强力的地面部队之一。它们非常昂贵。它们的基因物质已经经过无数次的测试和实验，而最后的可行版本只能用于虫族的幼虫。</li>\n<li>[2] CPU 亲和性的正确设置是性能收益的关键。从那以后，我们也开始在不同层次的机器上设置 CPU 亲和性，而这样也确实带来了一定的收益。</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113576\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113576votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113576\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/PassWarer\">10111000</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/PassWarer\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/12/7d7861d88112f0f68c90a9d44028a243.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Web开发为主，熟悉Python,Java。爱好英语,安全相关。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/PassWarer\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/passwarer/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/PassWarer/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://10111000.com\"><i class=\"fa fa-link\"></i></a> <a title=\"个人微信：Leo_Kris\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/PassWarer\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/c8b802de5bdc21490e5a2a7e1882a02e3bf9b939.jpg"},{"url_object_id": "63b2027895556ef17796fd078f2cca76", "title": "做 ML 有关的工作，需要哪些技能？", "url": "http://blog.jobbole.com/113592/", "create_date": "2018/01/30", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/12/914a7f9323808e5b11330f275e0ac4c8.jpg"], "praise_nums": "1", "comment_nums": 3, "fav_nums": 3, "tags": "IT技术,机器学习", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/kk3039\">Agatha</a> 翻译，<a href=\"http://www.jobbole.com/members/upanblack\">Panblack</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.quora.com/What-skills-are-needed-for-machine-learning-jobs/answer/Jonathan-A-Cox\">Quora</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：有位网友在 Quora 上提问：做与机器学习有关的工作，需要些什么技能呢？</p>\n<blockquote><p>我是一个自学者，现在家中自学线性代数。希望有天能在机器学习领域工作，但是我不太确定：</p>\n<ul>\n<li>a) 这种工作/面试需要什么技术上的技能？</li>\n<li>b) 有没有什么（做这种工作）必须的相关工作经历</li>\n</ul>\n<p>比起空想，我至少开始行动了。任何的建议/指导对我来说都很有用。十分感谢！</p></blockquote>\n<p><strong>本文摘编了 2 位 Quora 网友的回答。</strong></p>\n<h3>Jonathan A. Cox（机器学习和应用物理研究人员）的回答：</h3>\n<p>这里有很多回复都提到了一些创业公司常用的工具。值得注意的是，在你 35 岁以上的职业生涯中，这些工具会变得完全不同。所以最好的办法是熟悉基本概念和数学。</p>\n<p>其次，机器学习领域太过繁杂，根本不可能真正深入理解几十种不同的算法。我觉得你可以先深究几个最有前景的算法。说是这么说，你也要很了解一些基础的东西才行，比如说朴素贝叶斯、支持向量机、感知器、决策树。</p>\n<p>最后，很多创业公司，或者非研究领域的人会告诉你要专注于那些快要老掉牙的算法（比如支持向量机 (SVM)）和大数据的数据库工具（比如说Hadoop）。考虑到你刚刚起步，我觉得你可以专注于那些很快会发展起来的架构：神经网络，单指令流多数据流（SIMD）向量计算（比如说GPU)。神经网络最近 10 年内开始革命性地颠覆自然语言处理、机器视觉、语音识别和其他领域。鉴于它的强大，这个影响还会继续下去。</p>\n<p>综上，我会选择诸如 GPU 加速这类算法来自学和实现，再加一些分布式数据库的知识。以下是值得考虑的算法：</p>\n<p>1. 深度置信网或者层叠降噪自动编码机 / Deep Belief Nets or Stacked Denoising Autoencoders<br>\n2. 卷积神经网络（CNN）<br>\n3. 长短记忆（LSTM）时间递归神经网络<br>\n4. 结构递归神经网络（通常用于自然语言处理）<br>\n5. word2vec 神经网络以及相关通过上下文学习词语的相关算法</p>\n<p>另外一个很有前景的领域是强化学习，尤其是 Deep Mind 的 Q-learning。当你用到延迟奖励功能（比如玩 Atari 游戏时的得分），并且不能在你的网络中直接计算参数梯度时，你会用到强度学习。当你熟悉了上述的算法之后，你大约会想探索一下这个领域。这个领域跟机器人以及，更现实一点，关于人和动物是怎么学习的模拟，很有关联。</p>\n<p>补充：我现在有这样的想法：过去的一年中，结合不同的神经算法，得到一个“深度“系统的方法逐渐显露出重大进步；因为这个方法的整体大于它的组成部分。鉴于奠基石已经铺下，我预计最显著的进步很可能会落在这个方向。一定程度上，细致整顿整个系统之前训练好个体模块，以及更快的计算群让这种进步成为了可能。（然而我们仍会在单个的算法中看到进展。）</p>\n<p>换句话说，现在结合了卷积神经网络和多层感知器（MLP）的 LSTM，可以做到用句子描述图像之类的事情（来源：Goolge/Stanford）。类似地，已经有了具备强化学习能力的卷积神经网络和 MLP 组成的 Atari 游戏竞技网络。</p>\n<p>往这个清单加上新东西同样很容易：把通过 word2vec/GloVe/skip-gram 训练出来的词向量输送给这样的复合网络，或者甚至是用递归神经网络训练的情感分析层。</p>\n<p>有了神经网络和反向传播，在任意几何体上结合/叠加层，以及把组合作为整体系统来训练都变得容易了，它们可以扩展出强大的能力。</p>\n<p>由许多不同种类的神经网络组成，用各种技术连接在一起，单独训练，协同微调，这些混合系统将继续向我们展示充满戏剧性的新能力。</p>\n<h3>二、<a href=\"https://www.quora.com/profile/Joseph-Misiti\">Joseph Misiti</a> 的回答分享，4400+ 顶</h3>\n<p><span style=\"font-weight: 400;\">个人认为，以下是部分必需技能：</span></p>\n<p><span style=\"font-weight: 400;\">更新：我在 Github 创建了一个 repo，里面有上百的资源链接能够帮你起步。</span></p>\n<p>https://github.com/josephmisiti/awesome-machine-learning</p>\n<p><strong>1. Python/C++/R/Java</strong></p>\n<p><span style=\"font-weight: 400;\">假如你想在机器学习领域里找一份工作，你大概迟早要学会这些语言。Python 的 Numpy and Scipy 库 [2] 非常有用，因为这些库不仅有跟 MATLAB 相似的功能，而且将其整合进Web Service，或者在 Hadoop（见下）里使用的时候也十分简单。在加快代码运行速度的时候会用到C++。R [3] 在统计和画图的时候非常好用。Hadoop [4] 是用 Java写的，所以当你实现 mappers 和 reducers 的时候可能需要用到 Java（虽然你也可以通过 Hadoop streaming  [5] 使用脚本语言）。</span></p>\n<p><strong>2. 概率和统计</strong></p>\n<p><span style=\"font-weight: 400;\">学习算法里的很大一部分都基于概率和统计理论，比如说朴素贝叶斯 [6]、高斯混合模型 [7]、隐Markov模型 [8]。 想要理解这些模型，就需要扎实的概率和统计功底。测度论 [9] 怎么拼命学都不过分。把统计作为模型的评价指标，比方说混淆矩阵、ROC 曲线、p值等等。</span></p>\n<p><strong>3. 应用数学和算法</strong></p>\n<p><span style=\"font-weight: 400;\">对于 SVM [10] 这些判别模型，就需要算法理论的扎实基础了。即便你不需要从头开始实现SVM，学习算法理论也可以帮助你理解算法。需要学习的东西有凸优化 [11]，梯度下降 [12]，二次规划 [13]，拉格朗日 [14]，偏微分方程等等。要习惯看求和符号 [16]。</span></p>\n<p><strong>4. 分布式计算</strong></p>\n<p><span style=\"font-weight: 400;\">如今大部分的机器学习工作都要求使用大型数据集（见《数据科学》）[17]。处理这些数据并不能凭借一台机器，而是需要把工作分派给整一个集群。像 Apache Hadoop [4] 这样的项目和亚马逊的 EC2 [18] 这样的云服务就能以合理的成本方便地处理这些数据。虽然 Hadoop 把很多硬核的分布式计算问题隐去了，对 map-reduce [22] 和分布式文件系统 [19] 等方面有透彻的理解还是十分必要的。Apache Mahout [20] 和 Apache Whirr [21] 也很值得一看。</span></p>\n<p><strong>5.精通 Unix/Linux 工具</strong></p>\n<p><span style=\"font-weight: 400;\">除非你运气好，不然你总是需要修改你数据集的格式来载入到 R、Hadoop、HBase 等。Python这些脚本语言（使用 python 里的 re）也能用来完成这个事情，但是最好的方法大约还是掌握专门为此设计的 unix 工具：cat [24]、grep [25]、find [26]、awk [27]、sed [28]、sort [29]、cut [30]、tr [31]等。因为最有可能在基于 Linux 的机器上处理这些数据（我记得 Hadoop 并不能在 Windows 上运作），你一定可以用到这些工具。要学会热爱并尽可能地使用这些工具。这些工具让事情简单多了，比如这个例子 [1]。</span></p>\n<p><strong>6.熟悉Hadoop的子项目</strong></p>\n<p><span style=\"font-weight: 400;\">HBase、Zookeeper [32]、Hive [33]、Mahout 等。这些项目可以储存或读取数据，而且他们可扩展。</span></p>\n<p><strong>7. 了解高级信号处理的技术</strong></p>\n<p><span style=\"font-weight: 400;\">特征提取是机器学习最重要的部分之一。如果你的特性提取得不好，那不论你使用什么算法，性能都不会好。根据具体情况，你可能可以应用一些很酷炫的高级信号处理算法，比方说 wavelets [42]、shearlets [43]、curvelets [44]、contourlets [45]、bandlets [46]。了解并尝试应用时间-频率分析方法 [47]。如果你还没有了解傅里叶分析和卷积的话，这些东西也值得学习。后面提到的这俩是信号处理的基础知识。</span></p>\n<p>最后，尽量多练习、多阅读。有空的时候可以读读像 Google Map-Reduce [34]、Google File System [35]、Google Big Table [36]、The Unreasonable Effectiveness of Data [37] 上的论文。网上也有很多关于机器学习的好书的免费资源，这些也应该多读。[38][39][40] 我找到了一个很好的课程，并且在转发到Github了 [41]。与其直接使用开源的扩展包，不如自己写一份并且对比结果。如果你能从头写一个支持向量机，你就会明白像支持向量、gamma、cost、hyperplanes 等的概念。载入数据并开始训练并不难，难的是理解这所有的概念。</p>\n<p><span style=\"font-weight: 400;\">祝好运！</span></p>\n<p> </p>\n<p><span style=\"font-weight: 400;\">[1] </span><a href=\"http://radar.oreilly.com/2011/04/data-hand-tools.html\"><span style=\"font-weight: 400;\">http://radar.oreilly.com/2011/04…</span></a></p>\n<p><span style=\"font-weight: 400;\">[2] </span><a href=\"http://numpy.scipy.org/\"><span style=\"font-weight: 400;\">http://numpy.scipy.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[3] </span><a href=\"http://www.r-project.org/\"><span style=\"font-weight: 400;\">http://www.r-project.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[4] </span><a href=\"http://hadoop.apache.org/\"><span style=\"font-weight: 400;\">http://hadoop.apache.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[5] </span><a href=\"http://hadoop.apache.org/common/docs/r0.15.2/streaming.html\"><span style=\"font-weight: 400;\">http://hadoop.apache.org/common/…</span></a></p>\n<p><span style=\"font-weight: 400;\">[6] </span><a href=\"http://en.wikipedia.org/wiki/Naive_Bayes_classifier\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Nai…</span></a></p>\n<p><span style=\"font-weight: 400;\">[7] </span><a href=\"http://en.wikipedia.org/wiki/Mixture_model\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Mix…</span></a></p>\n<p><span style=\"font-weight: 400;\">[8] </span><a href=\"http://en.wikipedia.org/wiki/Hidden_Markov_model\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Hid…</span></a></p>\n<p><span style=\"font-weight: 400;\">[9] </span><a href=\"http://en.wikipedia.org/wiki/Measure_(mathematics)\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Mea…</span></a></p>\n<p><span style=\"font-weight: 400;\">[10] </span><a href=\"http://en.wikipedia.org/wiki/Support_vector_machine\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Sup…</span></a></p>\n<p><span style=\"font-weight: 400;\">[11] </span><a href=\"http://en.wikipedia.org/wiki/Convex_optimization\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Con…</span></a></p>\n<p><span style=\"font-weight: 400;\">[12] </span><a href=\"http://en.wikipedia.org/wiki/Gradient_descent\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Gra…</span></a></p>\n<p><span style=\"font-weight: 400;\">[13] </span><a href=\"http://en.wikipedia.org/wiki/Quadratic_programming\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Qua…</span></a></p>\n<p><span style=\"font-weight: 400;\">[14] </span><a href=\"http://en.wikipedia.org/wiki/Lagrange_multiplier\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Lag…</span></a></p>\n<p><span style=\"font-weight: 400;\">[15] </span><a href=\"http://en.wikipedia.org/wiki/Partial_differential_equation\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Par…</span></a></p>\n<p><span style=\"font-weight: 400;\">[16] </span><a href=\"http://en.wikipedia.org/wiki/Summation\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Sum…</span></a></p>\n<p><span style=\"font-weight: 400;\">[17] </span><a href=\"http://radar.oreilly.com/2010/06/what-is-data-science.html\"><span style=\"font-weight: 400;\">http://radar.oreilly.com/2010/06…</span></a></p>\n<p><span style=\"font-weight: 400;\">[18] </span><a href=\"http://aws.amazon.com/ec2/\"><span style=\"font-weight: 400;\">http://aws.amazon.com/ec2/</span></a></p>\n<p><span style=\"font-weight: 400;\">[19] </span><a href=\"http://en.wikipedia.org/wiki/Google_File_System\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Goo…</span></a></p>\n<p><span style=\"font-weight: 400;\">[20] </span><a href=\"http://mahout.apache.org/\"><span style=\"font-weight: 400;\">http://mahout.apache.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[21] </span><a href=\"http://incubator.apache.org/whirr/\"><span style=\"font-weight: 400;\">http://incubator.apache.org/whirr/</span></a></p>\n<p><span style=\"font-weight: 400;\">[22] </span><a href=\"http://en.wikipedia.org/wiki/MapReduce\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Map…</span></a></p>\n<p><span style=\"font-weight: 400;\">[23] </span><a href=\"http://hbase.apache.org/\"><span style=\"font-weight: 400;\">http://hbase.apache.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[24] </span><a href=\"http://en.wikipedia.org/wiki/Cat_(Unix)\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Cat…</span></a></p>\n<p><span style=\"font-weight: 400;\">[25] </span><a href=\"http://en.wikipedia.org/wiki/Grep\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Grep</span></a></p>\n<p><span style=\"font-weight: 400;\">[26] </span><a href=\"http://en.wikipedia.org/wiki/Find\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Find</span></a></p>\n<p><span style=\"font-weight: 400;\">[27] </span><a href=\"http://en.wikipedia.org/wiki/AWK\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/AWK</span></a></p>\n<p><span style=\"font-weight: 400;\">[28] </span><a href=\"http://en.wikipedia.org/wiki/Sed\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Sed</span></a></p>\n<p><span style=\"font-weight: 400;\">[29] </span><a href=\"http://en.wikipedia.org/wiki/Sort_(Unix)\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Sor…</span></a></p>\n<p><span style=\"font-weight: 400;\">[30] </span><a href=\"http://en.wikipedia.org/wiki/Cut_(Unix)\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Cut…</span></a></p>\n<p><span style=\"font-weight: 400;\">[31] </span><a href=\"http://en.wikipedia.org/wiki/Tr_(Unix)\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Tr_…</span></a></p>\n<p><span style=\"font-weight: 400;\">[32] </span><a href=\"http://zookeeper.apache.org/\"><span style=\"font-weight: 400;\">http://zookeeper.apache.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[33] </span><a href=\"http://hive.apache.org/\"><span style=\"font-weight: 400;\">http://hive.apache.org/</span></a></p>\n<p><span style=\"font-weight: 400;\">[34] </span><a href=\"http://static.googleusercontent.com/external_content/untrusted_dlcp/labs.google.com/en/us/papers/mapreduce-osdi04.pdf\"><span style=\"font-weight: 400;\">http://static.googleusercontent….</span></a></p>\n<p><span style=\"font-weight: 400;\">[35]</span><a href=\"http://static.googleusercontent.com/external_content/untrusted_dlcp/labs.google.com/en/us/papers/gfs-sosp2003.pdf\"><span style=\"font-weight: 400;\">http://static.googleusercontent….</span></a></p>\n<p><span style=\"font-weight: 400;\">[36]</span><a href=\"http://static.googleusercontent.com/external_content/untrusted_dlcp/labs.google.com/en/us/papers/bigtable-osdi06.pdf\"><span style=\"font-weight: 400;\">http://static.googleusercontent….</span></a></p>\n<p><span style=\"font-weight: 400;\">[37]</span><a href=\"http://static.googleusercontent.com/external_content/untrusted_dlcp/research.google.com/en/us/pubs/archive/35179.pdf\"><span style=\"font-weight: 400;\">http://static.googleusercontent….</span></a></p>\n<p><span style=\"font-weight: 400;\">[38] </span><a href=\"http://www.ics.uci.edu/~welling/teaching/273ASpring10/IntroMLBook.pdf\"><span style=\"font-weight: 400;\">http://www.ics.uci.edu/~welling/…</span></a></p>\n<p><span style=\"font-weight: 400;\">[39] </span><a href=\"http://www.stanford.edu/~hastie/local.ftp/Springer/OLD//ESLII_print4.pdf\"><span style=\"font-weight: 400;\">http://www.stanford.edu/~hastie/…</span></a></p>\n<p><span style=\"font-weight: 400;\">[40] </span><a href=\"http://infolab.stanford.edu/~ullman/mmds.html\"><span style=\"font-weight: 400;\">http://infolab.stanford.edu/~ull…</span></a></p>\n<p><span style=\"font-weight: 400;\">[41] </span><a href=\"https://github.com/josephmisiti/machine-learning-module\"><span style=\"font-weight: 400;\">https://github.com/josephmisiti/…</span></a></p>\n<p><span style=\"font-weight: 400;\">[42] </span><a href=\"http://en.wikipedia.org/wiki/Wavelet\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Wav…</span></a></p>\n<p><span style=\"font-weight: 400;\">[43] </span><a href=\"http://www.shearlet.uni-osnabrueck.de/papers/Smrus.pdf\"><span style=\"font-weight: 400;\">http://www.shearlet.uni-osnabrue…</span></a></p>\n<p><span style=\"font-weight: 400;\">[44] </span><a href=\"http://math.mit.edu/icg/papers/FDCT.pdf\"><span style=\"font-weight: 400;\">http://math.mit.edu/icg/papers/F…</span></a></p>\n<p><span style=\"font-weight: 400;\">[45] </span><a href=\"http://www.ifp.illinois.edu/~minhdo/publications/contourlet.pdf\"><span style=\"font-weight: 400;\">http://www.ifp.illinois.edu/~min…</span></a></p>\n<p><span style=\"font-weight: 400;\">[46] </span><a href=\"http://www.cmap.polytechnique.fr/~mallat/papiers/07-NumerAlgo-MallatPeyre-BandletsReview.pdf\"><span style=\"font-weight: 400;\">http://www.cmap.polytechnique.fr…</span></a></p>\n<p><span style=\"font-weight: 400;\">[47 ]</span><a href=\"http://en.wikipedia.org/wiki/Time%E2%80%93frequency_analysis\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Tim…</span></a></p>\n<p><span style=\"font-weight: 400;\">[48] </span><a href=\"http://en.wikipedia.org/wiki/Fourier_analysis\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Fou…</span></a></p>\n<p><span style=\"font-weight: 400;\">[49 ]</span><a href=\"http://en.wikipedia.org/wiki/Convolution\"><span style=\"font-weight: 400;\">http://en.wikipedia.org/wiki/Con…</span></a></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>\n                        <img src=\"http://www.jobbole.com/wp-content/uploads/2016/04/b947d0acc8cb4e3b0649a27c606466363.jpg\">\n            \n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113592\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113592votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113592\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/kk3039\">Agatha</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/kk3039\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/07/bbf14f4f9bf8b235b2902781c38247b3.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/kk3039\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/kk3039/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/kk3039/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 17</a> · <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/kk3039\"><i class=\"fa fa-github\"></i></a> <a title=\"Linked主页\" target=\"_blank\" href=\"https://www.linkedin.com/pub/ying-victoria-lu/89/41/56\"><i class=\"fa fa-linkedin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/0104e7c14a36650ad69f34f21bb577491ca53eda.jpg"},{"url_object_id": "b086f1733ad04a6091b002b7a9e6f100", "title": "三款简单而优秀的 Linux 网络监视工具", "url": "http://blog.jobbole.com/113549/", "create_date": "2018/01/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/10/9aeba2223d66a3c6692233694383abce.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/10/3-simple-excellent-linux-network-monitors\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9284-1.html\">Linux中国/nodekey</a>   </div><blockquote><p>通过 <code>iftop</code>、 <code>nethogs</code> 和 <code>vnstat</code> 详细了解你的网络连接状态。</p></blockquote>\n<p>你可以通过这三个 Linux 命令了解当前网络的大量信息。<code>iftop</code> 通过进程号跟踪网络连接，<code>nethogs</code> 快速告知你哪些进程在占用你的带宽，而 <code>vnstat</code> 以一个良好的轻量级守护进程在后台运行，并实时记录你的网络使用情况。</p>\n<h3 id=\"toc_1\">iftop</h3>\n<p>令人称赞的 <code>iftop</code> 可以监听您指定的网络接口，并以 top 的样式呈现。</p>\n<p>这是一个不错的小工具，可以用于找出网络拥塞，测速和维持网络流量总量。看到自己到底在用多少带宽往往是非常惊人的，尤其是对于我们这些仍然记得电话线路、调制解调器，“高速”到令人惊叫的 kb 和实时波特率的老人们。我们在很久之前就不再使用波特率，转而钟情于比特率。波特率用于衡量信号变化，尽管有时候与比特率相同，但大多数情况下并非如此。</p>\n<p>如果你只有一个网络接口，直接运行 <code>iftop</code> 即可。不过 <code>iftop</code> 需要 root 权限：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354ad480956151\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo iftop\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ad480956151-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ad480956151-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354ad480956151-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">iftop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ad480956151-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如果你有多个网络接口，那就指定你要监控的接口：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354b6206548018\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo iftop -i wlan0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354b6206548018-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354b6206548018-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354b6206548018-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">iftop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">wlan0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354b6206548018-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>就像 <code>top</code> 命令一样，你可以在命令运行时更改显示选项：</p>\n<ul>\n<li><code>h</code> 切换帮助界面。</li>\n<li><code>n</code> 是否解析域名。</li>\n<li><code>s</code> 切换源地址的显示，<code>d</code> 则切换目的地址的显示。</li>\n<li><code>S</code> 是否显示端口号。</li>\n<li><code>N</code> 是否解析端口；若关闭解析则显示端口号。</li>\n<li><code>t</code> 切换文本显示界面。默认的显示方式需要 ncurses。我个人认为图 1 的显示方式在组织性和可读性都更加良好。</li>\n<li><code>p</code> 暂停显示更新。</li>\n<li><code>q</code> 退出程序。</li>\n</ul>\n<p><img title=\"text display\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e648c6c2bf6d2eb4da04ede2c411d4b0.png\" alt=\"text display\"></p>\n<p><em>图 1:组织性和可读性良好的文本显示。</em></p>\n<p>当你切换显示设置的时候，<code>iftop</code> 并不会中断监测流量。当然你也可以单独监测一台主机。而这需要该主机的 IP 地址和子网掩码。现在，我很好奇 Pandora（LCTT 译注：一家美国的电台公司）能给我贫瘠的带宽带来多大的负载。因此我首先使用 dig 命令找到他们的 IP 地址：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354bb261378986\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ dig A pandora.com\r\n[...]\r\n;; ANSWER SECTION:\r\npandora.com.            267     IN      A       208.85.40.20\r\npandora.com.            267     IN      A       208.85.40.50\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bb261378986-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354bb261378986-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bb261378986-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354bb261378986-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bb261378986-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354bb261378986-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354bb261378986-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">dig</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pandora</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">com</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354bb261378986-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354bb261378986-3\"><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ANSWER </span><span class=\"crayon-v\">SECTION</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354bb261378986-4\"><span class=\"crayon-v\">pandora</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">267</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\">      </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">208.85.40.20</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354bb261378986-5\"><span class=\"crayon-v\">pandora</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">            </span><span class=\"crayon-cn\">267</span><span class=\"crayon-h\">     </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\">      </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">208.85.40.50</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354bb261378986-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>那子网掩码呢？<a href=\"https://www.linux.com/learn/intro-to-linux/2017/8/how-calculate-network-addresses-ipcalc\">ipcalc</a> 会告诉我们：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354bf304967891\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ipcalc -b 208.85.40.20\r\nAddress:   208.85.40.20   \r\nNetmask:   255.255.255.0 = 24\r\nWildcard:  0.0.0.255  \r\n=&gt;\r\nNetwork:   208.85.40.0/24 \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bf304967891-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354bf304967891-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bf304967891-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354bf304967891-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bf304967891-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354bf304967891-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354bf304967891-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354bf304967891-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ipcalc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">208.85.40.20</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354bf304967891-2\"><span class=\"crayon-v\">Address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">208.85.40.20</span><span class=\"crayon-h\">   </span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354bf304967891-3\"><span class=\"crayon-v\">Netmask</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">255.255.255.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">24</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354bf304967891-4\"><span class=\"crayon-v\">Wildcard</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.0.0.255</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354bf304967891-5\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354bf304967891-6\"><span class=\"crayon-v\">Network</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">208.85.40.0</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354bf304967891-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>现在，将 IP 地址和子网掩码提供给 <code>iftop</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354c3776933199\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo iftop -F 208.85.40.20/24 -i wlan0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354c3776933199-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354c3776933199-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354c3776933199-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">iftop</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">208.85.40.20</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">wlan0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354c3776933199-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>很棒的不是么？而我也很惊奇地发现，Pandora 在我的网络上，每小时大约使用 500kb。并且就像大多数流媒体服务一样，Pandora 的流量在迅速增长，并依靠缓存稳定下来。</p>\n<p>你可以使用 <code>-G</code> 选项对 IPv6 地址执行相同的操作。查阅友好的 man 可以帮助你了解 <code>iftop</code> 的其他功能，包括使用个人配置文件自定义你的默认选项，以及使用自定义过滤（请参阅 <a href=\"http://www.tcpdump.org/manpages/pcap-filter.7.html\">PCAP-FILTER</a> 来获取过滤指南）。</p>\n<h3 id=\"toc_2\">nethogs</h3>\n<p>当你想要快速了解是谁在吸取你的带宽的时候，<code>nethogs</code> 是个快速而简单的方法。你需要以 root 身份运行并指定要监听的接口。它会给你显示大量的应用程序及其进程号，所以如果你想的话，你可以借此杀死任一进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354c6500839444\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo nethogs wlan0\r\n\r\nnethogs version 0.8.1\r\n\r\nPID USER   PROGRAM              DEV    SENT   RECEIVED       \r\n7690 carla /usr/lib/firefox     wlan0 12.494 556.580 KB/sec\r\n5648 carla .../chromium-browser wlan0  0.052   0.038 KB/sec\r\nTOTAL                                 12.546 556.618 KB/sec \r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354c6500839444-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354c6500839444-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354c6500839444-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354c6500839444-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354c6500839444-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354c6500839444-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354c6500839444-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354c6500839444-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354c6500839444-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354c6500839444-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">nethogs </span><span class=\"crayon-e\">wlan0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354c6500839444-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c67a354c6500839444-3\"><span class=\"crayon-e\">nethogs </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.8.1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354c6500839444-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c67a354c6500839444-5\"><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">USER   </span><span class=\"crayon-e\">PROGRAM              </span><span class=\"crayon-e\">DEV    </span><span class=\"crayon-e\">SENT   </span><span class=\"crayon-i\">RECEIVED</span><span class=\"crayon-h\">       </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354c6500839444-6\"><span class=\"crayon-cn\">7690</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">carla</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">firefox     </span><span class=\"crayon-i\">wlan0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.494</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556.580</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KB</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sec</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354c6500839444-7\"><span class=\"crayon-cn\">5648</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">carla</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">chromium</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">browser </span><span class=\"crayon-i\">wlan0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.052</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0.038</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KB</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">sec</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354c6500839444-8\"><span class=\"crayon-i\">TOTAL</span><span class=\"crayon-h\">                                 </span><span class=\"crayon-cn\">12.546</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">556.618</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KB</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">sec</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354c6500839444-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p><code>nethogs</code> 并没有多少选项：在 kb/s、kb、b、mb之间循环，按接收和发送的数据包排序，调整刷新延迟。具体请看<code>man nethogs</code>，或者是运行 <code>nethogs -h</code>。</p>\n<h3 id=\"toc_3\">vnstat</h3>\n<p><a href=\"http://humdi.net/vnstat/\">vnstat</a>是最容易使用的网络数据收集工具。它十分轻量并且不需要 root 权限。它以守护进程在后台运行，因此可以实时地记录你的网络数据。单个 <code>vnstat</code> 命令就可以显示所累计的数据。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354ca178154106\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vnstat -i wlan0\r\nDatabase updated: Tue Oct 17 08:36:38 2017\r\n\r\n   wlan0 since 10/17/2017\r\n\r\n          rx:  45.27 MiB      tx:  3.77 MiB      total:  49.04 MiB\r\n\r\n   monthly\r\n                     rx      |     tx      |    total    |   avg. rate\r\n     ------------------------+-------------+-------------+---------------\r\n       Oct '17     45.27 MiB |    3.77 MiB |   49.04 MiB |    0.28 kbit/s\r\n     ------------------------+-------------+-------------+---------------\r\n     estimated        85 MiB |       5 MiB |      90 MiB |\r\n\r\n   daily\r\n                     rx      |     tx      |    total    |   avg. rate\r\n     ------------------------+-------------+-------------+---------------\r\n         today     45.27 MiB |    3.77 MiB |   49.04 MiB |   12.96 kbit/s\r\n     ------------------------+-------------+-------------+---------------\r\n     estimated       125 MiB |       8 MiB |     133 MiB |\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354ca178154106-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354ca178154106-21\">21</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">wlan0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-2\"><span class=\"crayon-e\">Database </span><span class=\"crayon-v\">updated</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">36</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">38</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">wlan0 </span><span class=\"crayon-i\">since</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2017</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-6\"><span class=\"crayon-h\">          </span><span class=\"crayon-v\">rx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">45.27</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MiB      </span><span class=\"crayon-v\">tx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.77</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MiB      </span><span class=\"crayon-v\">total</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">49.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">MiB</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-8\"><span class=\"crayon-e\">   </span><span class=\"crayon-e\">monthly</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-9\"><span class=\"crayon-e\">                     </span><span class=\"crayon-v\">rx</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">tx</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">total</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">avg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rate</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-10\"><span class=\"crayon-h\">     </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-11\"><span class=\"crayon-h\">       </span><span class=\"crayon-i\">Oct</span><span class=\"crayon-h\"> </span>'<span class=\"crayon-cn\">17</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">45.27</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3.77</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">49.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0.28</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kbit</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-12\"><span class=\"crayon-h\">     </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-13\"><span class=\"crayon-h\">     </span><span class=\"crayon-i\">estimated</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">85</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">90</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-15\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">daily</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-16\"><span class=\"crayon-e\">                     </span><span class=\"crayon-v\">rx</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">     </span><span class=\"crayon-v\">tx</span><span class=\"crayon-h\">      </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">    </span><span class=\"crayon-v\">total</span><span class=\"crayon-h\">    </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">avg</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rate</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-17\"><span class=\"crayon-h\">     </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-18\"><span class=\"crayon-h\">         </span><span class=\"crayon-i\">today</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">45.27</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">3.77</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">49.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">12.96</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kbit</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">s</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-19\"><span class=\"crayon-h\">     </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354ca178154106-20\"><span class=\"crayon-h\">     </span><span class=\"crayon-i\">estimated</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">125</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">133</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MiB</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5a76c67a354ca178154106-21\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0064 seconds] -->\r\n<p>默认情况下它会显示所有的网络接口。使用 <code>-i</code> 选项来选择某个接口。也可以像这样合并多个接口的数据：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354cd136953847\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vnstat -i wlan0+eth0+eth1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354cd136953847-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354cd136953847-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354cd136953847-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wlan0</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">eth0</span><span class=\"crayon-o\">+</span><span class=\"crayon-i\">eth1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354cd136953847-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你可以通过这几种方式过滤数据显示：</p>\n<ul>\n<li><code>-h</code> 按小时显示统计信息。</li>\n<li><code>-d</code> 按天显示统计信息.</li>\n<li><code>-w</code> 和 <code>-m</code> 分别按周和月份来显示统计信息。</li>\n<li>使用 <code>-l</code> 选项查看实时更新。</li>\n</ul>\n<p>以下这条命令将会删除 wlan1 的数据库并不再监视它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354d1735377417\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vnstat -i wlan1 --delete\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354d1735377417-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354d1735377417-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354d1735377417-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wlan1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">delete</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354d1735377417-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>而下面这条命令将会为你的一个网络接口创建一个别名。这个例子使用了 Ubuntu 16.04 的一个有线接口名称：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354d4388845472\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vnstat -u -i enp0s25 --nick eth0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354d4388845472-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354d4388845472-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354d4388845472-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnstat</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enp0s25</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">nick </span><span class=\"crayon-i\">eth0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354d4388845472-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>默认情况下，vnstat 会监视 eth0。你可以在 <code>/etc/vnstat.conf</code> 对它进行修改，或者在你的家目录下创建你自己的个人配置文件。请参阅 <code>man vnstat</code> 以获取完整的指南。</p>\n<p>你也可以安装 <code>vnstati</code> 来创建简单的彩图（图 2）:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c67a354d8600198736\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vnstati -s -i wlx7cdd90a0a1c2 -o vnstat.png\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c67a354d8600198736-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c67a354d8600198736-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c67a354d8600198736-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnstati</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wlx7cdd90a0a1c2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vnstat</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">png</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c67a354d8600198736-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><img title=\"vnstati\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8fc64a29fff93e65cff2e523c0861ec7.png\" alt=\"vnstati\"></p>\n<p><em>图 2:你可以使用vnstati来创建简单的彩图。</em></p>\n<p>请参阅 <code>man vnstati</code> 以获取完整的选项。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113549\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113549votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113549\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a0c1bbf258eb5064ea3d6b896485a481525b7f95.jpg"},{"url_object_id": "2f8ffe8851bbe10af9d1063aee4be256", "title": "Nginx 教程 （1）：基本概念", "url": "http://blog.jobbole.com/113555/", "create_date": "2018/01/28", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/07/Nginx-Logo.jpg"], "praise_nums": "1", "comment_nums": 2, "fav_nums": 10, "tags": "IT技术,Nginx,Web", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.netguru.co/codestories/nginx-tutorial-basics-concepts\">netguru</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/nginx-tutorial-basics-concepts\">开源中国</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e4745b46a3495eb4c48754bd08a62b75.jpg\" alt=\"\"></p>\n<h2>简介</h2>\n<p>嗨！分享就是关心！所以，我们愿意再跟你分享一点点知识。我们准备了这个划分为三节的《Nginx教程》。如果你对 Nginx 已经有所了解，或者你希望了解更多，这个教程将会对你非常有帮助。</p>\n<p>我们会告诉你 Nginx 是如何工作的，其背后的概念有哪些，以及如何优化它以提升应用程序的性能。还会告诉你如何安装，如何启动、运行。</p>\n<p>这个教程包括三节：</p>\n<ul>\n<li><strong>基础概念</strong>——你可以了解命令（directive）与环境（context）的区别、继承模式，以及 Nginx 选择服务器区块的顺序，还有安装位置。</li>\n<li><strong>性能管理</strong>——提升速度的诀窍。我们将会讲解 gzip、缓存、缓冲区以及超时设置。</li>\n<li><strong>SSL 设置</strong>——讲解用 HTTPS 来提供内容的设置步骤。</li>\n</ul>\n<p>我们的目标是创建一系列教程，让你可以轻松找到特定主题的正确配置，如 gzip、SSL 等，或者直接浏览一下那些配置。为了获得最佳的学习体验，我们建议你在自己的机器上安装 Nginx，并亲手实战一下。</p>\n<h2>什么是 Nginx？</h2>\n<p>Nginx 最初是作为一个 Web 服务器创建的，用于解决 <a href=\"https://en.wikipedia.org/wiki/C10k_problem\" target=\"_blank\" rel=\"nofollow\">C10k</a> 的问题。作为一个 Web 服务器，它可以以惊人的速度为您的数据服务。但 Nginx 不仅仅是一个 Web 服务器，你还可以将其用作反向代理，与较慢的上游服务器（如：Unicorn 或 Puma）轻松集成。你可以适当地分配流量（负载均衡器）、流媒体、动态调整图像大小、缓存内容等等。</p>\n<p>基本的 nginx 体系结构由 master 进程和其 worker 进程组成。master 读取配置文件，并维护 worker 进程，而 worker 则会对请求进行实际处理。</p>\n<h2>基本命令</h2>\n<p>要启动 nginx，只需输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b298985207549\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[sudo] nginx</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b298985207549-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b298985207549-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-v\">nginx</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>当你的 nginx 实例运行时，你可以通过发送相应的信号来管理它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2a2461106815\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[sudo] nginx -s signal</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2a2461106815-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2a2461106815-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sudo</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-i\">nginx</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span> <span class=\"crayon-v\">signal</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>可用的信号：</p>\n<ul>\n<li>stop – 快速关闭</li>\n<li>quit – 优雅关闭 (等待 worker 线程完成处理)</li>\n<li>reload – 重载配置文件</li>\n<li>reopen – 重新打开日志文件</li>\n</ul>\n<h2>指令和上下文</h2>\n<p>nginx 的配置文件，默认的位置包括：</p>\n<ul>\n<li><code>/etc/nginx/nginx.conf</code>,</li>\n<li><code>/usr/local/etc/nginx/nginx.conf</code>，或</li>\n<li><code>/usr/local/nginx/conf/nginx.conf</code></li>\n</ul>\n<p>配置文件的由下面的部分构成:</p>\n<ul>\n<li>指令 – 可选项，包含名称和参数，以分号结尾</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2a7014947229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngzip on;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2a7014947229-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2a7014947229-1\"><span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<ul>\n<li>上下文 – 分块，你可以声明指令 – 类似于编程语言中的作用域</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2aa638581794\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_processes 2; # 全局上下文指令\r\n\r\nhttp {              # http 上下文\r\n    gzip on;        # http 上下文中的指令\r\n\r\n  server {          # server 上下文\r\n    listen 80;      # server 上下文中的指令\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2aa638581794-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2aa638581794-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2aa638581794-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2aa638581794-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2aa638581794-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2aa638581794-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2aa638581794-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2aa638581794-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2aa638581794-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2aa638581794-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>processes <span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># 全局上下文指令</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2aa638581794-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2aa638581794-3\"><span class=\"crayon-e\">http</span> <span class=\"crayon-sy\">{</span>              <span class=\"crayon-p\"># http 上下文</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2aa638581794-4\">    <span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>        <span class=\"crayon-p\"># http 上下文中的指令</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2aa638581794-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2aa638581794-6\">  <span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span>          <span class=\"crayon-p\"># server 上下文</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2aa638581794-7\">    <span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span>      <span class=\"crayon-p\"># server 上下文中的指令</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2aa638581794-8\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2aa638581794-9\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h2>指令类型</h2>\n<p>在多个上下文中使用相同的指令时，必须要小心，因为继承模型不同时有着不同的指令。有三种类型的指令，每种都有自己的继承模型。</p>\n<h3>普通指令</h3>\n<p>在每个上下文仅有唯一值。而且，它只能在当前上下文中定义一次。子级上下文可以覆盖父级中的值，并且这个覆盖值只在当前的子级上下文中有效。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2ae508838973\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngzip on;\r\ngzip off; # 非法，不能在同一个上下文中指定同一普通指令2次\r\n\r\nserver {\r\n  location /downloads {\r\n    gzip off;\r\n  }\r\n\r\n  location /assets {\r\n    # gzip is on here\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ae508838973-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ae508838973-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ae508838973-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ae508838973-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ae508838973-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ae508838973-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ae508838973-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ae508838973-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ae508838973-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ae508838973-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ae508838973-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ae508838973-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ae508838973-1\"><span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ae508838973-2\"><span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">off</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># 非法，不能在同一个上下文中指定同一普通指令2次</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ae508838973-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ae508838973-4\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ae508838973-5\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">downloads</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ae508838973-6\">    <span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">off</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ae508838973-7\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ae508838973-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ae508838973-9\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">assets</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ae508838973-10\">    <span class=\"crayon-p\"># gzip is on here</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ae508838973-11\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ae508838973-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h3>数组指令</h3>\n<p>在同一上下文中添加多条指令，将添加多个值，而不是完全覆盖。在子级上下文中定义指令将覆盖给父级上下文中的值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2b2562986145\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nerror_log /var/log/nginx/error.log;\r\nerror_log /var/log/nginx/error_notive.log notice;\r\nerror_log /var/log/nginx/error_debug.log debug;\r\n\r\nserver {\r\n  location /downloads {\r\n    # 下面的配置会覆盖父级上下文中的指令\r\n    error_log /var/log/nginx/error_downloads.log;\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b2562986145-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b2562986145-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b2562986145-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b2562986145-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b2562986145-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b2562986145-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b2562986145-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b2562986145-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b2562986145-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b2562986145-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b2562986145-1\"><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">_</span>log <span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b2562986145-2\"><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">_</span>log <span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">error_notive</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">log</span> <span class=\"crayon-v\">notice</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b2562986145-3\"><span class=\"crayon-v\">error</span><span class=\"crayon-sy\">_</span>log <span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">error_debug</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">log</span> <span class=\"crayon-v\">debug</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b2562986145-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b2562986145-5\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b2562986145-6\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">downloads</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b2562986145-7\">    <span class=\"crayon-p\"># 下面的配置会覆盖父级上下文中的指令</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b2562986145-8\">    <span class=\"crayon-v\">error</span><span class=\"crayon-sy\">_</span>log <span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">log</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">error_downloads</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b2562986145-9\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b2562986145-10\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p></p>\n<h3>行动指令</h3>\n<p>行动是改变事情的指令。根据模块的需要，它继承的行为可能会有所不同。</p>\n<p>例如 rewrite 指令，只要是匹配的都会执行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2b5110754247\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  rewrite ^ /foobar;\r\n\r\n  location /foobar {\r\n    rewrite ^ /foo;\r\n    rewrite ^ /bar;\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b5110754247-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b5110754247-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b5110754247-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b5110754247-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b5110754247-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b5110754247-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b5110754247-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b5110754247-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b5110754247-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b5110754247-2\">  <span class=\"crayon-i\">rewrite</span> <span class=\"crayon-o\">^</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">foobar</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b5110754247-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b5110754247-4\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">foobar</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b5110754247-5\">    <span class=\"crayon-i\">rewrite</span> <span class=\"crayon-o\">^</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b5110754247-6\">    <span class=\"crayon-i\">rewrite</span> <span class=\"crayon-o\">^</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">bar</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b5110754247-7\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b5110754247-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>如果用户想尝试获取 /sample：</p>\n<ul>\n<li>server的rewrite将会执行，从 /sample rewrite 到 /foobar</li>\n<li>location /foobar 会被匹配</li>\n<li>location的第一个rewrite执行，从/foobar rewrite到/foo</li>\n<li>location的第二个rewrite执行，从/foo rewrite到/bar</li>\n</ul>\n<p>return 指令提供的是不同的行为：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2b9895579307\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  location / {\r\n    return 200;\r\n    return 404;\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b9895579307-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b9895579307-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b9895579307-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b9895579307-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2b9895579307-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2b9895579307-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b9895579307-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b9895579307-2\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b9895579307-3\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b9895579307-4\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">404</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2b9895579307-5\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2b9895579307-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在上述的情况下，立即返回200。</p>\n<h2>处理请求</h2>\n<p>在 Nginx 内部，你可以指定多个虚拟服务器，每个虚拟服务器用 server{} 上下文描述。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2bc076435223\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  listen      *:80 default_server;\r\n  server_name netguru.co;\r\n\r\n  return 200 \"Hello from netguru.co\";\r\n}\r\n\r\nserver {\r\n  listen      *:80;\r\n  server_name foo.co;\r\n\r\n  return 200 \"Hello from foo.co\";\r\n}\r\n\r\nserver {\r\n  listen      *:81;\r\n  server_name bar.co;\r\n\r\n  return 200 \"Hello from bar.co\";\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2bc076435223-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2bc076435223-20\">20</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-2\">  <span class=\"crayon-i\">listen</span>      <span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span> <span class=\"crayon-v\">default_server</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-3\">  <span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-5\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">\"Hello from netguru.co\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-8\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-9\">  <span class=\"crayon-i\">listen</span>      <span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-10\">  <span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-12\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">\"Hello from foo.co\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-13\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-14\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-15\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-16\">  <span class=\"crayon-i\">listen</span>      <span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">81</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-17\">  <span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">bar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-18\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2bc076435223-19\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">\"Hello from bar.co\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2bc076435223-20\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>这将告诉 Nginx 如何处理到来的请求。Nginx 将会首先通过检查 listen 指令来测试哪一个虚拟主机在监听给定的 IP 端口组合。</p>\n<p>然后，server_name 指令的值将检测 Host 头(存储着主机域名)。</p>\n<p>Nginx 将会按照下列顺序选择虚拟主机：</p>\n<ol>\n<li>匹配sever_name指令的IP-端口主机</li>\n<li>拥有default_server标记的IP-端口主机</li>\n<li>首先定义的IP-端口主机</li>\n<li>如果没有匹配，拒绝连接。</li>\n</ol>\n<p>例如下面的例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2c6856651052\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nRequest to foo.co:80     =&gt; \"Hello from foo.co\"\r\nRequest to www.foo.co:80 =&gt; \"Hello from netguru.co\"\r\nRequest to bar.co:80     =&gt; \"Hello from netguru.co\"\r\nRequest to bar.co:81     =&gt; \"Hello from bar.co\"\r\nRequest to foo.co:81     =&gt; \"Hello from bar.co\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2c6856651052-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2c6856651052-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2c6856651052-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2c6856651052-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2c6856651052-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2c6856651052-1\"><span class=\"crayon-i\">Request</span> <span class=\"crayon-st\">to</span> <span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span>     <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-s\">\"Hello from foo.co\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2c6856651052-2\"><span class=\"crayon-i\">Request</span> <span class=\"crayon-st\">to</span> <span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-s\">\"Hello from netguru.co\"</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2c6856651052-3\"><span class=\"crayon-i\">Request</span> <span class=\"crayon-st\">to</span> <span class=\"crayon-v\">bar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span>     <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-s\">\"Hello from netguru.co\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2c6856651052-4\"><span class=\"crayon-i\">Request</span> <span class=\"crayon-st\">to</span> <span class=\"crayon-v\">bar</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">81</span>     <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-s\">\"Hello from bar.co\"</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2c6856651052-5\"><span class=\"crayon-i\">Request</span> <span class=\"crayon-st\">to</span> <span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">81</span>     <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-s\">\"Hello from bar.co\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<h3><code>server_name</code> 指令</h3>\n<p>server_name指令接受多个值。它还处理通配符匹配和正则表达式。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2ca877608744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver_name netguru.co www.netguru.co; # exact match\r\nserver_name *.netguru.co;              # wildcard matching\r\nserver_name netguru.*;                 # wildcard matching\r\nserver_name  ~^[0-9]*\\.netguru\\.co$;   # regexp matching</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ca877608744-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ca877608744-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ca877608744-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ca877608744-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ca877608744-1\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">co</span> <span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># exact match</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ca877608744-2\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span>              <span class=\"crayon-p\"># wildcard matching</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ca877608744-3\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">;</span>                 <span class=\"crayon-p\"># wildcard matching</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ca877608744-4\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name  <span class=\"crayon-o\">~</span><span class=\"crayon-o\">^</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">;</span>   <span class=\"crayon-p\"># regexp matching</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>当有歧义时，nginx 将使用下面的命令：</p>\n<ol>\n<li>确切的名字</li>\n<li>最长的通配符名称以星号开始，例如“* .example.org”。</li>\n<li>最长的通配符名称以星号结尾，例如“mail.**”</li>\n<li>首先匹配正则表达式（按照配置文件中的顺序）</li>\n</ol>\n<p>Nginx 会存储 3 个哈希表：确切的名字，以星号开始的通配符，和以星号结尾的通配符。如果结果不在任何表中，则将按顺序进行正则表达式测试。</p>\n<p>值得谨记的是</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2ce665734334\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver_name .netguru.co;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ce665734334-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ce665734334-1\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>是一个来自下面的缩写</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2d1144873383\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver_name  netguru.co  www.netguru.co  *.netguru.co;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2d1144873383-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2d1144873383-1\"><span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name  <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">co</span>  <span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">co</span>  <span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>有一点不同，<code>.netguru.co</code> 存储在第二张表，这意味着它比显式声明的慢一点。</p>\n<h3><code>listen</code> 指令</h3>\n<p>在很多情况下，能够找到 listen 指令，接受IP:端口值</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2d4599783527\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlisten 127.0.0.1:80;\r\nlisten 127.0.0.1;    # by default port :80 is used\r\n\r\nlisten *:81;\r\nlisten 81;           # by default all ips are used\r\n\r\nlisten [::]:80;      # IPv6 addresses\r\nlisten [::1];        # IPv6 addresses</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2d4599783527-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2d4599783527-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2d4599783527-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2d4599783527-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2d4599783527-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2d4599783527-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2d4599783527-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2d4599783527-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2d4599783527-1\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2d4599783527-2\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">127.0.0.1</span><span class=\"crayon-sy\">;</span>    <span class=\"crayon-p\"># by default port :80 is used</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2d4599783527-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2d4599783527-4\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-o\">*</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">81</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2d4599783527-5\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">81</span><span class=\"crayon-sy\">;</span>           <span class=\"crayon-p\"># by default all ips are used</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2d4599783527-6\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2d4599783527-7\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span>      <span class=\"crayon-p\"># IPv6 addresses</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2d4599783527-8\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-sy\">[</span><span class=\"crayon-o\">::</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span>        <span class=\"crayon-p\"># IPv6 addresses</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>然而，还可以指定 UNIX-domain 套接字。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2e1189081487\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlisten unix:/var/run/nginx.sock;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e1189081487-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e1189081487-1\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-v\">unix</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>你甚至可以使用主机名</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2e5583428594\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlisten localhost:80;\r\nlisten netguru.co:80;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e5583428594-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e5583428594-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e5583428594-1\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-v\">localhost</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e5583428594-2\"><span class=\"crayon-i\">listen</span> <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>但请慎用，由于主机可能无法启动 nginx，导致无法绑定在特定的 TCP Socket。</p>\n<p>最后，如果指令不存在，则使用 <code>*:80</code>。</p>\n<h2>最小化配置</h2>\n<p>有了这些知识 – 我们应该能够创建并理解运行 nginx 所需的最低配置。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2e8679592967\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# /etc/nginx/nginx.conf\r\n\r\nevents {}                   # events context needs to be defined to consider config valid\r\n\r\nhttp {\r\n server {\r\n    listen 80;\r\n    server_name  netguru.co  www.netguru.co  *.netguru.co;\r\n\r\n    return 200 \"Hello\";\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e8679592967-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e8679592967-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e8679592967-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e8679592967-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e8679592967-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e8679592967-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e8679592967-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e8679592967-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e8679592967-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e8679592967-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2e8679592967-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2e8679592967-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e8679592967-1\"><span class=\"crayon-p\"># /etc/nginx/nginx.conf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e8679592967-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e8679592967-3\"><span class=\"crayon-e\">events</span> <span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">}</span>                   <span class=\"crayon-p\"># events context needs to be defined to consider config valid</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e8679592967-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e8679592967-5\"><span class=\"crayon-e\">http</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e8679592967-6\"> <span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e8679592967-7\">    <span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e8679592967-8\">    <span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name  <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">co</span>  <span class=\"crayon-v\">www</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">co</span>  <span class=\"crayon-o\">*</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e8679592967-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e8679592967-10\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">\"Hello\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2e8679592967-11\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2e8679592967-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p>\n<h2>root, location, 和 try_files 指令</h2>\n<h3>root 指令</h3>\n<p>root 指令设置请求的根目录，允许 nginx 将传入请求映射到文件系统。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2eb430632664\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  listen 80;\r\n  server_name netguru.co;\r\n  root /var/www/netguru.co;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2eb430632664-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2eb430632664-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2eb430632664-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2eb430632664-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2eb430632664-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2eb430632664-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2eb430632664-2\">  <span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2eb430632664-3\">  <span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2eb430632664-4\">  <span class=\"crayon-i\">root</span> <span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">www</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2eb430632664-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>根据给定的请求，指定 nginx 服务器允许的内容</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2ef877084598\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnetguru.co:80/index.html     # returns /var/www/netguru.co/index.html\r\nnetguru.co:80/foo/index.html # returns /var/www/netguru.co/foo/index.html</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ef877084598-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ef877084598-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ef877084598-1\"><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span>     <span class=\"crayon-p\"># returns /var/www/netguru.co/index.html</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ef877084598-2\"><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span> <span class=\"crayon-p\"># returns /var/www/netguru.co/foo/index.html</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3><code>location</code> 指令</h3>\n<p>location指令根据请求的 URI 来设置配置。</p>\n<p><code>location [modifier] path</code></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2f2553422712\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocation /foo/ {\r\n  # ...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f2553422712-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f2553422712-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f2553422712-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f2553422712-1\"><span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">foo</span><span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f2553422712-2\">  <span class=\"crayon-p\"># ...</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f2553422712-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>如果没有指定修饰符，则路径被视为前缀，其后可以跟随任何东西。</p>\n<p>以上例子将匹配</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2f5162281863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/foo\r\n/fooo\r\n/foo123\r\n/foo/bar/index.html\r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f5162281863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f5162281863-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f5162281863-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f5162281863-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f5162281863-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f5162281863-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f5162281863-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">fooo</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f5162281863-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo123</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f5162281863-4\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bar</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f5162281863-5\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>此外，在给定的上下文中可以使用多个 location 指令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2f8627566675\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  listen 80;\r\n  server_name netguru.co;\r\n  root /var/www/netguru.co;\r\n\r\n  location / {\r\n    return 200 \"root\";\r\n  }\r\n\r\n  location /foo/ {\r\n    return 200 \"foo\";\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f8627566675-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f8627566675-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f8627566675-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f8627566675-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f8627566675-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2f8627566675-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2f8627566675-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f8627566675-2\">  <span class=\"crayon-i\">listen</span> <span class=\"crayon-cn\">80</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-3\">  <span class=\"crayon-v\">server</span><span class=\"crayon-sy\">_</span>name <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f8627566675-4\">  <span class=\"crayon-i\">root</span> <span class=\"crayon-o\">/</span><span class=\"crayon-t\">var</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">www</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f8627566675-6\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-7\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">\"root\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f8627566675-8\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f8627566675-10\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">foo</span><span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-11\">    <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">\"foo\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2f8627566675-12\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2f8627566675-13\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2fc271862386\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnetguru.co:80   /       # =&gt; \"root\"\r\nnetguru.co:80   /foo    # =&gt; \"foo\"\r\nnetguru.co:80   /foo123 # =&gt; \"foo\"\r\nnetguru.co:80   /bar    # =&gt; \"root\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2fc271862386-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2fc271862386-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2fc271862386-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2fc271862386-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2fc271862386-1\"><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span>   <span class=\"crayon-o\">/</span>       <span class=\"crayon-p\"># =&gt; \"root\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2fc271862386-2\"><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span>   <span class=\"crayon-o\">/</span><span class=\"crayon-i\">foo</span>    <span class=\"crayon-p\"># =&gt; \"foo\"</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2fc271862386-3\"><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span>   <span class=\"crayon-o\">/</span><span class=\"crayon-i\">foo123</span> <span class=\"crayon-p\"># =&gt; \"foo\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2fc271862386-4\"><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">80</span>   <span class=\"crayon-o\">/</span><span class=\"crayon-i\">bar</span>    <span class=\"crayon-p\"># =&gt; \"root\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>Nginx 也提供了一些修饰符，可用于连接 location。这些修饰符将影响 location 模块使用的地方，因为每个修饰符都分配了优先级。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b2ff057376745\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n=           - Exact match\r\n^~          - Preferential match\r\n~ &amp;&amp; ~*     - Regex match\r\nno modifier - Prefix match</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ff057376745-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ff057376745-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b2ff057376745-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b2ff057376745-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ff057376745-1\"><span class=\"crayon-o\">=</span>           <span class=\"crayon-o\">-</span> <span class=\"crayon-i\">Exact</span> <span class=\"crayon-v\">match</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ff057376745-2\"><span class=\"crayon-o\">^</span><span class=\"crayon-o\">~</span>          <span class=\"crayon-o\">-</span> <span class=\"crayon-i\">Preferential</span> <span class=\"crayon-v\">match</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b2ff057376745-3\"><span class=\"crayon-o\">~</span> <span class=\"crayon-o\">&amp;&amp;</span> <span class=\"crayon-o\">~</span><span class=\"crayon-o\">*</span>     <span class=\"crayon-o\">-</span> <span class=\"crayon-i\">Regex</span> <span class=\"crayon-e\">match</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b2ff057376745-4\"><span class=\"crayon-i\">no</span> <span class=\"crayon-i\">modifier</span> <span class=\"crayon-o\">-</span> <span class=\"crayon-i\">Prefix</span> <span class=\"crayon-v\">match</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>Nginx 会先检查精确匹配。如果找不到，我们会找优先级最高的。如果这个匹配依然失败，正则表达式匹配将按照出现的顺序进行测试。至少，最后一个前缀匹配将被使用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b302833895014\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocation /match {\r\n  return 200 'Prefix match: matches everything that starting with /match';\r\n}\r\n\r\nlocation ~* /match[0-9] {\r\n  return 200 'Case insensitive regex match';\r\n}\r\n\r\nlocation ~ /MATCH[0-9] {\r\n  return 200 'Case sensitive regex match';\r\n}\r\n\r\nlocation ^~ /match0 {\r\n  return 200 'Preferential match';\r\n}\r\n\r\nlocation = /match {\r\n  return 200 'Exact match';\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b302833895014-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b302833895014-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-1\"><span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">match</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-2\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">'Prefix match: matches everything that starting with /match'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-3\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-4\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-5\"><span class=\"crayon-e\">location</span> <span class=\"crayon-o\">~</span><span class=\"crayon-o\">*</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">match</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-6\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">'Case insensitive regex match'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-7\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-8\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-9\"><span class=\"crayon-e\">location</span> <span class=\"crayon-o\">~</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">MATCH</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">]</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-10\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">'Case sensitive regex match'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-12\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-13\"><span class=\"crayon-e\">location</span> <span class=\"crayon-o\">^</span><span class=\"crayon-o\">~</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">match0</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-14\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">'Preferential match'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-15\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-16\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-17\"><span class=\"crayon-i\">location</span> <span class=\"crayon-o\">=</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">match</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b302833895014-18\">  <span class=\"crayon-st\">return</span> <span class=\"crayon-cn\">200</span> <span class=\"crayon-s\">'Exact match'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b302833895014-19\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b306478837735\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/match/    # =&gt; 'Exact match'\r\n/match0    # =&gt; 'Preferential match'\r\n/match1    # =&gt; 'Case insensitive regex match'\r\n/MATCH1    # =&gt; 'Case sensitive regex match'\r\n/match-abc # =&gt; 'Prefix match: matches everything that starting with /match'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b306478837735-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b306478837735-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b306478837735-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b306478837735-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b306478837735-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b306478837735-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">match</span><span class=\"crayon-o\">/</span>    <span class=\"crayon-p\"># =&gt; 'Exact match'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b306478837735-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">match0</span>    <span class=\"crayon-p\"># =&gt; 'Preferential match'</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b306478837735-3\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">match1</span>    <span class=\"crayon-p\"># =&gt; 'Case insensitive regex match'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b306478837735-4\"><span class=\"crayon-o\">/</span><span class=\"crayon-i\">MATCH1</span>    <span class=\"crayon-p\"># =&gt; 'Case sensitive regex match'</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b306478837735-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">match</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">abc</span> <span class=\"crayon-p\"># =&gt; 'Prefix match: matches everything that starting with /match'</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3><code>try_files</code> 指令</h3>\n<p>尝试不同的路径，找到一个路径就返回。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b309385812462\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntry_files $uri index.html =404;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b309385812462-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b309385812462-1\"><span class=\"crayon-v\">try</span><span class=\"crayon-sy\">_</span>files <span class=\"crayon-sy\">$</span><span class=\"crayon-i\">uri</span> <span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span> <span class=\"crayon-o\">=</span><span class=\"crayon-cn\">404</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>所以对于 <code>/foo.html</code> 请求，它将尝试按以下顺序返回文件：</p>\n<ol>\n<li>$uri ( /foo.html )</li>\n<li>index.html</li>\n<li>如果什么都没找到则返回 404</li>\n</ol>\n<p>有趣的是，如果我们在服务器上下文中定义 try_files，然后定义匹配的所有请求的 location —— try_files 将不会执行。</p>\n<p>这是因为在服务器上下文中定义的 try_files 是它的 pseudo-location，这是最不可能的位置。因此，定义 location/ 将比 pseudo-location 更具体。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b30d989960326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  try_files $uri /index.html =404;\r\n\r\n  location / {\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b30d989960326-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b30d989960326-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b30d989960326-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b30d989960326-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b30d989960326-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b30d989960326-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b30d989960326-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b30d989960326-2\">  <span class=\"crayon-v\">try</span><span class=\"crayon-sy\">_</span>files <span class=\"crayon-sy\">$</span><span class=\"crayon-i\">uri</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span> <span class=\"crayon-o\">=</span><span class=\"crayon-cn\">404</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b30d989960326-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b30d989960326-4\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b30d989960326-5\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b30d989960326-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>因此，你应该避免在 server 上下文中出现 try_files:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c4530b310129204902\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nserver {\r\n  location / {\r\n    try_files $uri /index.html =404;\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b310129204902-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b310129204902-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b310129204902-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c4530b310129204902-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c4530b310129204902-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c4530b310129204902-1\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b310129204902-2\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b310129204902-3\">    <span class=\"crayon-v\">try</span><span class=\"crayon-sy\">_</span>files <span class=\"crayon-sy\">$</span><span class=\"crayon-i\">uri</span> <span class=\"crayon-o\">/</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">html</span> <span class=\"crayon-o\">=</span><span class=\"crayon-cn\">404</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c4530b310129204902-4\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76c4530b310129204902-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h2>总结</h2>\n<p>感谢您的阅读。如果没有大量的资源，这个系列是不可能完成的。在这一系列的写作中，我们发现了一些特别有用的网站：</p>\n<ul>\n<li><a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"nofollow\">nginx 文档</a></li>\n<li><a href=\"https://www.nginx.com/blog/\" target=\"_blank\" rel=\"nofollow\">nginx 博客</a></li>\n<li><a href=\"https://www.udemy.com/nginx-fundamentals/\" target=\"_blank\" rel=\"nofollow\">udemy（在线教育网站 ）的 nginx 原理教程</a></li>\n<li><a href=\"https://www.igvita.com/\" target=\"_blank\" rel=\"nofollow\">Ilya Grigorik 的博客</a>，和他的令人惊奇的书：<a href=\"https://hpbn.co/\" target=\"_blank\" rel=\"nofollow\">《高性能浏览器网络》</a></li>\n<li><a href=\"https://blog.martinfjordvald.com/\" target=\"_blank\" rel=\"nofollow\">Martin Fjordvald 的博客</a></li>\n</ul>\n<p>我们会很感激你的反馈和评价，请随意讨论。你喜欢这系列吗？你有什么关于下一步应该解决什么问题的建议吗？或你发现了一个错误？告诉我们，下期再见。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113555\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113555votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113555\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 10 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/2d4fd40c8eaec8319c1de2f154b3275aecd23f9d.jpg"},{"url_object_id": "a30dd57d9dcf828544d8fc52dbaabef1", "title": "Nginx 教程（2）：性能", "url": "http://blog.jobbole.com/113572/", "create_date": "2018/01/29", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2013/07/Nginx-Logo.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 6, "tags": "IT技术,Nginx,Web", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.netguru.co/codestories/nginx-tutorial-performance\">netguru</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/translate/nginx-tutorial-performance\">开源中国</a>   </div><p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/52dfd28844c7c6a190eecae956856438.jpg\"></p>\n<p>大家好，分享即关爱，我们很乐意和你分享一些新的知识，我们准备了一个 Nginx 的教程，分为三个系列，如果你对 Nginx 有所耳闻，或者想增进 Nginx 方面的经验和理解，那么恭喜你来对地方了。</p>\n<p>我们会告诉你 Nginx 如何工作及其背后的理念，还有如何优化以加快应用的性能，如何安装启动和保持运行。</p>\n<p>这个教程有三个部分：</p>\n<ul>\n<li>基本概念 —— 这部分需要去了解 Nginx 的一些指令和使用场景，继承模型，以及 Nginx 如何选择 server 块，location 的顺序。</li>\n<li>性能 —— 介绍改善 Nginx 速度的方法和技巧，我们会在这里谈及 gzip 压缩，缓存，buffer 和超时。</li>\n<li>SSL 安装 —— 如何配置服务器使用 HTTPS</li>\n</ul>\n<p>创建这个系列，我们希望，一是作为参考书，可以通过快速查找到相关问题（比如 gzip 压缩，SSL 等）的解决方式，也可以直接通读全文。为了获得更好的学习效果，我们建议你在本机安装 Nginx 并且尝试进行实践。</p>\n<h2><code>tcp_nodelay</code>, <code>tcp_nopush</code> 和 <code>sendfile</code></h2>\n<h3><code>tcp_nodelay</code></h3>\n<p>在 TCP 发展早期，工程师需要面对流量冲突和堵塞的问题，其中涌现了大批的解决方案，其中之一是由 John Nagle 提出的算法。</p>\n<p>Nagle 的算法旨在防止通讯被大量的小包淹没。该理论不涉及全尺寸 tcp 包（最大报文长度，简称 MSS）的处理。只针对比 MSS 小的包，只有当接收方成功地将以前的包(ACK)的所有确认发送回来时，这些包才会被发送。在等待期间，发送方可以缓冲更多的数据之后再发送。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd359062762442\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif package.size &gt;= MSS.size\r\n  send(package)\r\nelsif acks.all_received?\r\n  send(package)\r\nelse\r\n  # acumulate data\r\nend</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd359062762442-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd359062762442-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd359062762442-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd359062762442-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd359062762442-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd359062762442-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd359062762442-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd359062762442-1\"><span class=\"crayon-st\">if</span> <span class=\"crayon-t\">package</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">size</span> <span class=\"crayon-o\">&gt;=</span> <span class=\"crayon-v\">MSS</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">size</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd359062762442-2\">  <span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">package</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd359062762442-3\"><span class=\"crayon-i\">elsif</span> <span class=\"crayon-v\">acks</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all_received</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd359062762442-4\">  <span class=\"crayon-e\">send</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">package</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd359062762442-5\"><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd359062762442-6\">  <span class=\"crayon-p\"># acumulate data</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd359062762442-7\"><span class=\"crayon-st\">end</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>与此同时，诞生了另一个理论，延时 ACK</p>\n<p>在 TCP 通讯中，在发送数据后，需要接收回应包(ACK)来确认数据被成功传达。</p>\n<p>延时 ACK 旨在解决线路被大量的 ACK 包拥堵的状况。为了减少 ACK 包的数量，接收者等待需要回传的数据加上 ACK 包回传给发送方，如果没有数据需要回传，必须在至少每 2 个 MSS，或每 200 至 500 毫秒内发送 ACK（以防我们不再收到包）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd362552862004\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif packages.any?\r\n  send\r\nelsif last_ack_send_more_than_2MSS_ago? || 200_ms_timer.finished?\r\n  send\r\nelse\r\n  # wait\r\nend</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd362552862004-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd362552862004-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd362552862004-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd362552862004-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd362552862004-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd362552862004-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd362552862004-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd362552862004-1\"><span class=\"crayon-st\">if</span> <span class=\"crayon-v\">packages</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">any</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd362552862004-2\">  <span class=\"crayon-e\">send</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd362552862004-3\"><span class=\"crayon-i\">elsif</span> <span class=\"crayon-v\">last_ack_send_more_than_2MSS_ago</span><span class=\"crayon-sy\">?</span> <span class=\"crayon-o\">||</span> <span class=\"crayon-cn\">200_ms_timer.finished</span><span class=\"crayon-sy\">?</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd362552862004-4\">  <span class=\"crayon-e\">send</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd362552862004-5\"><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd362552862004-6\">  <span class=\"crayon-p\"># wait</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd362552862004-7\"><span class=\"crayon-st\">end</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>正如你可能在一开始就注意到的那样 —— 这可能会导致在持久连接上的一些暂时的死锁。让我们重现它！</p>\n<p>假设：</p>\n<ul>\n<li>初始拥塞窗口等于 2。拥塞窗口是另一个 TCP 机制的一部分，称为慢启动。细节现在并不重要，只要记住它限制了一次可以发送多少个包。在第一次往返中，我们可以发送 2 个 MSS 包。在第二次发送中：4 个 MSS 包，第三次发送中：8 个MSS，依此类推。</li>\n<li>4 个已缓存的等待发送的数据包：A, B, C, D</li>\n<li>A, B, C是 MSS 包</li>\n<li>D 是一个小包</li>\n</ul>\n<p>场景：</p>\n<ul>\n<li>由于是初始的拥塞窗口，发送端被允许传送两个包：A 和 B</li>\n<li>接收端在成功获得这两个包之后，发送一个 ACK</li>\n<li>发件端发送 C 包。然而，Nagle 却阻止它发送 D 包（包长度太小，等待 C 的ACK）</li>\n<li>在接收端，延迟 ACK 使他无法发送 ACK（每隔 2 个包或每隔 200 毫秒发送一次）</li>\n<li>在 200ms 之后，接收器发送 C 包的 ACK</li>\n<li>发送端收到 ACK 并发送 D 包</li>\n</ul>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/b6e17719eb44c61d243ba5ca82c37480.png\"></p>\n<p>在这个数据交换过程中，由于 Nagel 和延迟 ACK 之间的死锁，引入了 200ms 的延迟。</p>\n<p>Nagle 算法是当时真正的救世主，而且目前仍然具有<a href=\"https://news.ycombinator.com/item?id=9048947\" rel=\"nofollow\">极大的价值</a>。但在大多数情况下，我们不会在我们的网站上使用它，因此可以通过添加 TCP_NODELAY 标志来安全地关闭它。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd367347667164\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntcp_nodelay on;     # sets TCP_NODELAY flag, used on keep-alive connections</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd367347667164-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd367347667164-1\"><span class=\"crayon-v\">tcp</span><span class=\"crayon-sy\">_</span>nodelay <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>     <span class=\"crayon-p\"># sets TCP_NODELAY flag, used on keep-alive connections</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>享受这200ms提速吧！</p>\n<p>更多的细节，推荐阅读其他<a href=\"http://ccr.sigcomm.org/archive/2001/jan01/ccr-200101-mogul.pdf\" target=\"_blank\" rel=\"nofollow\">优秀的文章</a>。</p>\n<h3></h3>\n<h3><code>sendfile</code></h3>\n<p>正常来说，当要发送一个文件时需要下面的步骤：</p>\n<ul>\n<li>malloc(3) – 分配一个本地缓冲区，储存对象数据。</li>\n<li>read(2) – 检索和复制对象到本地缓冲区。</li>\n<li>write(2) – 从本地缓冲区复制对象到 socket 缓冲区。</li>\n</ul>\n<p>这涉及到两个上下文切换（读，写），并使相同对象的第二个副本成为不必要的。正如你所看到的，这不是最佳的方式。值得庆幸的是还有另一个系统调用，提升了发送文件（的效率），它被称为：<code>sendfile(2)</code>（想不到吧！居然是这名字）。这个调用在文件 cache 中检索一个对象，并传递指针（不需要复制整个对象），直接传递到 socket 描述符，Netflix 表示，使用 sendfile(2) 将网络吞吐量<a href=\"https://people.freebsd.org/~rrs/asiabsd_2015_tls.pdf\" target=\"_blank\" rel=\"nofollow\">从 6Gbps 提高到了 30Gbps</a>。</p>\n<p>然而，sendfile(2) 有一些注意事项：</p>\n<ul>\n<li>不可用于 UNIX sockets（例如：当通过你的上游服务器发送静态文件时）</li>\n<li>能否执行不同的操作，取决于操作系统（<a href=\"https://blog.phusion.nl/2015/06/04/the-brokenness-of-the-sendfile-system-call/\" target=\"_blank\" rel=\"nofollow\">这里查看更多</a>）</li>\n</ul>\n<p>在 nginx 中打开它</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd36b244299461\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsendfile on;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd36b244299461-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd36b244299461-1\"><span class=\"crayon-i\">sendfile</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<h3><code>tcp_nopush</code></h3>\n<p>tcp_nopush 与 tcp_nodelay 相反。不是为了尽可能快地推送数据包，它的目标是一次性优化数据的发送量。</p>\n<p>在发送给客户端之前，它将强制等待包达到最大长度(MSS)。而且这个指令只有在 sendfile 开启时才起作用。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd36f967994884\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsendfile on;\r\ntcp_nopush on;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd36f967994884-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd36f967994884-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd36f967994884-1\"><span class=\"crayon-i\">sendfile</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd36f967994884-2\"><span class=\"crayon-v\">tcp</span><span class=\"crayon-sy\">_</span>nopush <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>看起来 tcp_nopush 和 tcp_nodelay 是互斥的。但是，如果所有 3 个指令都开启了，nginx 会：</p>\n<ul>\n<li>确保数据包在发送给客户之前是已满的</li>\n<li>对于最后一个数据包，tcp_nopush 将被删除 —— 允许 TCP 立即发送，没有 200ms 的延迟</li>\n</ul>\n<h2>我应该使用多少进程？</h2>\n<h3>工作进程</h3>\n<p>worker_process 指令会指定：应该运行多少个 worker。默认情况下，此值设置为 1。最安全的设置是通过传递 auto 选项来使用核心数量。</p>\n<p>但由于 Nginx 的架构，其处理请求的速度非常快 – 我们可能一次不会使用超过 2-4 个进程（除非你正在托管 Facebook 或在 nginx 内部执行一些 CPU 密集型的任务）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd372876737141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_process auto;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd372876737141-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd372876737141-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>process <span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3>worker 连接</h3>\n<p>与 worker_process 直接绑定的指令是 worker_connections。它指定一个工作进程可以一次打开多少个连接。这个数目包括所有连接（例如与代理服务器的连接），而不仅仅是与客户端的连接。此外，值得记住的是，一个客户端可以打开多个连接，同时获取其他资源。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd376271792727\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_connections 1024;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd376271792727-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd376271792727-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>connections <span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h3>打开文件数目限制</h3>\n<p>在基于 Unix 系统中的“一切都是文件”。这意味着文档、目录、管道甚至套接字都是文件。系统对一个进程可以打开多少文件有一个限制。要查看该限制：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd379802319593\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nulimit -Sn      # soft limit\r\nulimit -Hn      # hard limit</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd379802319593-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd379802319593-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd379802319593-1\"><span class=\"crayon-i\">ulimit</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">Sn</span>      <span class=\"crayon-p\"># soft limit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd379802319593-2\"><span class=\"crayon-i\">ulimit</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">Hn</span>      <span class=\"crayon-p\"># hard limit</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这个系统限制必须根据 worker_connections 进行调整。任何传入的连接都会打开至少一个文件（通常是两个连接套接字以及后端连接套接字或磁盘上的静态文件）。所以这个值等于 worker_connections*2 是安全的。幸运的是，Nginx 提供了一个配置选项来增加这个系统的值。要使用这个配置，请添加具有适当数目的 worker_rlimit_nofile 指令并重新加载 nginx。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd37d549952486\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_rlimit_nofile 2048;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd37d549952486-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd37d549952486-1\"><span class=\"crayon-v\">worker_rlimit</span><span class=\"crayon-sy\">_</span>nofile <span class=\"crayon-cn\">2048</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3>配置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd380906269993\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nworker_process auto;\r\nworker_rlimit_nofile 2048; # Changes the limit on the maximum number of open files (RLIMIT_NOFILE) for worker processes.\r\nworker_connections 1024;   # Sets the maximum number of simultaneous connections that can be opened by a worker process.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd380906269993-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd380906269993-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd380906269993-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd380906269993-1\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>process <span class=\"crayon-v\">auto</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd380906269993-2\"><span class=\"crayon-v\">worker_rlimit</span><span class=\"crayon-sy\">_</span>nofile <span class=\"crayon-cn\">2048</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># Changes the limit on the maximum number of open files (RLIMIT_NOFILE) for worker processes.</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd380906269993-3\"><span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>connections <span class=\"crayon-cn\">1024</span><span class=\"crayon-sy\">;</span>   <span class=\"crayon-p\"># Sets the maximum number of simultaneous connections that can be opened by a worker process.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3>最大连接数</h3>\n<p>如上所述，我们可以计算一次可以处理多少个并发连接：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd383188838083\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n最大连接数 = \r\n\r\n    worker_processes * worker_connections\r\n----------------------------------------------\r\n (keep_alive_timeout + avg_response_time) * 2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd383188838083-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd383188838083-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd383188838083-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd383188838083-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd383188838083-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd383188838083-1\">最大连接数 <span class=\"crayon-o\">=</span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd383188838083-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a763197dd383188838083-3\">    <span class=\"crayon-v\">worker</span><span class=\"crayon-sy\">_</span>processes <span class=\"crayon-o\">*</span> <span class=\"crayon-v\">worker_connections</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd383188838083-4\"><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd383188838083-5\"> <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">keep_alive</span><span class=\"crayon-sy\">_</span>timeout <span class=\"crayon-o\">+</span> <span class=\"crayon-v\">avg_response_time</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">*</span> <span class=\"crayon-cn\">2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>keep_alive_timeout (后续有更多介绍) + avg_response_time 告诉我们：单个连接持续了多久。我们也除以 2，通常情况下，你将有一个客户端打开 2 个连接的情况：一个在 nginx 和客户端之间，另一个在 nginx 和上游服务器之间。</p>\n<h2>Gzip</h2>\n<p>启用 gzip 可以显著降低响应的（报文）大小，因此，客户端（网页）会显得更快些。</p>\n<h3>压缩级别</h3>\n<p>Gzip 有不同的压缩级别，1 到 9 级。递增这个级别将会减少文件的大小，但也会增加资源消耗。作为标准我们将这个数字（级别）保持在 3 – 5 级，就像上面说的那样，它将会得到较小的节省，同时也会得到更大的 CPU 使用率。</p>\n<p>这有个通过 gzip 的不同的压缩级别压缩文件的例子，0 代表未压缩文件。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd387535703473\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncurl -I -H 'Accept-Encoding: gzip,deflate' https://netguru.co/</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd387535703473-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd387535703473-1\"><span class=\"crayon-i\">curl</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">I</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">H</span> <span class=\"crayon-s\">'Accept-Encoding: gzip,deflate'</span> <span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//netguru.co/</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd38a936649672\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n❯ du -sh ./*\r\n 64K    ./0_gzip\r\n 16K    ./1_gzip\r\n 12K    ./2_gzip\r\n 12K    ./3_gzip\r\n 12K    ./4_gzip\r\n 12K    ./5_gzip\r\n 12K    ./6_gzip\r\n 12K    ./7_gzip\r\n 12K    ./8_gzip\r\n 12K    ./9_gzip</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38a936649672-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38a936649672-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38a936649672-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38a936649672-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38a936649672-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38a936649672-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38a936649672-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38a936649672-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38a936649672-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38a936649672-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38a936649672-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd38a936649672-1\">❯ <span class=\"crayon-i\">du</span> <span class=\"crayon-o\">-</span><span class=\"crayon-i\">sh</span> <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">*</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38a936649672-2\"> <span class=\"crayon-cn\">64K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38a936649672-3\"> <span class=\"crayon-cn\">16K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38a936649672-4\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38a936649672-5\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38a936649672-6\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">4_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38a936649672-7\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">5_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38a936649672-8\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">6_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38a936649672-9\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">7_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38a936649672-10\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">8_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38a936649672-11\"> <span class=\"crayon-cn\">12K</span>    <span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">9_gzip</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd38d939998988\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n❯ ls -al\r\n-rw-r--r--   1 matDobek  staff  61711  3 Nov 08:46 0_gzip\r\n-rw-r--r--   1 matDobek  staff  12331  3 Nov 08:48 1_gzip\r\n-rw-r--r--   1 matDobek  staff  12123  3 Nov 08:48 2_gzip\r\n-rw-r--r--   1 matDobek  staff  12003  3 Nov 08:48 3_gzip\r\n-rw-r--r--   1 matDobek  staff  11264  3 Nov 08:49 4_gzip\r\n-rw-r--r--   1 matDobek  staff  11111  3 Nov 08:50 5_gzip\r\n-rw-r--r--   1 matDobek  staff  11097  3 Nov 08:50 6_gzip\r\n-rw-r--r--   1 matDobek  staff  11080  3 Nov 08:50 7_gzip\r\n-rw-r--r--   1 matDobek  staff  11071  3 Nov 08:51 8_gzip\r\n-rw-r--r--   1 matDobek  staff  11005  3 Nov 08:51 9_gzip</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38d939998988-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38d939998988-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38d939998988-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38d939998988-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38d939998988-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38d939998988-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38d939998988-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38d939998988-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38d939998988-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd38d939998988-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd38d939998988-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd38d939998988-1\">❯ <span class=\"crayon-i\">ls</span> <span class=\"crayon-o\">-</span><span class=\"crayon-v\">al</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38d939998988-2\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">61711</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">46</span> <span class=\"crayon-cn\">0_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38d939998988-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">12331</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span> <span class=\"crayon-cn\">1_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38d939998988-4\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">12123</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span> <span class=\"crayon-cn\">2_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38d939998988-5\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">12003</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span> <span class=\"crayon-cn\">3_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38d939998988-6\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11264</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">49</span> <span class=\"crayon-cn\">4_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38d939998988-7\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11111</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span> <span class=\"crayon-cn\">5_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38d939998988-8\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11097</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span> <span class=\"crayon-cn\">6_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38d939998988-9\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11080</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span> <span class=\"crayon-cn\">7_gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd38d939998988-10\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11071</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">51</span> <span class=\"crayon-cn\">8_gzip</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd38d939998988-11\"><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span>   <span class=\"crayon-cn\">1</span> <span class=\"crayon-i\">matDobek</span>  <span class=\"crayon-i\">staff</span>  <span class=\"crayon-cn\">11005</span>  <span class=\"crayon-cn\">3</span> <span class=\"crayon-i\">Nov</span> <span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">51</span> <span class=\"crayon-cn\">9_gzip</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0045 seconds] -->\r\n<p></p>\n<h3><code>gzip_http_version 1.1;</code></h3>\n<p>这条指令告诉 nginx 仅在 HTTP 1.1 以上的版本才能使用 gzip。我们在这里不涉及 HTTP 1.0，至于 HTTP 1.0 版本，它是不可能既使用 keep-alive 和 gzip 的。因此你必须做出决定：使用 HTTP 1.0 的客户端要么错过 gzip，要么错过 keep-alive。</p>\n<h3>配置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd391049735821\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngzip on;               # enable gzip\r\ngzip_http_version 1.1; # turn on gzip for http 1.1 and above\r\ngzip_disable \"msie6\";  # IE 6 had issues with gzip\r\ngzip_comp_level 5;     # inc compresion level, and CPU usage\r\ngzip_min_length 100;   # minimal weight to gzip file\r\ngzip_proxied any;      # enable gzip for proxied requests (e.g. CDN)\r\ngzip_buffers 16 8k;    # compression buffers (if we exceed this value, disk will be used instead of RAM)\r\ngzip_vary on;          # add header Vary Accept-Encoding (more on that in Caching section)\r\n\r\n# define files which should be compressed\r\ngzip_types text/plain;\r\ngzip_types text/css;\r\ngzip_types application/javascript;\r\ngzip_types application/json;\r\ngzip_types application/vnd.ms-fontobject;\r\ngzip_types application/x-font-ttf;\r\ngzip_types font/opentype;\r\ngzip_types image/svg+xml;\r\ngzip_types image/x-icon;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd391049735821-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd391049735821-19\">19</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-1\"><span class=\"crayon-i\">gzip</span> <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>               <span class=\"crayon-p\"># enable gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-2\"><span class=\"crayon-v\">gzip_http</span><span class=\"crayon-sy\">_</span>version <span class=\"crayon-cn\">1.1</span><span class=\"crayon-sy\">;</span> <span class=\"crayon-p\"># turn on gzip for http 1.1 and above</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-3\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>disable <span class=\"crayon-s\">\"msie6\"</span><span class=\"crayon-sy\">;</span>  <span class=\"crayon-p\"># IE 6 had issues with gzip</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-4\"><span class=\"crayon-v\">gzip_comp</span><span class=\"crayon-sy\">_</span>level <span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span>     <span class=\"crayon-p\"># inc compresion level, and CPU usage</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-5\"><span class=\"crayon-v\">gzip_min</span><span class=\"crayon-sy\">_</span>length <span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span>   <span class=\"crayon-p\"># minimal weight to gzip file</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-6\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>proxied <span class=\"crayon-v\">any</span><span class=\"crayon-sy\">;</span>      <span class=\"crayon-p\"># enable gzip for proxied requests (e.g. CDN)</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-7\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>buffers <span class=\"crayon-cn\">16</span> <span class=\"crayon-cn\">8k</span><span class=\"crayon-sy\">;</span>    <span class=\"crayon-p\"># compression buffers (if we exceed this value, disk will be used instead of RAM)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-8\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>vary <span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span>          <span class=\"crayon-p\"># add header Vary Accept-Encoding (more on that in Caching section)</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-9\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-10\"><span class=\"crayon-p\"># define files which should be compressed</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-11\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">plain</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-12\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-13\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">javascript</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-14\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">json</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-15\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">vnd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ms</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">fontobject</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-16\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">application</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">font</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ttf</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-17\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">font</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opentype</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd391049735821-18\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">image</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">svg</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">xml</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd391049735821-19\"><span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">_</span>types <span class=\"crayon-v\">image</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">icon</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p></p>\n<h1>缓存</h1>\n<p>缓存是另一回事，它能提升用户的请求速度。</p>\n<p>管理缓存可以仅由 2 个 header 控制：</p>\n<ul>\n<li>在 HTTP/1.1 中用 <code>Cache-Control</code> 管理缓存</li>\n<li>Pragma 对于 HTTP/1.0 客户端的向后兼容性</li>\n</ul>\n<p>缓存本身可以分为两类：公共缓存和私有缓存。公共缓存是被多个用户共同使用的。专用缓存专用于单个用户。我们可以很容易地区分，应该使用哪种缓存：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd395170028073\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nadd_header Cache-Control public;\r\nadd_header Pragma public;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd395170028073-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd395170028073-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd395170028073-1\"><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Control</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd395170028073-2\"><span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Pragma</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>对于标准资源，我们想保存1个月：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd398130309106\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocation ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\r\n  expires 1M;\r\n  add_header Cache-Control public;\r\n  add_header Pragma public;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd398130309106-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd398130309106-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd398130309106-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd398130309106-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd398130309106-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd398130309106-1\"><span class=\"crayon-i\">location</span> <span class=\"crayon-o\">~</span><span class=\"crayon-o\">*</span> <span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jpg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">jpeg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">png</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">gif</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">ico</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">css</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">js</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd398130309106-2\">  <span class=\"crayon-i\">expires</span> <span class=\"crayon-cn\">1M</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd398130309106-3\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Control</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd398130309106-4\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Pragma</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd398130309106-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>上面的配置似乎足够了。然而，使用公共缓存时有一个注意事项。</p>\n<p>让我们看看如果将我们的资源存储在公共缓存（如 CDN）中，URI 将是唯一的标识符。在这种情况下，我们认为 gzip 是开启的。</p>\n<p>有2个浏览器：</p>\n<ul>\n<li>旧的，不支持 gzip</li>\n<li>新的，支持 gzip</li>\n</ul>\n<p>旧的浏览器给 CDN 发送了一个 netguru.co/style 请求。但是 CDN 也没有这个资源，它将会给我们的服务器发送请求，并且返回未经压缩的响应。CDN 在哈希里存储文件（为以后使用）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd39c175649167\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  ...\r\n  netguru.co/styles.css =&gt; FILE(\"/sites/netguru/style.css\")\r\n  ...\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39c175649167-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd39c175649167-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39c175649167-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd39c175649167-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39c175649167-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd39c175649167-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd39c175649167-2\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd39c175649167-3\">  <span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">styles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">css</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-e\">FILE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/sites/netguru/style.css\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd39c175649167-4\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd39c175649167-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>然后将其返回给客户端。</p>\n<p>现在，新的浏览器发送相同的请求到 CDN，请求 netguru.co/style.css，获取 gzip 打包的资源。由于 CDN 仅通过 URI 标识资源，它将为新浏览器返回一样的未压缩资源。新的浏览器将尝试提取未打包的文件，但是将获得无用的东西。</p>\n<p>如果我们能够告诉公共缓存是怎样进行 URI 和编码的资源识别，我们就可以避免这个问题。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd39f373876075\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{\r\n  ...\r\n  (netguru.co/styles.css, gzip) =&gt; FILE(\"/sites/netguru/style.css.gzip\")\r\n  (netguru.co/styles.css, text/css) =&gt; FILE(\"/sites/netguru/style.css\")\r\n  ...\r\n}\r\n``</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39f373876075-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd39f373876075-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39f373876075-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd39f373876075-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39f373876075-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd39f373876075-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd39f373876075-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd39f373876075-1\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd39f373876075-2\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd39f373876075-3\">  <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">styles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">gzip</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-e\">FILE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/sites/netguru/style.css.gzip\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd39f373876075-4\">  <span class=\"crayon-sy\">(</span><span class=\"crayon-v\">netguru</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">co</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">styles</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">,</span> <span class=\"crayon-v\">text</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">css</span><span class=\"crayon-sy\">)</span> <span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span> <span class=\"crayon-e\">FILE</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"/sites/netguru/style.css\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd39f373876075-5\">  <span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd39f373876075-6\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd39f373876075-7\"><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">`</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这正是 Vary Accept-Encoding: 完成的。它告诉公共缓存，可以通过 URI 和 Accept-Encoding header 区分资源。</p>\n<p>所以我们的最终配置如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd3a3827923976\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nlocation ~* \\.(jpg|jpeg|png|gif|ico|css|js)$ {\r\n  expires 1M;\r\n  add_header Cache-Control public;\r\n  add_header Pragma public;\r\n  add_header Vary Accept-Encoding;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3a3827923976-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3a3827923976-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3a3827923976-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3a3827923976-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3a3827923976-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3a3827923976-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd3a3827923976-1\"><span class=\"crayon-i\">location</span> <span class=\"crayon-o\">~</span><span class=\"crayon-o\">*</span> <span class=\"crayon-sy\">\\</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">jpg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">jpeg</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">png</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">gif</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">ico</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">css</span><span class=\"crayon-o\">|</span><span class=\"crayon-v\">js</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">$</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3a3827923976-2\">  <span class=\"crayon-i\">expires</span> <span class=\"crayon-cn\">1M</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3a3827923976-3\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-v\">Cache</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">Control</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3a3827923976-4\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Pragma</span> <span class=\"crayon-m\">public</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3a3827923976-5\">  <span class=\"crayon-v\">add</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Vary</span> <span class=\"crayon-v\">Accept</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">Encoding</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3a3827923976-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<h2>超时</h2>\n<p>client_body_timeout 和 client_header_timeout 定义了 nginx 在抛出 408（请求超时）错误之前应该等待客户端传输主体或头信息的时间。</p>\n<p>send_timeout 设置向客户端发送响应的超时时间。超时仅在两次连续的写入操作之间被设置，而不是用于整个响应的传输过程。如果客户端在给定时间内没有收到任何内容，则连接将被关闭。</p>\n<p>设置这些值时要小心，因为等待时间过长会使你容易受到攻击者的攻击，并且等待时间太短的话会切断与速度较慢的客户端的连接。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd3a6580847773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# Configure timeouts\r\nclient_body_timeout   12;\r\nclient_header_timeout 12;\r\nsend_timeout          10;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3a6580847773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3a6580847773-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3a6580847773-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3a6580847773-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd3a6580847773-1\"><span class=\"crayon-p\"># Configure timeouts</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3a6580847773-2\"><span class=\"crayon-v\">client_body</span><span class=\"crayon-sy\">_</span>timeout   <span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3a6580847773-3\"><span class=\"crayon-v\">client_header</span><span class=\"crayon-sy\">_</span>timeout <span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3a6580847773-4\"><span class=\"crayon-v\">send</span><span class=\"crayon-sy\">_</span>timeout          <span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h2>Buffers</h2>\n<h3><code>client_body_buffer_size</code></h3>\n<p>设置读取客户端请求正文的缓冲区大小。如果请求主体大于缓冲区，则整个主体或仅其部分被写入临时文件。对 client_body_buffer_size 而言，设置 16k 大小在大多数情况下是足够的。</p>\n<p>这是又一个可以产生巨大影响的设置，必须谨慎使用。太小了，则 nginx 会不断地使用 I/O 把剩余的部分写入文件。太大了，则当攻击者可以打开所有连接但你无法在系统上分配足够缓冲来处理这些连接时，你可能容易受到 DOS 攻击。</p>\n<h3></h3>\n<h3><code>client_header_buffer_size</code> 和 <code>large_client_header_buffers</code></h3>\n<p>如果 header 不能跟 client_header_buffer_size 匹配上，就会使用 large_client_header_buffers。如果请求也不适合 large_client_header_buffers，将给客户端返回一个错误提示。对于大多数的请求来说，1KB 的缓存是足够的。但是，如果一个包含大量记录的请求，1KB 是不够的。</p>\n<p>如果请求行的长度超限，将给客户端返回一个 414（请求的 URI 太长）错误提示。如果请求的 header 长度超限，将抛出一个 400（错误请求）的错误代码</p>\n<h3><code>client_max_body_size</code></h3>\n<p>设置客户端请求主体的最大允许范围，在请求头字段中指定“内容长度”。如果您希望允许用户上传文件，调整此配置以满足您的需要。</p>\n<h3>配置</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd3aa611630984\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclient_body_buffer_size       16K;\r\nclient_header_buffer_size     1k;\r\nlarge_client_header_buffers   2 1k;\r\nclient_max_body_size          8m;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3aa611630984-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3aa611630984-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3aa611630984-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3aa611630984-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd3aa611630984-1\"><span class=\"crayon-v\">client_body_buffer</span><span class=\"crayon-sy\">_</span>size       <span class=\"crayon-cn\">16K</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3aa611630984-2\"><span class=\"crayon-v\">client_header_buffer</span><span class=\"crayon-sy\">_</span>size     <span class=\"crayon-cn\">1k</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3aa611630984-3\"><span class=\"crayon-v\">large_client_header</span><span class=\"crayon-sy\">_</span>buffers   <span class=\"crayon-cn\">2</span> <span class=\"crayon-cn\">1k</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3aa611630984-4\"><span class=\"crayon-v\">client_max_body</span><span class=\"crayon-sy\">_</span>size          <span class=\"crayon-cn\">8m</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h2>Keep-Alive</h2>\n<p>HTTP 所依赖的 TCP 协议需要执行三次握手来启动连接。这意味着在服务器可发送数据（例如图像）之前，需要在客户机和服务器之间进行三次完整的往返。</p>\n<p>假设你从 Warsaw 请求的 /image.jpg，并连接到在柏林最近的服务器：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd3ae904290220\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nOpen connection\r\n\r\nTCP Handshake:\r\nWarsaw  -&gt;------------------ synchronize packet (SYN) -----------------&gt;- Berlin\r\nWarsaw  -&lt;--------- synchronise-acknowledgement packet (SYN-ACK) ------&lt;- Berlin\r\nWarsaw  -&gt;------------------- acknowledgement (ACK) -------------------&gt;- Berlin\r\n\r\nData transfer:\r\nWarsaw  -&gt;---------------------- /image.jpg ---------------------------&gt;- Berlin\r\nWarsaw  -&lt;--------------------- (image data) --------------------------&lt;- Berlin\r\n\r\nClose connection</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3ae904290220-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3ae904290220-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3ae904290220-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3ae904290220-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3ae904290220-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3ae904290220-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3ae904290220-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3ae904290220-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3ae904290220-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3ae904290220-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3ae904290220-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3ae904290220-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd3ae904290220-1\"><span class=\"crayon-e\">Open </span><span class=\"crayon-e\">connection</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3ae904290220-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a763197dd3ae904290220-3\"><span class=\"crayon-e\">TCP </span><span class=\"crayon-v\">Handshake</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3ae904290220-4\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">synchronize </span><span class=\"crayon-e\">packet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYN</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3ae904290220-5\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">synchronise</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">acknowledgement </span><span class=\"crayon-e\">packet</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYN</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3ae904290220-6\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">acknowledgement</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ACK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3ae904290220-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3ae904290220-8\"><span class=\"crayon-e\">Data </span><span class=\"crayon-v\">transfer</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3ae904290220-9\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">image</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">jpg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3ae904290220-10\"><span class=\"crayon-v\">Warsaw</span><span class=\"crayon-h\">  </span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">image </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Berlin</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3ae904290220-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3ae904290220-12\"><span class=\"crayon-e\">Close </span><span class=\"crayon-v\">connection</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p>对于另一次请求，你将不得不再次执行整个初始化。如果你在短时间内发送多次请求，这可能会快速累积起来。这样的话 keep-alive 使用起来就方便了。在成功响应之后，它保持连接空闲给定的时间段（例如 10 秒）。如果在这段时间内有另一个请求，现有的连接将被重用，空闲时间将被刷新。</p>\n<p>Nginx 提供了几个指令来调整 keepalive 设置。这些可以分为两类：</p>\n<ul>\n<li>在客户端和 nginx 之间 keep-alive</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd3b1645636117\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nkeepalive_disable msie6;        # disable selected browsers.\r\n\r\n# The number of requests a client can make over a single keepalive connection. The default is 100, but a much higher value can be especially useful for testing with a load‑generation tool, which generally sends a large number of requests from a single client.\r\nkeepalive_requests 100000;\r\n\r\n# How long an idle keepalive connection remains open.\r\nkeepalive_timeout 60;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b1645636117-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b1645636117-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b1645636117-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b1645636117-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b1645636117-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b1645636117-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b1645636117-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd3b1645636117-1\"><span class=\"crayon-v\">keepalive</span><span class=\"crayon-sy\">_</span>disable <span class=\"crayon-v\">msie6</span><span class=\"crayon-sy\">;</span>        <span class=\"crayon-p\"># disable selected browsers.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b1645636117-2\"> </div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b1645636117-3\"><span class=\"crayon-p\"># The number of requests a client can make over a single keepalive connection. The default is 100, but a much higher value can be especially useful for testing with a load‑generation tool, which generally sends a large number of requests from a single client.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b1645636117-4\"><span class=\"crayon-v\">keepalive</span><span class=\"crayon-sy\">_</span>requests <span class=\"crayon-cn\">100000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b1645636117-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b1645636117-6\"><span class=\"crayon-p\"># How long an idle keepalive connection remains open.</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b1645636117-7\"><span class=\"crayon-v\">keepalive</span><span class=\"crayon-sy\">_</span>timeout <span class=\"crayon-cn\">60</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<ul>\n<li>在 nginx 和上游服务器之间 keep-alive</li>\n</ul>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a763197dd3b5613543051\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nupstream backend {\r\n    # The number of idle keepalive connections to an upstream server that remain open for each worker process\r\n    keepalive 16;\r\n}\r\n\r\nserver {\r\n  location /http/ {\r\n    proxy_pass http://http_backend;\r\n    proxy_http_version 1.1;\r\n    proxy_set_header Connection \"\";\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b5613543051-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b5613543051-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b5613543051-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b5613543051-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b5613543051-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b5613543051-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b5613543051-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b5613543051-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b5613543051-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b5613543051-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a763197dd3b5613543051-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a763197dd3b5613543051-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a763197dd3b5613543051-1\"><span class=\"crayon-e\">upstream</span> <span class=\"crayon-e\">backend</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b5613543051-2\">    <span class=\"crayon-p\"># The number of idle keepalive connections to an upstream server that remain open for each worker process</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b5613543051-3\">    <span class=\"crayon-i\">keepalive</span> <span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b5613543051-4\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b5613543051-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b5613543051-6\"><span class=\"crayon-e\">server</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b5613543051-7\">  <span class=\"crayon-e\">location</span> <span class=\"crayon-o\">/</span><span class=\"crayon-e\">http</span><span class=\"crayon-o\">/</span> <span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b5613543051-8\">    <span class=\"crayon-v\">proxy</span><span class=\"crayon-sy\">_</span>pass <span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//http_backend;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b5613543051-9\">    <span class=\"crayon-v\">proxy_http</span><span class=\"crayon-sy\">_</span>version <span class=\"crayon-cn\">1.1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b5613543051-10\">    <span class=\"crayon-v\">proxy_set</span><span class=\"crayon-sy\">_</span>header <span class=\"crayon-i\">Connection</span> <span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a763197dd3b5613543051-11\">  <span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a763197dd3b5613543051-12\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>就这些了。</p>\n<h2>总结</h2>\n<p>感谢您的阅读。如果没有大量的资源，这个系列是不可能完成的。在这一系列的写作中，我们发现了一些特别有用的网站：</p>\n<ul>\n<li><a href=\"https://nginx.org/en/docs/\" target=\"_blank\" rel=\"nofollow\">nginx 文档</a></li>\n<li><a href=\"https://www.nginx.com/blog/\" target=\"_blank\" rel=\"nofollow\">nginx 博客</a></li>\n<li><a href=\"https://www.udemy.com/nginx-fundamentals/\" target=\"_blank\" rel=\"nofollow\">udemy（在线教育网站 ）的 nginx 原理</a></li>\n<li><a href=\"https://www.igvita.com/\" target=\"_blank\" rel=\"nofollow\">Ilya Grigorik 的博客</a>，和他的令人惊奇的书：<a href=\"https://hpbn.co/\" target=\"_blank\" rel=\"nofollow\">《高性能浏览器网络》</a></li>\n<li><a href=\"https://blog.martinfjordvald.com/\" target=\"_blank\" rel=\"nofollow\">Martin Fjordvald 的博客</a></li>\n</ul>\n<p>我们会很感激你的反馈和评价，请随意讨论。你喜欢这系列吗？你有什么关于下一步应该解决什么问题的建议吗？或你发现了一个错误？告诉我们，下期再见。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113572\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113572votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113572\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/2d4fd40c8eaec8319c1de2f154b3275aecd23f9d.jpg"},{"url_object_id": "a3f533d7b49ee0a7c22388e386648f4f", "title": "为初学者准备的 MariaDB 管理命令", "url": "http://blog.jobbole.com/113617/", "create_date": "2018/02/03", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/04/d4136217171de6597b19a097f0127e0c.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,MariaDB,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://linuxtechlab.com/mariadb-administration-commands-beginners/\">Shusain</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9306-1.html\">Linux中国/DarkSun</a>   </div><p>之前我们学过了<a href=\"http://linuxtechlab.com/installing-configuring-mariadb-rhelcentos/\">在 Centos/RHEL 7 上安装 MariaDB 服务器并保证其安全</a>，使之成为了 RHEL/CentOS 7 的默认数据库。现在我们再来看看一些有用的 MariaDB 管理命令。这些都是使用 MariaDB 最基础的命令，而且它们对 MySQL 也同样适合，因为 MariaDB 就是 MySQL 的一个分支而已。</p>\n<p>（推荐阅读：<a href=\"http://linuxtechlab.com/mongodb-installation-configuration-rhelcentos/\">在 RHEL/CentOS 上安装并配置 MongoDB</a>）</p>\n<h3 id=\"toc_1\">MariaDB 管理命令</h3>\n<h4 id=\"toc_2\">1、查看 MariaDB 安装的版本</h4>\n<p>要查看所安装数据库的当前版本，在终端中输入下面命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3c5259309487\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysql -version\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3c5259309487-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3c5259309487-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3c5259309487-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">version</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3c5259309487-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>该命令会告诉你数据库的当前版本。此外你也可以运行下面命令来查看版本的详细信息：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3ce340351535\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqladmin -u root -p version\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3ce340351535-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3ce340351535-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3ce340351535-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqladmin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3ce340351535-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_3\">2、登录 MariaDB</h4>\n<p>要登录 MariaDB 服务器，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3d2037537073\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysql -u root -p\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3d2037537073-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3d2037537073-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3d2037537073-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3d2037537073-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>然后输入密码登录。</p>\n<h4 id=\"toc_4\">3、列出所有的数据库</h4>\n<p>要列出 MariaDB 当前拥有的所有数据库，在你登录到 MariaDB 中后运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3d5700798747\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; show databases;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3d5700798747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3d5700798747-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3d5700798747-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-v\">databases</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3d5700798747-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>（LCTT 译注：<code>$</code> 这里代表 shell 的提示符，<code>&gt;</code> 这里代表 MariaDB shell 的提示符。）</p>\n<h4 id=\"toc_5\">4、创建新数据库</h4>\n<p>在 MariaDB 中创建新数据库，登录 MariaDB 后运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3d9877608284\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; create database dan;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3d9877608284-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3d9877608284-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3d9877608284-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">create </span><span class=\"crayon-e\">database </span><span class=\"crayon-v\">dan</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3d9877608284-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>若想直接在终端创建数据库，则运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3dc723116732\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqladmin -u user -p create dan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3dc723116732-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3dc723116732-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3dc723116732-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqladmin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">create </span><span class=\"crayon-i\">dan</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3dc723116732-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这里，<code>dan</code> 就是新数据库的名称。</p>\n<h4 id=\"toc_6\">5、删除数据库</h4>\n<p>要删除数据库，在已登录的 MariaDB 会话中运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3df725445023\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; drop database dan;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3df725445023-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3df725445023-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3df725445023-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">drop </span><span class=\"crayon-e\">database </span><span class=\"crayon-v\">dan</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3df725445023-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>此外你也可以运行，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3e2275781913\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqladmin -u root -p drop dan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3e2275781913-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3e2275781913-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3e2275781913-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqladmin</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">drop </span><span class=\"crayon-i\">dan</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3e2275781913-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><strong>注意：</strong> 若在运行 <code>mysqladmin</code> 命令时提示 “access denied” 错误，这应该是由于我们没有给 root 授权。要对 root 授权，请参照第 7 点方法，只是要将用户改成 root。</p>\n<h4 id=\"toc_7\">6、创建新用户</h4>\n<p>为数据库创建新用户，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3e6409794533\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; CREATE USER 'dan'@'localhost' IDENTIFIED BY 'password';\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3e6409794533-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3e6409794533-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3e6409794533-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">USER</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'dan'</span><span class=\"crayon-sy\">@</span><span class=\"crayon-s\">'localhost'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IDENTIFIED </span><span class=\"crayon-i\">BY</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'password'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3e6409794533-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_8\">7、授权用户访问某个数据库</h4>\n<p>授权用户访问某个数据库，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3e9531873926\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; GRANT ALL PRIVILEGES ON test.* to 'dan'@'localhost';\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3e9531873926-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3e9531873926-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3e9531873926-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GRANT </span><span class=\"crayon-e\">ALL </span><span class=\"crayon-e\">PRIVILEGES </span><span class=\"crayon-e\">ON </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'dan'</span><span class=\"crayon-sy\">@</span><span class=\"crayon-s\">'localhost'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3e9531873926-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这会赋予用户 <code>dan</code> 对名为 <code>test</code> 的数据库完全操作的权限。我们也可以限定为用户只赋予 <code>SELECT</code>、<code>INSERT</code>、<code>DELETE</code> 权限。</p>\n<p>要赋予访问所有数据库的权限，将 <code>test</code> 替换成 <code>*</code> 。像这样：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3f1934523156\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; GRANT ALL PRIVILEGES ON *.* to 'dan'@'localhost';\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3f1934523156-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3f1934523156-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3f1934523156-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">GRANT </span><span class=\"crayon-e\">ALL </span><span class=\"crayon-e\">PRIVILEGES </span><span class=\"crayon-e \">ON *</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'dan'</span><span class=\"crayon-sy\">@</span><span class=\"crayon-s\">'localhost'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3f1934523156-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_9\">8、备份/导出数据库</h4>\n<p>要创建单个数据库的备份，在终端窗口中运行下列命令，</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3f5335900680\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqldump -u root -p database_name&gt;db_backup.sql\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3f5335900680-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3f5335900680-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3f5335900680-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqldump</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">database_name</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-v\">db_backup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sql</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3f5335900680-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>若要一次性创建多个数据库的备份则运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3f8536110152\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqldump -u root -p --databases db1 db2 &gt; db12_backup.sql\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3f8536110152-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3f8536110152-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3f8536110152-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqldump</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">databases </span><span class=\"crayon-e\">db1 </span><span class=\"crayon-v\">db2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db12_backup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sql</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3f8536110152-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>要一次性导出多个数据库，则运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3fb592158880\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqldump -u root -p --all-databases &gt; all_dbs.sql\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3fb592158880-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd3fb592158880-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3fb592158880-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqldump</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">all</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">databases</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">all_dbs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sql</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd3fb592158880-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h4 id=\"toc_10\">9、从备份中恢复数据库</h4>\n<p>要从备份中恢复数据库，运行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd3ff901569291\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysql -u root -p database_name &lt; db_backup.sql</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd3ff901569291-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd3ff901569291-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">database_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db_backup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sql</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>但这条命令成功的前提是预先没有存在同名的数据库。如果想要恢复数据库数据到已经存在的数据库中，则需要用到 <code>mysqlimport</code> 命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd402187533658\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysqlimport -u root -p database_name &lt; db_backup.sql</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd402187533658-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd402187533658-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysqlimport</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">database_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">db_backup</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sql</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h4 id=\"toc_11\">10、更改 MariaDB 用户的密码</h4>\n<p>本例中我们会修改 <code>root</code> 的密码，但修改其他用户的密码也是一样的过程。</p>\n<p>登录 MariaDB 并切换到 ‘mysql’ 数据库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd405360114734\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ mysql -u root -p\r\n&gt; use mysql;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd405360114734-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd405360114734-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd405360114734-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd405360114734-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd405360114734-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">use</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mysql</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf75bd405360114734-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>然后运行下面命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd408515503577\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; update user set password=PASSWORD('your_new_password_here') where User='root';\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd408515503577-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd408515503577-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd408515503577-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">update </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">set </span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">PASSWORD</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'your_new_password_here'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">User</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'root'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd408515503577-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>下一步，重新加载权限：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf75bd40b163029622\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt; flush privileges;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf75bd40b163029622-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf75bd40b163029622-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf75bd40b163029622-1\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">flush </span><span class=\"crayon-v\">privileges</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf75bd40b163029622-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>然后退出会话。</p>\n<p>我们的教程至此就结束了，在本教程中我们学习了一些有用的 MariaDB 管理命令。欢迎您的留言。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113617\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113617votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113617\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/0f6b8225c1f7c3b8073f7353da222745c3159c0d.jpg"},{"url_object_id": "52d97c6c8aa1a7c2bb78185a52c636de", "title": "堆和堆的应用：堆排序和优先队列", "url": "http://blog.jobbole.com/113552/", "create_date": "2018/01/28", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/10/a1a4de99de0c75eab712542a7dac876f.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,数据结构,算法", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://spground.github.io/2017/07/07/%E5%A0%86%E5%92%8C%E5%A0%86%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E5%A0%86%E6%8E%92%E5%BA%8F%E5%92%8C%E4%BC%98%E5%85%88%E9%98%9F%E5%88%97/\">Spground</a>   </div><h2 id=\"1-堆\">1.堆</h2>\n<p><a href=\"https://en.wikipedia.org/wiki/Heap_(data_structure\" target=\"_blank\" rel=\"noopener\">堆(Heap)</a>)是一种重要的数据结构，是实现<a href=\"https://en.wikipedia.org/wiki/Priority_queue\" target=\"_blank\" rel=\"noopener\">优先队列(Priority Queues)</a>首选的数据结构。由于堆有很多种变体，包括二项式堆、斐波那契堆等，但是这里只考虑最常见的就是二叉堆（以下简称堆）。</p>\n<p>堆是一棵满足一定性质的二叉树，具体的讲堆具有如下性质：<strong>父节点的键值总是不大于它的孩子节点的键值（小顶堆）</strong>, 堆可以分为<strong>小顶堆</strong>和<strong>大顶堆</strong>，这里以<strong>小顶堆</strong>为例，其主要包含的操作有：</p>\n<ul>\n<li>insert()</li>\n<li>extractMin</li>\n<li>peek(findMin)</li>\n<li>delete(i)</li>\n</ul>\n<p>由于堆是一棵形态规则的二叉树，因此堆的父节点和孩子节点存在如下关系：</p>\n<blockquote><p><strong>设父节点的编号为 <code>i</code>, 则其左孩子节点的编号为<code>2*i+1</code>, 右孩子节点的编号为<code>2*i+2</code></strong><br>\n<strong>设孩子节点的编号为<code>i</code>, 则其父节点的编号为<code>(i-1)/2</code></strong></p></blockquote>\n<p>由于二叉树良好的形态已经包含了父节点和孩子节点的关系信息，因此就可以不使用链表而简单的使用数组来存储堆。</p>\n<p>要实现堆的基本操作，涉及到的两个关键的函数</p>\n<ul>\n<li><code>siftUp(i, x)</code> ： 将位置<code>i</code>的元素<code>x</code>向上调整，以满足堆得性质，常常是用于<code>insert</code>后，用于调整堆；</li>\n<li><code>siftDown(i, x)</code>：同理，常常是用于<code>delete(i)</code>后，用于调整堆；</li>\n</ul>\n<p>具体的操作如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46928234825117\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprivate void siftUp(int i) {\r\n\tint key = nums[i];\r\n\tfor (; i &gt; 0;) {\r\n\t\tint p = (i - 1) &gt;&gt;&gt; 1;\r\n\t\tif (nums[p] &lt;= key)\r\n\t\t\tbreak;\r\n\t\tnums[i] = nums[p];\r\n\t\ti = p;\r\n\t}\r\n\tnums[i] = key;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46928234825117-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46928234825117-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46928234825117-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46928234825117-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46928234825117-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46928234825117-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46928234825117-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46928234825117-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46928234825117-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46928234825117-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46928234825117-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46928234825117-1\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">siftUp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46928234825117-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46928234825117-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46928234825117-4\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46928234825117-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46928234825117-6\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46928234825117-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46928234825117-8\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46928234825117-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46928234825117-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46928234825117-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0023 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46933184434816\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprivate void siftDown(int i) {\r\n\t\tint key = nums[i];\r\n\t\tfor (;i &lt; nums.length / 2;) {\r\n\t\t\tint child = (i &lt;&lt; 1) + 1;\r\n\t\t\tif (child + 1 &lt; nums.length &amp;&amp; nums[child] &gt; nums[child+1])\r\n\t\t\t\tchild++;\r\n\t\t\tif (key &lt;= nums[child])\r\n\t\t\t\tbreak;\r\n\t\t\tnums[i] = nums[child];\r\n\t\t\ti = child;\r\n\t\t}\r\n\t\tnums[i] = key;\r\n  }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46933184434816-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46933184434816-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46933184434816-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46933184434816-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46933184434816-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46933184434816-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46933184434816-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-1\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46933184434816-2\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-3\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46933184434816-4\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-5\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46933184434816-6\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-7\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46933184434816-8\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-9\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46933184434816-10\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46933184434816-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46933184434816-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>可以看到<code>siftUp</code>和<code>siftDown</code>不停的在父节点和子节点之间比较、交换；在不超过<code>logn</code>的时间复杂度就可以完成一次操作。</p>\n<p>有了这两个基本的函数，就可以实现上述提及的堆的基本操作。</p>\n<p>首先是如何建堆，<strong>实现建堆操作有两个思路</strong>:</p>\n<ul>\n<li>一个是不断地<code>insert</code>（<code>insert</code>后调用的是<code>siftUp</code>）</li>\n<li>另一个将原始数组当成一个需要调整的堆，然后自底向上地<br>\n在每个位置<code>i</code>调用<code>siftDown(i)</code>，完成后我们就可以得到一个满足堆性质的堆。这里考虑后一种思路：</li>\n</ul>\n<p>通常堆的<code>insert</code>操作是将元素插入到堆尾，由于新元素的插入可能违反堆的性质，因此需要调用<code>siftUp</code>操作自底向上调整堆；堆移除堆顶元素操作是将堆顶元素删除，然后将堆最后一个元素放置在堆顶，接着执行<code>siftDown</code>操作，同理替换堆顶元素也是相同的操作。</p>\n<p><strong>建堆</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46938638411066\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 建立小顶堆\r\nprivate void buildMinHeap(int[] nums) {\r\n\tint size = nums.length;\r\n\tfor (int j = size / 2 - 1; j &gt;= 0; j--)\r\n\t\tsiftDown(nums, j, size);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46938638411066-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46938638411066-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46938638411066-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46938638411066-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46938638411066-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46938638411066-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46938638411066-1\"><span class=\"crayon-c\">// 建立小顶堆</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46938638411066-2\"><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">buildMinHeap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46938638411066-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46938638411066-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46938638411066-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46938638411066-6\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>那么建堆操作的时间复杂度是多少呢？答案是<code>O(n)</code>。虽然<code>siftDown</code>的操作时间是<code>logn</code>，但是由于高度在递减的同时，每一层的节点数量也在成倍减少，最后通过数列错位相减可以得到时间复杂度是<code>O(n)</code>。</p>\n<p><strong>extractMin</strong><br>\n由于堆的固有性质，堆的根便是最小的元素，因此<strong>peek</strong>操作就是返回根<code>nums[0]</code>元素即可；<br>\n若要将<code>nums[0]</code>删除，可以将末尾的元素<code>nums[n-1]</code>覆盖<code>nums[0]</code>,然后将堆得<code>size = size-1</code>，调用<code>siftDown(0)</code>调整堆。时间复杂度为<code>logn</code>。</p>\n<p><strong>peek</strong><br>\n同上</p>\n<p><strong>delete(i)</strong></p>\n<p>删除堆中位置为<code>i</code>的节点，涉及到两个函数<code>siftUp</code>和<code>siftDown</code>，时间复杂度为<code>logn</code>,具体步骤是，</p>\n<ul>\n<li>将元素<code>last</code>覆盖元素<code>i</code>，然后<code>siftDown</code></li>\n<li>检查是否需要<code>siftUp</code></li>\n</ul>\n<p><strong>注意到堆的删除操作，如果是删除堆的根节点，则不用考虑执行siftUp的操作；若删除的是堆的非根节点，则要视情况决定是siftDown还是siftUp操作，两个操作是互斥的。</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f4693c224015256\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic int delete(int i) {\r\n\tint key = nums[i];\r\n\t//将last元素移动过来，先siftDown; 再视情况考虑是否siftUp\r\n\tint last = nums[i] = nums[size-1];\r\n\tsize--;\r\n\tsiftDown(i);\r\n\t//check #i的node的键值是否确实发生改变（是否siftDown操作生效）,若发生改变，则ok,否则为确保堆性质，则需要siftUp \r\n\tif (i &lt; size &amp;&amp; nums[i] == last) {\r\n\t\tSystem.out.println(\"delete siftUp\");\r\n\t\tsiftUp(i);\r\n\t}\t\r\n     return key;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4693c224015256-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4693c224015256-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4693c224015256-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4693c224015256-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4693c224015256-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4693c224015256-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4693c224015256-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4693c224015256-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">//将last元素移动过来，先siftDown; 再视情况考虑是否siftUp</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4693c224015256-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4693c224015256-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">//check #i的node的键值是否确实发生改变（是否siftDown操作生效）,若发生改变，则ok,否则为确保堆性质，则需要siftUp </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4693c224015256-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"delete siftUp\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4693c224015256-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">siftUp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4693c224015256-12\"><span class=\"crayon-h\">     </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4693c224015256-13\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p><strong>case 1 :</strong></p>\n<p>删除中间节点<code>i</code>21，将最后一个节点复制过来；</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/8ef16b0510cac631740d72895202c51d.jpeg\" alt=\"这里写图片描述\"></p>\n<p>由于没有进行<code>siftDown</code>操作，节点<code>i</code>的值仍然为6，因此为确保堆的性质，执行<code>siftUp</code>操作；</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/e2d5da6d66c8830d70d1e26d96b94a18.jpeg\" alt=\"这里写图片描述\"></p>\n<p><strong>case 2</strong></p>\n<p>删除中间节点<code>i</code>，将值为11的节点复制过来，执行<code>siftDown</code>操作；<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/47c594c3aa4fce7e85283cba7a78fad9.jpeg\" alt=\"这里写图片描述\"></p>\n<p>由于执行<code>siftDown</code>操作后，节点<code>i</code>的值不再是<code>11</code>，因此就不用再执行<code>siftUp</code>操作了，因为堆的性质在<code>siftDown</code>操作生效后已经得到了保持。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/40a397b68b3a2ad4a08da6aff70d6583.jpeg\" alt=\"这里写图片描述\"></p>\n<hr>\n<p>可以看出，堆的基本操作都依赖于两个核心的函数<code>siftUp</code>和<code>siftDown</code>；较为完整的<code>Heap</code>代码如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46941066369665\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nclass Heap {\r\n\tprivate final static int N = 100; //default size\r\n\tprivate int[] nums;\r\n\tprivate int size;\r\n\t\r\n\tpublic Heap(int[] nums) {\r\n\t\tthis.nums = nums;\r\n\t\tthis.size = nums.length;\r\n\t\theapify(this.nums);\r\n\t}\r\n\t\r\n\tpublic Heap() {\r\n\t\tthis.nums = new int[N];\r\n\t}\r\n\t\r\n\t/**\r\n\t * heapify an array, O(n)\r\n\t * @param nums An array to be heapified. \r\n\t */\r\n\tprivate void heapify(int[] nums) {\r\n\t\tfor (int j = (size - 1) &gt;&gt; 1; j &gt;= 0; j--)\r\n\t\t\tsiftDown(j);\r\n\t}\r\n\t\r\n\t/**\r\n\t * append x to heap\r\n\t * O(logn)\r\n\t * @param x\r\n\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;\r\n\t */\r\n\tpublic int insert(int x) {\r\n\t\tif (size &gt;= this.nums.length)\r\n\t\t\texpandSpace();\r\n\t\tsize += 1;\r\n\t\tnums[size-1] = x;\r\n\t\tsiftUp(size-1);\r\n\t\treturn x;\r\n\t}\r\n\t\r\n\t/**\r\n\t * delete an element located in i position.\r\n\t * O(logn)\r\n\t * @param i\r\n\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;\r\n\t */\r\n\tpublic int delete(int i) {\r\n\t\trangeCheck(i);\r\n\t\tint key = nums[i];\r\n\t\t//将last元素覆盖过来,先siftDown; 再视情况考虑是否siftUp;\r\n\t\tint last = nums[i] = nums[size-1];\r\n\t\tsize--;\r\n\t\tsiftDown(i);\r\n\t\t//check #i的node的键值是否确实发生改变,若发生改变，则ok,否则为确保堆性质，则需要siftUp; \r\n\t\tif (i &lt; size &amp;&amp; nums[i] == last) \r\n\t\t\tsiftUp(i);\r\n\t\treturn key;\r\n\t}\r\n\t\r\n\t/**\r\n\t * remove the root of heap, return it's value, and adjust heap to maintain the heap's property. \r\n\t * O(logn)\r\n\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;\r\n\t */\r\n\tpublic int extractMin() {\r\n\t\trangeCheck(0);\r\n\t\tint key = nums[0], last = nums[size-1];\r\n\t\tnums[0] = last;\r\n\t\tsize--;\r\n\t\tsiftDown(0);\r\n\t\treturn key;\r\n\t}\r\n\t/**\r\n\t * return an element's index, if not exists, return -1;\r\n\t * O(n)\r\n\t * @param x\r\n\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;\r\n\t */\r\n\tpublic int search(int x) {\r\n\t\tfor (int i = 0; i &lt; size; i++)\r\n\t\t\tif (nums[i] == x)\r\n\t\t\t\treturn i;\r\n\t\treturn -1;\r\n\t}\r\n\t/**\r\n\t * return but does not remove the root of heap.\r\n\t * O(1)\r\n\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;\r\n\t */\r\n\tpublic int peek() {\r\n\t\trangeCheck(0);\r\n\t\treturn nums[0];\r\n\t}\r\n\t\r\n\tprivate void siftUp(int i) {\r\n\t\tint key = nums[i];\r\n\t\tfor (; i &gt; 0;) {\r\n\t\t\tint p = (i - 1) &gt;&gt;&gt; 1;\r\n\t\t\tif (nums[p] &lt;= key)\r\n\t\t\t\tbreak;\r\n\t\t\tnums[i] = nums[p];\r\n\t\t\ti = p;\r\n\t\t}\r\n\t\tnums[i] = key;\r\n\t}\r\n\t\r\n\tprivate void siftDown(int i) {\r\n\t\tint key = nums[i];\r\n\t\tfor (;i &lt; size / 2;) {\r\n\t\t\tint child = (i &lt;&lt; 1) + 1;\r\n\t\t\tif (child + 1 &lt; size &amp;&amp; nums[child] &gt; nums[child+1])\r\n\t\t\t\tchild++;\r\n\t\t\tif (key &lt;= nums[child])\r\n\t\t\t\tbreak;\r\n\t\t\tnums[i] = nums[child];\r\n\t\t\ti = child;\r\n\t\t}\r\n\t\tnums[i] = key;\r\n\t}\r\n\t\r\n\tprivate void rangeCheck(int i) {\r\n\t\tif (!(0 &lt;= i &amp;&amp; i &lt; size))\r\n\t\t\tthrow new RuntimeException(\"Index is out of boundary\");\t\r\n\t}\r\n\t\r\n\tprivate void expandSpace() {\r\n\t\tthis.nums = Arrays.copyOf(this.nums, size * 2);\r\n\t}\r\n\t\r\n\t&lt;a href='http://www.jobbole.com/members/wx610506454'&gt;@Override&lt;/a&gt;\r\n\tpublic String toString() {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tsb.append(\"[\");\r\n\t\tfor (int i = 0; i &lt; size; i++)\r\n\t\t\tsb.append(String.format((i != 0 ? \", \" : \"\") + \"%d\", nums[i]));\r\n\t\tsb.append(\"]\\n\");\r\n\t\treturn sb.toString();\r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-100\">100</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-101\">101</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-102\">102</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-103\">103</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-104\">104</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-105\">105</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-106\">106</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-107\">107</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-108\">108</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-109\">109</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-110\">110</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-111\">111</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-112\">112</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-113\">113</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-114\">114</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-115\">115</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-116\">116</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-117\">117</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-118\">118</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-119\">119</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-120\">120</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-121\">121</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-122\">122</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-123\">123</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-124\">124</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-125\">125</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-126\">126</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-127\">127</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-128\">128</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-129\">129</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-130\">130</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-131\">131</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-132\">132</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-133\">133</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-134\">134</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-135\">135</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-136\">136</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-137\">137</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46941066369665-138\">138</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46941066369665-139\">139</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-1\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">N</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//default size</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-5\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nums</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-8\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-11\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nums</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-15\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-17\"><span class=\"crayon-c\">\t * heapify an array, O(n)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-18\"><span class=\"crayon-c\">\t * @param nums An array to be heapified. </span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-19\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-20\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-21\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-22\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-23\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-24\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-25\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-26\"><span class=\"crayon-c\">\t * append x to heap</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-27\"><span class=\"crayon-c\">\t * O(logn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-28\"><span class=\"crayon-c\">\t * @param x</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-29\"><span class=\"crayon-c\">\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-30\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-31\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insert</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-32\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-33\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">expandSpace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-34\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-35\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-36\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">siftUp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-37\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-38\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-39\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-40\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-41\"><span class=\"crayon-c\">\t * delete an element located in i position.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-42\"><span class=\"crayon-c\">\t * O(logn)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-43\"><span class=\"crayon-c\">\t * @param i</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-44\"><span class=\"crayon-c\">\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-45\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-46\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-47\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">rangeCheck</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-48\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-49\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">//将last元素覆盖过来,先siftDown; 再视情况考虑是否siftUp;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-50\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-51\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-52\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-53\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">//check #i的node的键值是否确实发生改变,若发生改变，则ok,否则为确保堆性质，则需要siftUp; </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-54\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-55\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">siftUp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-56\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-57\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-58\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-59\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-60\"><span class=\"crayon-c\">\t * remove the root of heap, return it's value, and adjust heap to maintain the heap's property. </span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-61\"><span class=\"crayon-c\">\t * O(logn)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-62\"><span class=\"crayon-c\">\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-63\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-64\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">extractMin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-65\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">rangeCheck</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-66\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-67\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">last</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-68\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-69\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-70\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-71\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-72\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-73\"><span class=\"crayon-c\">\t * return an element's index, if not exists, return -1;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-74\"><span class=\"crayon-c\">\t * O(n)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-75\"><span class=\"crayon-c\">\t * @param x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-76\"><span class=\"crayon-c\">\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-77\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-78\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">search</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-79\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-80\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-81\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-82\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-83\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-84\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-85\"><span class=\"crayon-c\">\t * return but does not remove the root of heap.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-86\"><span class=\"crayon-c\">\t * O(1)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-87\"><span class=\"crayon-c\">\t * &lt;a href='http://www.jobbole.com/members/wx1409399284'&gt;@return&lt;/a&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-88\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-89\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">peek</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-90\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">rangeCheck</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-91\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-92\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-93\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-94\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">siftUp</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-95\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-96\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-97\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-98\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-99\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-100\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-101\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-102\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-103\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-104\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-105\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-106\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-107\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-108\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-109\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-110\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-111\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-112\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-113\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-114\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-115\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-116\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-117\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-118\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-119\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-120\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rangeCheck</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-121\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-122\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">throw</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RuntimeException</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Index is out of boundary\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-123\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-124\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-125\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">expandSpace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-126\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nums</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Arrays</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">copyOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">size *</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-127\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-128\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-129\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">href</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'http://www.jobbole.com/members/wx610506454'</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">Override</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-130\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-131\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// TODO Auto-generated method stub</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-132\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">StringBuilder </span><span class=\"crayon-v\">sb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">StringBuilder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-133\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"[\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-134\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-135\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\", \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"%d\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-136\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"]\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-137\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46941066369665-138\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46941066369665-139\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0179 seconds] -->\r\n<p></p>\n<h2 id=\"2-堆的应用：堆排序\">2.堆的应用：堆排序</h2>\n<p>运用堆的性质，我们可以得到一种常用的、稳定的、高效的排序算法————<strong>堆排序</strong>。堆排序的时间复杂度为<code>O(n*log(n))</code>，空间复杂度为<code>O(1)</code>，堆排序的思想是：<br>\n对于含有<code>n</code>个元素的无序数组<code>nums</code>, 构建一个堆(这里是小顶堆)<code>heap</code>，然后执行<code>extractMin</code>得到最小的元素，这样执行<code>n</code>次得到序列就是排序好的序列。<br>\n如果是降序排列则是小顶堆；否则利用大顶堆。</p>\n<p><strong>Trick</strong></p>\n<p>由于<code>extractMin</code>执行完毕后，最后一个元素<code>last</code>已经被移动到了<code>root</code>，因此可以将<code>extractMin</code>返回的元素放置于最后，这样可以得到<code>sort in place</code>的堆排序算法。</p>\n<p>具体操作如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46949539635160\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint[] n = new int[] {1,9,5,6,8,3,1,2,5,9,86};\r\nHeap h = new Heap(n);\r\nfor (int i = 0; i &lt; n.length; i++)\r\n\tn[n.length-1-i] = h.extractMin();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46949539635160-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46949539635160-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46949539635160-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46949539635160-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46949539635160-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">86</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46949539635160-2\"><span class=\"crayon-i\">Heap</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Heap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46949539635160-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46949539635160-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">h</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">extractMin</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p></p>\n<hr>\n<p>当然，如果不使用前面定义的<code>heap</code>，则可以手动写堆排序，由于堆排序设计到<strong>建堆</strong>和<strong>extractMin</strong>， 两个操作都公共依赖于<code>siftDown</code>函数，因此我们只需要实现<code>siftDown</code>即可。(trick:由于建堆操作可以采用<code>siftUp</code>或者<code>siftDown</code>，而<code>extractMin</code>是需要<code>siftDown</code>操作，因此取公共部分，则采用<code>siftDown</code>建堆)。</p>\n<p>这里便于和前面统一，采用小顶堆数组进行降序排列。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f4694d343711086\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic void heapSort(int[] nums) {\r\n\t\tint size = nums.length;\r\n\t\tbuildMinHeap(nums);\r\n\t\twhile (size != 0) {\r\n\t\t\t// 交换堆顶和最后一个元素\r\n\t\t\tint tmp = nums[0];\r\n\t\t\tnums[0] = nums[size - 1];\r\n\t\t\tnums[size - 1] = tmp;\r\n\t\t\tsize--;\r\n\t\t\tsiftDown(nums, 0, size);\r\n\t\t}\r\n\t}\r\n\r\n\t// 建立小顶堆\r\n\tprivate void buildMinHeap(int[] nums) {\r\n\t\tint size = nums.length;\r\n\t\tfor (int j = size / 2 - 1; j &gt;= 0; j--)\r\n\t\t\tsiftDown(nums, j, size);\r\n\t}\r\n\r\n\tprivate void siftDown(int[] nums, int i, int newSize) {\r\n\t\tint key = nums[i];\r\n\t\twhile (i &lt; newSize &gt;&gt;&gt; 1) {\r\n\t\t\tint leftChild = (i &lt;&lt; 1) + 1;\r\n\t\t\tint rightChild = leftChild + 1;\r\n\t\t\t// 最小的孩子，比最小的孩子还小\r\n\t\t\tint min = (rightChild &gt;= newSize || nums[leftChild] &lt; nums[rightChild]) ? leftChild : rightChild;\r\n\t\t\tif (key &lt;= nums[min])\r\n\t\t\t\tbreak;\r\n\t\t\tnums[i] = nums[min];\r\n\t\t\ti = min;\r\n\t\t}\r\n\t\tnums[i] = key;\r\n\t}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4694d343711086-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4694d343711086-34\">34</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heapSort</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-2\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-3\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">buildMinHeap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-4\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-5\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 交换堆顶和最后一个元素</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-6\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-7\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-8\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tmp</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-9\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">size</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-10\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-11\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 建立小顶堆</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-15\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">buildMinHeap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-16\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-17\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-18\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-19\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-20\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-21\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newSize</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-22\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-23\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-24\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">leftChild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-25\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rightChild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">leftChild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-26\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 最小的孩子，比最小的孩子还小</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-27\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">rightChild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newSize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">leftChild</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">rightChild</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">leftChild</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rightChild</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-28\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-29\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-30\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-31\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">min</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-32\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4694d343711086-33\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4694d343711086-34\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0066 seconds] -->\r\n<p></p>\n<h2 id=\"3-堆的应用：优先队列\">3.堆的应用：优先队列</h2>\n<p>优先队列是一种抽象的数据类型，它和堆的关系类似于，<code>List</code>和数组、链表的关系一样；我们常常使用堆来实现优先队列，因此很多时候堆和优先队列都很相似，它们只是概念上的区分。<br>\n优先队列的应用场景十分的广泛：<br>\n常见的应用有：</p>\n<ul>\n<li>Dijkstra’s algorithm（单源最短路问题中需要在邻接表中找到某一点的最短邻接边，这可以将复杂度降低。）</li>\n<li>Huffman coding（贪心算法的一个典型例子，采用优先队列构建最优的前缀编码树(<code>prefixEncodeTree</code>)）</li>\n<li>Prim’s algorithm for minimum spanning tree</li>\n<li>Best-first search algorithms</li>\n</ul>\n<p>这里简单介绍上述应用之一：<a href=\"https://en.wikipedia.org/wiki/Huffman_coding\" target=\"_blank\" rel=\"noopener\">Huffman coding</a>。</p>\n<p>Huffman编码是一种变长的编码方案，对于每一个字符，所对应的二进制位串的长度是不一致的，但是遵守如下原则：</p>\n<ul>\n<li>出现频率高的字符的二进制位串的长度小</li>\n<li>不存在一个字符<code>c</code>的二进制位串<code>s</code>是除<code>c</code>外任意字符的二进制位串的前缀</li>\n</ul>\n<p>遵守这样原则的Huffman编码属于变长编码，可以无损的压缩数据，压缩后通常可以节省20%-90%的空间，具体压缩率依赖于数据的固有结构。</p>\n<p>Huffman编码的实现就是要找到满足这两种原则的 <strong>字符-二进制位串</strong> 对照关系，即找到<strong>最优前缀码</strong>的编码方案（前缀码：没有任何字符编码后的二进制位串是其他字符编码后位串的前缀）。<br>\n这里我们需要用到二叉树来表达最优前缀码，该树称为<strong>最优前缀码树</strong><br>\n一棵最优前缀码树看起来像这样：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/88641060380e5ff72465ab16e99a9233.png\" alt=\"这里写图片描述\"></p>\n<p>算法思想：用一个属性为<code>freqeunce</code>关键字的最小优先队列Q,将当前最小的两个元素x,y合并得到一个新元素z（z.frequence = x.freqeunce + y.frequence）,<br>\n然后插入到优先队列中Q中，这样执行<code>n-1</code>次合并后，得到一棵最优前缀码树（这里不讨论算法的证明）。</p>\n<p>一个常见的构建流程如下：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c8cfa4278ad1a5f379a0a9e83e4506d9.jpeg\" alt=\"这里写图片描述\"></p>\n<p>树中指向某个节点左孩子的边上表示位<code>0</code>,指向右孩子的边上的表示位<code>1</code>，这样遍历一棵最优前缀码树就可以得到对照表。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46953122992586\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport java.util.Comparator;\r\nimport java.util.HashMap;\r\nimport java.util.Map;\r\nimport java.util.PriorityQueue;\r\n\r\n/**\r\n * \r\n *                            root \r\n *                            /   \\ \r\n *                    --------- ---------- \r\n *                    |c:freq | | c:freq | \r\n *                    --------- ----------\r\n * \r\n *\r\n */\r\npublic class HuffmanEncodeDemo {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tNode[] n = new Node[6];\r\n\t\tfloat[] freq = new float[] { 9, 5, 45, 13, 16, 12 };\r\n\t\tchar[] chs = new char[] { 'e', 'f', 'a', 'b', 'd', 'c' };\r\n\t\tHuffmanEncodeDemo demo = new HuffmanEncodeDemo();\r\n\t\tNode root = demo.buildPrefixEncodeTree(n, freq, chs);\r\n\t\tMap&lt;Character, String&gt; collector = new HashMap&lt;&gt;();\r\n\t\tStringBuilder sb = new StringBuilder();\r\n\t\tdemo.tranversalPrefixEncodeTree(root, collector, sb);\r\n\t\tSystem.out.println(collector);\r\n\t\tString s = \"abcabcefefefeabcdbebfbebfbabc\";\r\n\t\tStringBuilder sb1 = new StringBuilder();\r\n\t\tfor (char c : s.toCharArray()) {\r\n\t\t\tsb1.append(collector.get(c));\r\n\t\t}\r\n\t\tSystem.out.println(sb1.toString());\r\n\t}\r\n\r\n\tpublic Node buildPrefixEncodeTree(Node[] n, float[] freq, char[] chs) {\r\n\t\tPriorityQueue&lt;Node&gt; pQ = new PriorityQueue&lt;&gt;(new Comparator&lt;Node&gt;() {\r\n\t\t\tpublic int compare(Node o1, Node o2) {\r\n\t\t\t\treturn o1.item.freq &gt; o2.item.freq ? 1 : o1.item.freq == o2.item.freq ? 0 : -1;\r\n\t\t\t};\r\n\t\t});\r\n\t\tNode e = null;\r\n\t\tfor (int i = 0; i &lt; chs.length; i++) {\r\n\t\t\tn[i] = e = new Node(null, null, new Item(chs[i], freq[i]));\r\n\t\t\tpQ.add(e);\r\n\t\t}\r\n\r\n\t\tfor (int i = 0; i &lt; n.length - 1; i++) {\r\n\t\t\tNode x = pQ.poll(), y = pQ.poll();\r\n\t\t\tNode z = new Node(x, y, new Item('$', x.item.freq + y.item.freq));\r\n\t\t\tpQ.add(z);\r\n\t\t}\r\n\t\treturn pQ.poll();\r\n\t}\r\n\t\r\n\t/**\r\n\t * tranversal  \r\n\t * @param root\r\n\t * @param collector\r\n\t * @param sb\r\n\t */\r\n\tpublic void tranversalPrefixEncodeTree(Node root, Map&lt;Character, String&gt; collector, StringBuilder sb) {\r\n\t\t// leaf node\r\n\t\tif (root.left == null &amp;&amp; root.right == null) {\r\n\t\t\tcollector.put(root.item.c, sb.toString());\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tNode left = root.left, right = root.right;\r\n\t\ttranversalPrefixEncodeTree(left, collector, sb.append(0));\r\n\t\tsb.delete(sb.length() - 1, sb.length());\r\n\t\ttranversalPrefixEncodeTree(right, collector, sb.append(1));\r\n\t\tsb.delete(sb.length() - 1, sb.length());\r\n\t}\r\n\t\r\n}\r\n\r\nclass Node {\r\n\tpublic Node left, right;\r\n\tpublic Item item;\r\n\r\n\tpublic Node(Node left, Node right, Item item) {\r\n\t\tsuper();\r\n\t\tthis.left = left;\r\n\t\tthis.right = right;\r\n\t\tthis.item = item;\r\n\t}\r\n\r\n}\r\n\r\nclass Item {\r\n\tpublic char c;\r\n\tpublic float freq;\r\n\r\n\tpublic Item(char c, float freq) {\r\n\t\tsuper();\r\n\t\tthis.c = c;\r\n\t\tthis.freq = freq;\r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-95\">95</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-96\">96</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-97\">97</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-98\">98</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46953122992586-99\">99</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46953122992586-100\">100</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Comparator</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">HashMap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Map</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PriorityQueue</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-6\"><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-7\"><span class=\"crayon-c\"> * </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-8\"><span class=\"crayon-c\"> *                            root </span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-9\"><span class=\"crayon-c\"> *                            /   \\ </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-10\"><span class=\"crayon-c\"> *                    --------- ---------- </span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-11\"><span class=\"crayon-c\"> *                    |c:freq | | c:freq | </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-12\"><span class=\"crayon-c\"> *                    --------- ----------</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-13\"><span class=\"crayon-c\"> * </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-14\"><span class=\"crayon-c\"> *</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-15\"><span class=\"crayon-c\"> */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-16\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HuffmanEncodeDemo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-17\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-18\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-19\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// TODO Auto-generated method stub</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-20\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">Node</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Node</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-21\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">45</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-22\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'e'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'f'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'d'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'c'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-23\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">HuffmanEncodeDemo </span><span class=\"crayon-v\">demo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">HuffmanEncodeDemo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-24\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">root</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">demo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">buildPrefixEncodeTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-25\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Character</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">collector</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HashMap</span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-26\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">StringBuilder </span><span class=\"crayon-v\">sb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">StringBuilder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-27\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">demo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">tranversalPrefixEncodeTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-28\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-29\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"abcabcefefefeabcdbebfbebfbabc\"</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-30\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">StringBuilder </span><span class=\"crayon-v\">sb1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">StringBuilder</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-31\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toCharArray</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-32\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">sb1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-33\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-34\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sb1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-35\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-36\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-37\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node </span><span class=\"crayon-e\">buildPrefixEncodeTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Node</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-38\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">PriorityQueue</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Node</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pQ</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PriorityQueue</span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Comparator</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Node</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-39\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">compare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">o1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">o2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-40\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-41\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-42\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-43\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-i\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-44\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-45\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Item</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">chs</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-46\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">pQ</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-47\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-48\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-49\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-50\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-i\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pQ</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">poll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pQ</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">poll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-51\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-i\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">z</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Item</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'$'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-52\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">pQ</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-53\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-54\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pQ</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">poll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-55\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-56\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-57\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">/**</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-58\"><span class=\"crayon-c\">\t * tranversal  </span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-59\"><span class=\"crayon-c\">\t * @param root</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-60\"><span class=\"crayon-c\">\t * @param collector</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-61\"><span class=\"crayon-c\">\t * @param sb</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-62\"><span class=\"crayon-c\">\t */</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-63\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tranversalPrefixEncodeTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">Character</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">StringBuilder </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-64\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// leaf node</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-65\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-66\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-67\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-68\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-69\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-70\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">tranversalPrefixEncodeTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-71\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-72\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">tranversalPrefixEncodeTree</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">collector</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-73\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">delete</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sb</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-74\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-75\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-76\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-77\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-78\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-79\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-80\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Item </span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-81\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-82\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Node </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Item </span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-83\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-84\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">left</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">left</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-85\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">right</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">right</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-86\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">item</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">item</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-87\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-88\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-89\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-90\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-91\"><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Item</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-92\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-93\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-94\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-95\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Item</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">float</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-96\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">super</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-97\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-98\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">freq</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">freq</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f46953122992586-99\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46953122992586-100\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0173 seconds] -->\r\n<p>输出如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f46959908768077\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n{a=0, b=101, c=100, d=111, e=1101, f=1100}\r\n010110001011001101110011011100110111001101010110011110111011011100101110110111001010101100</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f46959908768077-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f46959908768077-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f46959908768077-1\"><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">a</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">101</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">111</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1101</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1100</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f46959908768077-2\"><span class=\"crayon-cn\">010110001011001101110011011100110111001101010110011110111011011100101110110111001010101100</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h2 id=\"4-堆的应用：海量实数中（一亿级别以上）找到TopK（一万级别以下）的数集合。\">4 堆的应用：海量实数中（一亿级别以上）找到TopK（一万级别以下）的数集合。</h2>\n<ul>\n<li>A:通常遇到找一个集合中的TopK问题，想到的便是排序，因为常见的排序算法例如快排算是比较快了，然后再取出K个TopK数，时间复杂度为<code>O(nlogn)</code>，当<code>n</code>很大的时候这个时间复杂度还是很大的；</li>\n<li>B:另一种思路就是打擂台的方式,每个元素与K个待选元素比较一次，时间复杂度很高：<code>O(k*n)</code>，此方案明显逊色于前者。</li>\n</ul>\n<p>对于一亿数据来说，A方案大约是<code>26.575424*n</code>；</p>\n<ul>\n<li>C:由于我们只需要TopK，因此不需要对所有数据进行排序，可以利用堆得思想，维护一个大小为K的小顶堆，然后依次遍历每个元素<code>e</code>, 若元素<code>e</code>大于堆顶元素<code>root</code>，则删除<code>root</code>，将<code>e</code>放在堆顶，然后调整，时间复杂度为<code>logK</code>；若小于或等于，则考察下一个元素。这样遍历一遍后，最小堆里面保留的数就是我们要找的<code>topK</code>，整体时间复杂度为<code>O(k+n*logk)</code>约等于<code>O(n*logk)</code>，大约是<code>13.287712*n</code>（由于k与n数量级差太多），这样时间复杂度下降了约一半。</li>\n</ul>\n<p>A、B、C三个方案中，C通常是优于B的，因为logK通常是小于k的，当<code>K</code>和<code>n</code>的数量级相差越大，这种方式越有效。</p>\n<p>以下为具体操作：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76cf1f4695d101947267\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nimport java.io.File;\r\nimport java.io.FileNotFoundException;\r\nimport java.io.PrintWriter;\r\nimport java.io.UnsupportedEncodingException;\r\nimport java.util.Arrays;\r\nimport java.util.Scanner;\r\nimport java.util.Set;\r\nimport java.util.TreeSet;\r\npublic class TopKNumbersInMassiveNumbersDemo {\r\n\r\n\tpublic static void main(String[] args) {\r\n\t\t// TODO Auto-generated method stub\r\n\t\tint[] topK = new int[]{50001,50002,50003,50004,50005};\r\n\t\tgenData(1000 * 1000 * 1000, 500, topK);\r\n\t\tlong t = System.currentTimeMillis();\r\n\t\tfindTopK(topK.length);\r\n\t\tSystem.out.println(String.format(\"cost:%fs\", (System.currentTimeMillis() - t) * 1.0 / 1000));\r\n\t}\r\n\t\r\n\tpublic static void genData(int N, int maxRandomNumer, int[] topK) {\r\n\t\tFile f = new File(\"data.txt\");\r\n\t\tint k = topK.length;\r\n\t\tSet&lt;Integer&gt; index = new TreeSet&lt;&gt;();\r\n\t\tfor (;;) {\r\n\t\t\tindex.add((int)(Math.random() * N));\r\n\t\t\tif (index.size() == k)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\tSystem.out.println(index);\r\n\t\tint j = 0;\r\n\t\ttry {\r\n\t\t\tPrintWriter pW = new PrintWriter(f, \"UTF-8\");\r\n\t\t\tfor (int i = 0; i &lt; N; i++)\r\n\t\t\t\tif(!index.contains(i))\r\n\t\t\t\t\tpW.println((int)(Math.random() * maxRandomNumer));\r\n\t\t\t\telse\r\n\t\t\t\t\tpW.println(topK[j++]);\r\n\t\t\tpW.flush();\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t} catch (UnsupportedEncodingException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static void findTopK(int k) {\r\n\t\tint[] nums = new int[k];\r\n\t\t//read\r\n\t\tFile f = new File(\"data.txt\");\r\n\t\ttry {\r\n\t\t\tScanner scanner = new Scanner(f);\r\n\t\t\tfor (int j = 0;j &lt; k; j++)\r\n\t\t\t\tnums[j] = scanner.nextInt();\r\n\t\t\theapify(nums);\r\n\t\t\t//core\r\n\t\t\twhile (scanner.hasNextInt()) {\r\n\t\t\t\tint a = scanner.nextInt();\r\n\t\t\t\tif (a &lt;= nums[0])\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\telse {\r\n\t\t\t\t\tnums[0] = a;\r\n\t\t\t\t\tsiftDown(0, k, nums);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSystem.out.println(Arrays.toString(nums));\r\n\t\t} catch (FileNotFoundException e) {\r\n\t\t\t// TODO Auto-generated catch block\r\n\t\t\te.printStackTrace();\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t//O(n), minimal heap\r\n\tpublic static void heapify(int[] nums) {\r\n\t\tint size = nums.length;\r\n\t\tfor (int j = (size - 1) &gt;&gt; 1; j &gt;= 0; j--)\r\n\t\t\tsiftDown(j, size, nums);\r\n\t}\r\n\t\r\n\tprivate static void siftDown(int i, int n, int[] nums) {\r\n\t\tint key = nums[i];\r\n\t\tfor (;i &lt; (n &gt;&gt;&gt; 1);) {\r\n\t\t\tint child = (i &lt;&lt; 1) + 1;\r\n\t\t\tif (child + 1 &lt; n &amp;&amp; nums[child] &gt; nums[child+1])\r\n\t\t\t\tchild++;\r\n\t\t\tif (key &lt;= nums[child])\r\n\t\t\t\tbreak;\r\n\t\t\tnums[i] = nums[child];\r\n\t\t\ti = child;\r\n\t\t}\r\n\t\tnums[i] = key;\r\n\t}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-64\">64</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-65\">65</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-66\">66</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-67\">67</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-68\">68</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-69\">69</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-70\">70</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-71\">71</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-72\">72</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-73\">73</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-74\">74</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-75\">75</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-76\">76</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-77\">77</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-78\">78</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-79\">79</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-80\">80</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-81\">81</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-82\">82</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-83\">83</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-84\">84</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-85\">85</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-86\">86</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-87\">87</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-88\">88</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-89\">89</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-90\">90</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-91\">91</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-92\">92</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-93\">93</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76cf1f4695d101947267-94\">94</div><div class=\"crayon-num\" data-line=\"crayon-5a76cf1f4695d101947267-95\">95</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-1\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">File</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-2\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">FileNotFoundException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-3\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">PrintWriter</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-4\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">io</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">UnsupportedEncodingException</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-5\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Arrays</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-6\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Scanner</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-7\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Set</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-8\"><span class=\"crayon-e\">import </span><span class=\"crayon-v\">java</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">util</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">TreeSet</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-9\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TopKNumbersInMassiveNumbersDemo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-12\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// TODO Auto-generated method stub</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topK</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">{</span><span class=\"crayon-cn\">50001</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">50002</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">50003</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">50004</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">50005</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-14\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">genData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">500</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-15\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-16\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">findTopK</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">topK</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-17\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">format</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"cost:%fs\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">currentTimeMillis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-18\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-19\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-20\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">genData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maxRandomNumer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-21\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-i\">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">File</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data.txt\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-22\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">topK</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-23\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">Set</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">Integer</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">index</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TreeSet</span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-24\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-25\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-26\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-27\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-28\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-29\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-30\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-31\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-32\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">PrintWriter </span><span class=\"crayon-v\">pW</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PrintWriter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"UTF-8\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-33\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-34\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">index</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contains</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-35\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-v\">pW</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">random</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">maxRandomNumer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-36\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-37\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-v\">pW</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">topK</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-38\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">pW</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">flush</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-39\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">FileNotFoundException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-40\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// TODO Auto-generated catch block</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-41\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-42\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">UnsupportedEncodingException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-43\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// TODO Auto-generated catch block</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-44\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-45\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-46\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-47\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-48\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">findTopK</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-49\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-50\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">//read</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-51\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-i\">File</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">File</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"data.txt\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-52\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-53\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">Scanner </span><span class=\"crayon-v\">scanner</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Scanner</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-54\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-55\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scanner</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nextInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-56\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-57\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">//core</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-58\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">scanner</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">hasNextInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-59\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">scanner</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">nextInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-60\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-61\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-st\">continue</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-62\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-63\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-64\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-65\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-66\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-67\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Arrays</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">toString</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-68\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">FileNotFoundException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-69\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// TODO Auto-generated catch block</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-70\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">printStackTrace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-71\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-72\"><span class=\"crayon-h\">\t\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-73\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-74\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-75\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">//O(n), minimal heap</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-76\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">heapify</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-77\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-78\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">size</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">j</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-79\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">j</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-80\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-81\"><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-82\"><span class=\"crayon-h\">\t</span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">siftDown</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-83\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-84\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-85\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-86\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">child</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-87\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-r\">child</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-88\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">key</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-89\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-90\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-91\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">child</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-92\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-93\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">nums</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76cf1f4695d101947267-94\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5a76cf1f4695d101947267-95\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0171 seconds] -->\r\n<p></p>\n<hr>\n<p>ps:大致测试了一下，10亿个数中找到top5需要140秒左右，应该是很快了。</p>\n<h2 id=\"5-总结\">5 总结</h2>\n<ul>\n<li>堆是基于树的满足一定约束的重要数据结构，存在许多变体例如二叉堆、二项式堆、斐波那契堆（很高效）等。</li>\n<li>堆的几个基本操作都依赖于两个重要的函数<code>siftUp</code>和<code>siftDown</code>，堆的<code>insert</code>通常是在堆尾插入新元素并<code>siftUp</code>调整堆，而<code>extractMin</code>是在<br>\n删除堆顶元素，然后将最后一个元素放置堆顶并调用<code>siftDown</code>调整堆。</li>\n<li>二叉堆是常用的一种堆，其是一棵二叉树；由于二叉树良好的性质，因此常常采用数组来存储堆。<br>\n堆得基本操作的时间复杂度如下表所示：</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>heapify</th>\n<th>insert</th>\n<th>peek</th>\n<th>extractMin</th>\n<th>delete(i)</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>O(n)</code></td>\n<td><code>O(logn)</code></td>\n<td><code>O(1)</code></td>\n<td><code>O(logn)</code></td>\n<td><code>O(logn)</code></td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>二叉堆通常被用来实现堆排序算法，堆排序可以<code>sort in place</code>，堆排序的时间复杂度的上界是<code>O(nlogn)</code>，是一种很优秀的排序算法。由于存在相同键值的两个元素处于两棵子树中，而两个元素的顺序可能会在后续的堆调整中发生改变，因此堆排序不是稳定的。降序排序需要建立小顶堆，升序排序需要建立大顶堆。</li>\n<li>堆是实现抽象数据类型优先队列的一种方式，优先队列有很广泛的应用，例如Huffman编码中使用优先队列利用贪心算法构建最优前缀编码树。</li>\n<li>堆的另一个应用就是在海量数据中找到TopK个数，思想是维护一个大小为K的二叉堆，然后不断地比较堆顶元素，判断是否需要执行替换对顶元素的操作，采用<br>\n此方法的时间复杂度为<code>n*logk</code>，当<code>k</code>和<code>n</code>的数量级差距很大的时候，这种方式是很有效的方法。</li>\n</ul>\n<h2 id=\"6-references\">6 references</h2>\n<p>[1] <a href=\"https://en.wikipedia.org/wiki/Heap_(data_structure\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Heap_(data_structure)</a>)</p>\n<p>[2] <a href=\"https://en.wikipedia.org/wiki/Heapsort\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Heapsort</a></p>\n<p>[3] <a href=\"https://en.wikipedia.org/wiki/Priority_queue\" target=\"_blank\" rel=\"noopener\">https://en.wikipedia.org/wiki/Priority_queue</a></p>\n<p>[4] <a href=\"https://www.cnblogs.com/swiftma/p/6006395.html\" target=\"_blank\" rel=\"noopener\">https://www.cnblogs.com/swiftma/p/6006395.html</a></p>\n<p>[5] Thomas H.Cormen, Charles E.Leiserson, Ronald L.Rivest, Clifford Stein.算法导论[M].北京:机械工业出版社,2015:245-249</p>\n<p>[6] Jon Bentley.编程珠玑[M].北京:人民邮电出版社,2015:161-174</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113552\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113552votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113552\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/30fcdf79d0b901a9dde107f5e6e10f11fd95d574.jpg"},{"url_object_id": "3647acc668bab03724b85aac74aa9f37", "title": "3 个可以替代 Emacs 和 Vim 的文本编辑器", "url": "http://blog.jobbole.com/113596/", "create_date": "2018/01/30", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Emasc,Linux,Vim", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/17/9/3-alternatives-emacs-and-vim\">Scott Nesbitt</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9286-1.html\">Linux中国/ChenYi</a>   </div><blockquote><p>Vim 和 Emacs 对于 Linux 桌面上进行文本编辑显然是重量级的，但是它们并非唯一之选。</p></blockquote>\n<p>Emacs 和 Vim 的粉丝们，在你们开始编辑器之争之前，请你们理解，这篇文章并不是为了贬低诸位最喜欢的编辑器。我是一个 Emacs 爱好者，但是也很喜欢 Vim。</p>\n<p>就是说，我认为 Emacs 和 Vim 并不适合所有人。也许 <a href=\"https://en.wikipedia.org/wiki/Editor_war\">编辑器之争</a> 略显幼稚，让很多人失望了。也许他们只是想要有一个不太苛刻的现代化的编辑器。</p>\n<p>如果你正寻找可以替代 Emacs 或者 Vim 的编辑器，请继续阅读下去。这里有三个可能会让你感兴趣的编辑器。</p>\n<h3 id=\"toc_1\">Geany</h3>\n<p><img class=\"aligncenter\" title=\"Editing a LaTeX document with Geany\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/29b584c1838d465016c06a1a88ca8b53.png\" alt=\"用 Geany 编辑一个 LaTeX 文档\"></p>\n<p style=\"text-align: center\"><em>你可以用 Geany 编辑 LaTeX 文档</em></p>\n<p><a href=\"https://www.geany.org/\">Geany</a> 是一个古老的编辑器，当我还在过时的硬件上运行轻量级 Linux 发行版的时候，<a href=\"https://www.geany.org/\">Geany</a> 就是一个优秀的的编辑器。Geany 开始用于我的 <a href=\"https://opensource.com/article/17/6/introduction-latex\">LaTeX</a> 编辑，但是很快就成为我所有的文本编辑的编辑器了。</p>\n<p>尽管 Geany 号称是轻量且快速的 <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\">IDE</a>（集成开发环境），但是它绝不仅仅是一个技术人的工具。Geany 轻便快捷，即便是在一个过时的机器或是 <a href=\"https://opensource.com/article/17/4/linux-chromebook-gallium-os\">运行 Linux 的 Chromebook</a> 也能轻松运行起来。无论是从编辑配置文件到维护任务列表或日志，从写文章或书籍到编写代码和脚本，Geany 都能轻松胜任。</p>\n<p><a href=\"http://plugins.geany.org/\">插件</a> 给 Geany 带来一些额外的魅力。这些插件拓展了 Geany 的功能，让你编码或是处理一些标记语言变得更高效，帮助你处理文本，甚至做拼写检查。</p>\n<h3 id=\"toc_2\">Atom</h3>\n<p><img class=\"aligncenter\" title=\"Editing a webpage with Atom\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/904bfb909e4b866fdd0ea84114924c80.png\" alt=\"使用 Atom 编辑网页\"></p>\n<p style=\"text-align: center\"><em>使用 Atom 编辑网页</em></p>\n<p>在文本编辑器领域，<a href=\"https://atom.io\">Atom</a> 后来居上。很短的时间内，Atom 就获得了一批忠实的追随者。</p>\n<p>Atom 的定制功能让其拥有如此的吸引力。如果有一些技术癖好，你完全可以在这个编辑器上随意设置。如果你不仅仅是沉迷技术，Atom 也有 <a href=\"https://atom.io/themes\">一些主题</a> ，你可以用来更改编辑器外观。</p>\n<p>千万不要低估 Atom 数以千计的 <a href=\"https://atom.io/packages\">拓展包</a>。它们能在不同功能上拓展 Atom，能根据你的爱好把 Atom 转化成合适的文本编辑器或是开发环境。Atom 不仅为程序员提供服务。它同样是适用于 <a href=\"https://opensource.com/article/17/5/atom-text-editor-packages-writers\">作家的文本编辑器</a>。</p>\n<h3 id=\"toc_3\">Xed</h3>\n<p><img class=\"aligncenter\" title=\"Writing this article in Xed\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/373e68f3b61bfb8ce53e9384462c982b.png\" alt=\"使用 Xed 编辑文章\"></p>\n<p style=\"text-align: center\"><em>使用 Xed 编辑文章</em></p>\n<p>可能对用户体验来说，Atom 和 Geany 略显臃肿。也许你只想要一个轻量级，一个不要太简陋也不要有太多很少使用的特性的编辑器，如此看来，<a href=\"https://github.com/linuxmint/xed\">Xed</a> 正是你所期待的。</p>\n<p>如果 Xed 你看着眼熟，那是因为它是 MATE 桌面环境中 Pluma 编辑器上的分支。我发现相比于 Pluma，Xed 可能速度更快一点，响应更灵敏一点——不过，因人而异吧。</p>\n<p>虽然 Xed 没有那么多的功能，但也不至于太糟。它有扎实的语法高亮，略强于一般的搜索替换和拼写检查功能以及单窗口编辑多文件的选项卡式界面。</p>\n<h3 id=\"toc_4\">其他值得发掘的编辑器</h3>\n<p>我不是 KDE 痴，当我工作在 KDE 环境下时， <a href=\"https://www.kdevelop.org/\">KDevelop</a> 就已经是我深度工作时的首选了。它很强大而且灵活，又没有过大的体积，很像 Genany。</p>\n<p>虽然我还没感受过对它的喜爱，但是我认识的几个人都用 <a href=\"http://brackets.io/\">Brackets</a> 感受到了。它很强大，而且不得不承认它的 <a href=\"https://registry.brackets.io/\">拓展</a> 真的很实用。</p>\n<p>被称为 “开发者的编辑器” 的 <a href=\"http://notepadqq.altervista.org/s/\">Notepadqq</a> ，总让人联想到 <a href=\"https://opensource.com/article/16/12/notepad-text-editor\">Notepad++</a>。虽然它的发展仍处于早期阶段，但至少它看起来还是很有前景的。</p>\n<p>对于那些只有简单的文本编辑器需求的人来说，<a href=\"https://wiki.gnome.org/Apps/Gedit\">Gedit</a> 和 <a href=\"https://kate-editor.org/\">Kate</a> 相比是极好的。它绝不是太过原始的编辑器——它有足够完成大型文本编辑的功能。无论是 Gedit 还是 Kate 都以速度和易上手而称名。</p>\n<p>你有其他 Emacs 和 Vim 之外的挚爱编辑器么？方便的话留言分享。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113596\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113596votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113596\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"},{"url_object_id": "8c2b134eaa2fb0c0b3718614b143e304", "title": "一个 IT 青年北漂四年的感悟", "url": "http://blog.jobbole.com/113560/", "create_date": "2018/02/01", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2014/06/859775776a1a7a89298b693482e0ef02.jpg"], "praise_nums": "1", "comment_nums": 4, "fav_nums": 0, "tags": "职场,北漂", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://bbs.csdn.net/topics/392063913\">xxj_1995</a>   </div><p>一直以来在内心中仿佛有两个人：一个人说你要<strong>实现理想</strong>，呆在中国最繁华的城市，感受大都市的生活，实现个人价值；另一个说还是<strong>回老家吧</strong>，过得安逸点，没什么压力，老婆孩子热炕头挺好的。其实这无所谓对错，只是个人的选择不同而已。</p>\n<p>在北京这几年每年都会有亲戚和同学来北京找我，每次我都会帮他们规划好游玩路线，带他们游玩一圈后把他们送到火车站。今年送一个朋友回家的时候，我多想能换一下位置，坐车回老家的那个是我。</p>\n<p><strong>做学生跟做白领是两种不同的状态</strong>，生活状态的差异会让你明显感觉到时间的流逝，我来北京四年，要是上大学的话都已经毕业了，而我现在跟刚来北京时的生活状态差别并不大，所以这才让我觉得时间过得好快。</p>\n<p>每次有同学问我什么时候回家，我总是笑笑，解释一下现在不能回家的理由，讲一些在老家工作的弊端，不能做自己喜欢的互联网之类的话。虽然理由每次都一样，说多了自己都感觉太敷衍，但同学却依然会时常问起，我也总想着，要是回家后就可以经常跟同学一起聚聚，玩伴多了，老家的同学好几个都买了车，如果去比较远的地方玩，开车也方便很多。</p>\n<p><strong>可这依然还只是想象而已。</strong></p>\n<p>人在相应的阶段就应该做相应的事情，最开始自己一个人，没有什么顾虑，年龄大了也会面临结婚、生孩子等一系列事情，有些事说起来不轻松，做起来就更难了。<strong>长大以后，发现自己真的不能为自己而活</strong>，自己是从农村出来的，虽然这个社会已经发展的很快，但是父母的传统思想还是很重，我不能太晚结婚，不能太晚生孩子，如果在适婚的年龄没有做相应的事，父母心里会一直惦记，这在他们心里会是一个结，了不去的心事。</p>\n<p>话虽这么说，但我还是<strong>不赞成为了满足父母的心愿，而勉强自己接受一段感情的做法。</strong>好在自己比较幸运，前几年找到了自己喜欢的女孩，父母也很满意。现在跟家里打电话，爸妈问的问题不再是有没有找到对象而变成了什么时候结婚。</p>\n<p>我爸跟我说只要我健康，有一份不错的工作（他也不盼我有多大的出息），他跟我妈就心满意足了，我妈说只要我好好的他们就觉得有希望，干活苦点累点他们也有动力。前几年我村里的一发小不小心因为车祸离世了，他爸妈就把自家的土地卖了很多，在我们那种地的多少意味着收入的多少，也意味着付出的多少。</p>\n<p>父母赚钱都是为了孩子，没有了孩子，只要钱能满足自己的生活就够了，所以也就没必要种那么多地了。我知道我妈是希望等我将来成家、有了孩子后，他们也可以少种点地，跟着我到城里享福。</p>\n<p>如果单讲农村人口收入的话，我想我们那边已经算不错的了，村里都是靠种苹果为生，这几年苹果的价格也在不断上涨，通常来讲每家一年的收入在十万左右。可直到现在我们村依然没有个像样的超市，每次看到电视上演的农村题材电视剧，人家村里的超市都让我非常羡慕，心想如果我们村有这样一个超市买东西会方便很多。</p>\n<p>跟村里商店的老板聊，为什么不把店面好好装修一下，扩大一下规模，他跟我说就现在这样东西都不好卖，扩大规模定是要赔，更何况赚不到钱，哪来的钱扩大规模。分析一下原因，在村里开超市消费人群少，村里的年轻人大多都在城里，每年回去也就一两次，即便回去买东西又能买多少呢，况且有的人回家时有些东西都已经从外边带了。我姥爷村原来有个比较大型的商店，当时我还挺羡慕的，这几年去姥爷家也发现那个商店的规模日益缩减，现在就只剩下一个货架了。虽然收入不错，但是村里的人还是很省，父母把钱都攒着输送给孩子。</p>\n<p><strong>在中国绝大多数年轻人买自己的房子都是靠父母出首付，更有甚者不仅父母需要出首付，还需要补给房贷。</strong>当然也有靠自己的努力挣钱的，不过是极少数。父母很辛苦，初期要给父母孩子准备房子，结婚了要准备彩礼钱，房子装修还需要出装修的钱，孩子买车也需要父母出钱，至于你说孩子的钱呢，只能回答你三个字——享受了。</p>\n<p>我哥说的是有道理的，城里人们的消费能力，一方面是来自于农村的父母的帮助，农村的父母把钱攒着给孩子买房子、补贴孩子的生活，这样孩子自己的钱就可以用来消费了。<strong>对于父母来说，应该只有等到孩子结婚有了孙子后，他们才会觉得踏实，而这也意味着不再需要再给孩子补贴钱了。</strong></p>\n<p>在我们那有一种说法，如果老人活到八、九十岁，去世之前能够看到自己的重孙子，就算是圆满了。人终有一天会离开，但是如果这样老人因自然老去而死，并且看到了第四代，也算没有什么遗憾了。我爷爷有两个儿子，我爸跟我大伯，各家都是独生子，以前我爷爷奶奶盼我哥结婚，我哥有了孩子之后现在又盼我结婚生孩子，希望能够看到我的孩子，每次给爷爷家打电话也总是会问我什么时候结婚。</p>\n<p>老人辛苦了一辈子，把自己的孩子操持了成家立业之后，年纪大了想干也干不动了，剩下的愿望就是<strong>盼着晚辈们越来越好</strong>。现在每次我爸给我打电话，他用低沉的语气跟我说话，我心里都会特别害怕，害怕跟我说家里的亲人去世的消息，我到现在都清晰的记得我大学室友那天早上被他爸的电话叫醒，告诉他爷爷去世了让他赶快回家，他接完电话就抱着头直哭的场景。远水解不了近渴，即便现在交通工具再发达从外地回家也是需要时间，很多人因为身在外所以没能见到亲人的最后一面。</p>\n<p>年龄大了，经历的事多了，对一些道理认识的也就更清了。刚毕业那会儿无意中跟一个同事聊起了关于公务员的话题，我那时候信誓旦旦的说公务员有什么好的，我同事说或许你现在感受不到，<strong>等过几年你就会知道在这个社会中公务员还是很有优势的。</strong>几年过去，我现在确实意识到了公务员的益处，理解了那么多人为什么要当公务员。</p>\n<p><strong>工作的稳定，福利的保障，不辛劳的工作，不低的社会地位</strong>，这确实是很多人期望的。最近我女朋友说她以前在老家工作是的两个前同事都考上了公务员，虽然她的薪水已经是这两个同事的好几倍，但我还是能看出来她对人家的羡慕。当初他们在一家公司上班，后来她来了北京，那两个同事都进了事业单位做了合同工，同时也在为考公务员做准备，幸运的是她们都成功了，我跟我女朋友说或许你们以后就会是两种完全不同的生活状态。</p>\n<p>我知道同行业内有些人对于公务员这工作挺不屑的，貌似一提起<strong>公务员总是伴随着无聊、没事干、人生没意义这样的关键词</strong>。互联网行业的人有个共同点就是总喜欢<strong>谈理想</strong>，当你跟别人说理想的时候别人会赞许你、羡慕你，可笑的是，<strong>多年之后那个没有理想的朋友在自己的工作中已经有所成就</strong>，而你却依然碌碌无为。</p>\n<p>我也研究过一些互联网公司的发展史，我发现有很多公司其实在创立初期创始人的想法也很简单，只是出于自己的兴趣而做某件事情，<strong>在做产品的过程中慢慢明确了发展目标，进而才会树立一个很大的理想。</strong>所以我现在已经不习惯把理想挂着嘴巴，闷头做事，<strong>事做好了有些事情也就顺其自然了。</strong></p>\n<p>一个事实是真的是有很多人是没有理想的，以前说想当科学家、当音乐家也只是徒于那种工作表面的风光而不是真正因为自己的兴趣喜欢。如果不是我高中的时候一个同学带我去网吧玩，接触到了网络，我想我跟大多数同学一样毕业以后可能就在当地找个工作干着，如果不喜欢，干烦了，就再换一个。</p>\n<p><strong>有的理想可能也只是干好自己的工作，希望在工作中取得某项成就</strong>这样的小愿望而已，万不会上升到改变世界、让人类的生活更加美好这样的高度。所以我也一直觉得自己是幸运的，这个时代有了互联网，要不还真的不知道自己能干什么。</p>\n<p>以前在老家的时候，总是听人说北京的消费很高，买瓶矿泉水都要 5 块钱这类的话。来北京后发现其实不是那么回事，客观来讲，北京的房价高、房租高，除了这两样外，物价跟其他地方差不多。拿某个做米线的品牌来讲，在北京的价格跟其它地方的价格是一样的，一碗米线 26 元，在北京的门店会早早的排起队，而在我们那县城到了饭点，店里还未坐满人。</p>\n<p>确实有 5 块钱的矿泉水，但要不就是在景区购买，要不就是那瓶水确实很贵。正常去超市买东西的话，北京的物价跟我们老家那差不多，并没有人们所说的那么夸张。但因为北京的商家多，有些品牌的东西贵就是因为其东西做的好，成本高，并不是因为在北京而故意提高价格。<strong>面临的诱惑多，所以你也会感觉钱花的很快。</strong></p>\n<p>我曾经还很幼稚的在思考一个问题，认为自己吃的东西跟在老家也差不多，虽然有时候会去不错的餐厅吃饭，但是每月也就固定的几次，为什么自己总是攒不下钱呢。后来一想，虽然你吃的东西跟家里差不多，但是某种食品在家里可能几天吃一次，在北京确是想吃都吃，上大学那会儿吃一次肯德基都不太容易，工作后每天的午饭都是肯德基，直到后来都把肯德基吃腻了。东西还是那些东西，<strong>可消费频率提高了，花的钱自然就多了。</strong></p>\n<p>很多人来北京都是受媒体和影视作品的宣传影响，因为电视上宣传的都是一幅高楼大厦，工作的人光鲜亮丽的景象，所以很多人也都幻想着来北京后能过上这样的生活。可是来到北京后会发现很多事情都不一样，特别是如果你的薪水不高的话，可能就只能住城市郊区的自建房或者是离市里很远的小区，你可能还会觉得自己住的地方都不如老家。</p>\n<p>曾经有同事问我，为什么互联网公司的员工都普遍比较年轻呢，我想一来是因为互联网在中国的历史就很短，到现在历史还不超过 20 年；二来是因为员工总是更新迭代吧，老员工年纪大了离开了公司去老家，刚毕业的年轻人进入到了互联网公司，增加了新的活力。</p>\n<p><strong>虽然互联网行业的平均薪水挺高，但互联网公司基本上都属于民企</strong>，所以在某些方面不太占据优势，例如<strong>户口</strong>，只有几个大的互联网公司才会有名额，而且数量还不多，这点确实不如一些央企、国企。<strong>中国是个有特殊国情的国家</strong>，户籍制度也是社会讨论热点的话题，其实如果没有户籍制度的话，<strong>北漂族们面临的最大的问题可能也就只是房价了。</strong></p>\n<p>我原来还想过<strong>有没有人研究一下北漂族最后的结果是怎样的</strong>，后来一想其实北漂也是近几年才有的，以前人们的收入差距没有这么大，大家的工作性质也差不多，特地去外地工作的人也不像现在这么多，所以即便是资深北漂也就 10 年多的时间，还看不出结果。</p>\n<p>不过通过我的观察，<strong>北漂的结果大概分为三类</strong>：一类是留在了北京，在北京买了房、有了户口，<strong>定居下来</strong>；一类是过着跟老婆孩子异地分居的生活，老婆和孩子在老家，自己在北京工作，<strong>固定频率回老家一次</strong>；还有一类是继续在北京呆着，依然过着租房的生活，孩子上学交着借读费<strong>，享受不到北京市民的待遇。</strong></p>\n<p>在任何一个国家有发展不均衡的现象，典型的如医疗，教育，行业发展也一样，如果是传统行业的话还好说一些，但是互联网行业由于他本身的一些特性，所以<strong>无论是发展环境还是对人才的吸引来说一线城市都要好很多</strong>。</p>\n<p>虽然这几年有所好转，一些二、三线城市已经有一些工作机会，<strong>我身边也有同事离开北京回到老家工作的，但有的最后还是回来了</strong>，薪水是一方面，最主要的还是<strong>工作氛围太差以及无法给自己很好的发展空间</strong>。</p>\n<p>最后，我在这里也感谢下我现在所在的公司——虽然公司去年才成立的，但是小伙伴们都很努力也很团结，跟大家一起工作，让我有家的感觉，希望公司能越做越大。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113560\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113560votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113560\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/c873cef021481b88547bef0339ded18597336ed5.jpg"},{"url_object_id": "e7d5e0e1724f9c4a23005b2e64c9d3c3", "title": "采访 Node.js 之父 Ryan Dahl", "url": "http://blog.jobbole.com/113585/", "create_date": "2018/01/31", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/cedafbf342cc1fd53e35bf644f1c5c84.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "访谈,Node.js,Ryan Dahl", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx232824506\">学以致用123</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.mappingthejourney.com/single-post/2017/08/31/episode-8-interview-with-ryan-dahl-creator-of-nodejs/\">mappingthejourney</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【伯乐在线导读】：</p>\n<blockquote><p>Ryan Dahl 现在是 Google Brain 的一个软件工程师。他是 Node.js 之父，Node.js 是一个基于 Chrome V8 JavaScript 引擎的 JS 运行环境。现在他从事深度学习研究项目，工作重点是彩色化和超分辨率等图像转换工作。他曾经贡献过几个开源项目，包括 HTTP Parse、libuv。</p>\n<p>2017 年 8 月 31 日 Ryan Dahl 做客于英文播客 mappingthejourney，分享了他的个人经历，开发 Node.js 的过程，对 Node.js 的理解，他在 Google (Brain) 的工作现状，对学习 ML 的看法等。</p></blockquote>\n<p><img class=\"size-full wp-image-113588 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/cedafbf342cc1fd53e35bf644f1c5c84.jpg\" alt=\"Ryan Dahl\"></p>\n<p style=\"text-align: center;\">—————-</p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Pramod: 大家好，欢迎来到 mapping the journey。当我们听到 Node.js 时就会想到 Ryan Dahl。他向我们展示了我们的I/O工作完全错误，并教会了我们如何使用纯异步编程模型来构建软件。我们今天的嘉宾就是 Ryan Dahl ，一个黑客、出色的程序员、也是 Node 之父。我们非常荣幸能够邀请到他，欢迎 Ryan。</span></span></p>\n<p><span class=\"md-line md-end-block\">Ryan: Hello！很高兴到这儿来。</span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: Ryan 我们知道您是Node之父，能跟我们聊聊做技术之前的经历吗?</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan: 当然，我在圣地亚哥 (San Diego) 长大，在我 6 岁的时候，我妈妈买了一台 Apple 2C ，所以我想我属于比较早接触电脑的人。顺便说一句，我今年 36 岁。因此，我是伴随着互联网长大的。我去了圣地亚哥的社区大学，然后在加州大学圣地亚哥分校攻读数学，毕业后在罗切斯特大学研究生院攻读数学博士。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">在那里我学习了代数拓扑学，那是一门非常抽象的课程，我当时非常讨厌这门课程，因为我感觉它与现实生活离得太远了，但是很多年后我发现这门课程非常棒。博士期间，我突然发现自己不想当个数学家，于是放弃了这个计划。然后我买了一张去南美的单程票并在那里呆了一年，在那里我开启了饥饿学习模式，并且找到一份和一个名叫 Eric 的家伙共同开发一些网站的工作。这就是我编程生涯的开始，使用 Ruby on Rails 为滑雪板公司开发网站。</span></span></p>\n<p> </p>\n<p><strong><span class=\"md-line md-end-block\"><span class=\"\">Pramod：很好！放弃博士学位、到南美旅行并成为一名 Web 开发者。</span></span></strong></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，在罗切斯特大学，我习惯于处理非常抽象的问题，然而在网站工作是一个非常具体的过程。但是我尝试着将这个过程变成一套很棒的数学理论，就像我在研究生院接触到的那样。我认为这让我想到了…我认为，我喜欢 Ruby 是因为它极大的改变了网站开发，我认为，在使用 Ruby 时，你可以很好的表达自己的想法。那在当时非常有趣。而且我认为Rails 给人留下了深刻的印象。它提出了新的结构(也可能这不是新的)，但是我认为 Rails 推广了模型视图控制器（MVC）结构。我对把这两件事情结合在一起非常感兴趣。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: 是的，建立网站非常有意思。Ruby 是非常棒的工具。接下来，你到德国成了一名 Web 开发的自由职业者，其中的一个项目就是 Node ，而且我认为你在接下来的六到八个月一直在做这项工作。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，离开南美之后我跟我的女朋友搬到了德国，因为她是德国人，而且她必须重返校园。在那里我开始参加 Ruby 会议，人们在那里讨论模型视图控制器（MVC）的新案例。如果我发音正确，其中一个家伙叫 Chris Neukirchen，他开发了一个 Rack 的项目对 Web 服务器进行简单抽象。一个 Web 服务器变成了一个函数接口，你可以从那里获得一个请求，然后返回一个响应。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">结合我为 Engineyard 的 Nginx 模块做的一些工作，让我想到如何…让我后退一步。在 Nginx 中，一切都是异步的。因此，当你为它新建一个模块时必须非常小心来保证它是非阻塞的。是的，我想 Chris Neukirchen 的 rack 和 Nginx 使用非阻塞 IO 架构 web 服务器的方法，让我开始思考如何能将这两件事情结合在一起。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: 现在，你有了结合 Rack 和 Nginx 的想法。你是如何说服自己用未来 6 个月的时间开发可以在服务器端运行 Javascript 的框架，这能大大提高性能吗？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan: 一边是 Rack 的简单 web服务器界面，一边是 Nginx 的异步部分，我一直在想这两个部分。然后2008年Chrome 发布，并且同时发布了 V8 JavaScript 解释器。它应该不算是解释器，它是一个很棒的运行环境。 V8 发布后，我开始对它进行分析，它看起来迷人而且干净，而且很快，突然之间我想到：JavaScript 是单线程的，已经实现了非阻塞。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">这有点儿讽刺，但在 web 浏览器中人们使用 AJAX 请求和事件时已经实现了非阻塞请求。哦，哇！我认为 JavaScript 结合异步 IO，再结合一些 HTTP服务器事件，将会变成一件非常酷的事情。我对这个想法感到非常兴奋，在接下来的四年里一直在做这项工作。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: 是的，JavaScript 与异步I/O 配合的很好。我相信开发人员都在等待看到一个实现这项功能的框架，我好奇的是，在那段时间里，你有导师或者能够相互讨论的人吗？还是只有你一个人。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：只有我自己，我有一些提供建议的程序员朋友，我的意思是，第一步绝对是我在自己的房间里完成的。但后来，我搬到了旧金山，在 Joyent 工作，在那里我遇到很多非常棒的编程专家。是的，在那之后许多人给我指导并且为 Node 贡献点子。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：很好，与我们分享一下开发 Node 的心路历程吧，我知道 Node 从 2009 年开始的，开发经历了很长时间。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：我觉得至少对于我自己而言，在我的生活中，没有比喜欢并且有坚信的想法更好的事情了。并且我有时间坐下来开发 Node 。我认为 Node 是一个等待发生但是还没做到的想法，别人或许能够做到。但是突然间我相对失业并且有空闲时间，可以不停的工作几个月，而这正是开发初步产品所需要的。这很棒而且很有趣。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：非常好，这太奇妙了。你确实做的非常棒。Node 建立在“纯异步”编程模型的基础上，你是怎么为 Node 想到这个点子的？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan:是的，我认为那是一个非常有趣的问题。现在已经过去好几年了。从 2012 年或 2013 年开始我没有再进行 Node 开发了。从这点来看，Node 是一个大项目。因此，是的，当初实现 Node 之后，我到处游说人们使用 Node。或许我们处理 I/O 的方式有错，或许我们以非阻塞的方式做所有事情将会解决编程过程中遇到的很多问题，比如我们可以完全忘记线程，只使用过程抽象和序列化通信。但是在一个过程中，完全异步方式可以处理很多很多的请求。那时我坚信这个观点，但是几年之后，我认为这可能不是编程的最终和全部想法。特别是当 Go 出现的时候。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">我认为 Go 很早之前就出现了，但我大约在 2012 年第一次听说 Go 。他们有一个非常好的运行环境，具有合适的绿色线程和易于使用的抽象。我认为阻塞 I/O（引号中的阻塞I/O），由于Go和操作系统的接口都是绿色线程，我认为那完全是非阻塞 I/O 。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">但是，他们给用户的接口是阻塞的，我认为这是一个更好的编程模型。如果阻塞，我们可以更加轻松的考虑大多数情况需要做的工作。你知道，如果有非常多的后续动作，这样做是很好的：做 A，等待一个响应或者一个错误；做 B，等待一个响应，出错。在 Node 中，这更加困难，因为必须跳转到另一个函数调用中。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: 是的，我喜欢 Go 的编程模型。使用 goroutines 如此简单有趣，事实上，我们用它来创建分布式应用。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan: 是的，我认为..对于特定类型的应用，比如说，我们要建一个服务器，我很难想象除了使用 Go 还能使用什么。意思是说，我认为 Node 的非阻塞编程对于没有线程的 JavaScript 非常好用。我认为很多需要跳转到多个异步函数来实现的回调问题，现在已经通过 JavaScript 异步特性-异步关键字缓解了。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">因此，在更新版本的 JavaScript 中，这更容易实现。这就是说，我认为 Node 不是构建大型服务器网站的最佳系统。我会用 Go 构建大型服务器网站，说实话，那是我离开 Node 的原因。我意识到：这不是有史以来最好的服务端系统。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">是的，我认为 Node 在客户端大放异彩，可以实现网站开发周边的一些脚本，比如打包客户端 JS 脚本的 Browserify。你可以实现所有客户端 JS 的服务端处理。然后可以做小型服务器……或许很小的开发服务器，或许是处理实时事务的一些真实服务器。Node 或许有用，或者说它可以是正确选择。但是如果要建立一个大规模的中心 DNS 服务器，我不会选择 Node。</span></span></p>\n<p><img class=\"alignnone size-full wp-image-113587\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/655fae32decc7a1224410af33ffc0f8a.jpg\" alt=\"Ryan Dahl -2\"></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：这对全世界所有的开发者来说应该是一个很好的选择。 为应用选择合适的工具非常重要。 你完全没有偏向 Node。 在 2009年柏林的 JsConf 上你介绍了 Node.js。 你会对突然获得的成功和拥簇感到惊讶吗？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，我的意思是，我基本上连续四年都处于惊喜之中。因为它发展的非常快，大家非常喜欢它。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：然后你加入 Joyant、全职开发 Node 并去了 SF ，对吗？体验如何？开发人员喜爱它，而你是这一切的核心。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：这绝对是我一生中，感觉自己处于会议和其他事情中心的体验。有一次去日本，人们要求我与他们合影，我意识到…我不知道，我很讨厌这种感觉。而且每当我在线上回复某件事情时，也将收到 100 条答复。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">因此，我感觉自己需要非常小心的选择用语以及表达自己的想法，因为好像大家都在倾听，这种感觉很奇怪。而且我不喜欢这种感觉。我的意思是，我是一个程序员，我愿意写代码，有时也会在没有仔细考虑的情况下发表个人观点。所以，我觉得我不是一个…是的，我不太喜欢这种感觉。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: 推出 Node 时你只有 29 ？30 岁？但是 Node 却有如此大的影响力。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，我的意思是，我绝对是个开发新手。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：好的，Ryan。原来会同时涌现很多服务器端 JavaScript 项目。Node 并不是唯一一个。你认为Node 的成功源于什么？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，有一些人尝试开发服务器端的 JavaScript 。我现在甚至不能说出他们的名字，而且我忘记了他们是谁。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">事情是这样的，他们都使用阻塞I/O ，因为没有线程，这与 JavaScript 结构一点儿关系都没有。使用阻塞I/O 理论上无法处理请求。比如，一次处理一个，这永远都没用。基于这个原因，还有我喜欢做这件事，让我能够坐下来并且开发运行良好的 HTTP 服务器。我有一个 demo 可以…我有一个 HTTP服务器（一个原始 TCP服务器）。并且我使这些服务器运行良好，这样大家可以坐下来不用花费多大力气就可以建一个网站。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">说实话，创建 web 服务器不是最简单的事情，我想这些系统中很多是留给社区做的，所以没有人做。因为没有什么可以使用的系统。我认为发布一个软件框架（或者任何软件）时，有一个 demo 可以让用户坐下来立即使用非常重要。这就是 Node 所做的事情之一。人们可以下载并直接使用 web 服务器。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: 是的，好的 demo、容易下载、安装和使用，这些会产生很大区别。而且，大家了解 JavaScript ，他们可以在任何时刻开始写代码。我开始使用 node 时感觉非常简单，因为我了解 JavaScript。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，我感觉我们理所当然地认为在语言之间切换非常容易。 我的意思是，即使你知道另外一种语言，但要做到这一点也会非常困难。 而且很多人对 Javascript 非常熟悉。 为他们提供能够在其他情况下使用的工具，可以激励人们。 你突然之间发现可以比以前做得更多。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：是的，在 2012 年 node 已经有了庞大的开发基础。那么为什么你要把它交给 Joyent 的 Isaac Schueter？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：有许多原因。我最主要的原因在于，那时我已经开发 Node 四年了。我已经实现了自己的愿望，我从来不希望 Node 成为一个庞大的 API 。我希望它是个小巧紧凑的内核，人们可以用它构建模块。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">还有一些重要的事情，我希望能够支持关键特性。因此很早就添加了扩展模块，我们实现了所有的网络库，HTTP、UDP、TCP，我们可以访问所有的文件系统。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">然后，一大块内容（差不多时五个人一年的工作）需要放到 Windows 中并且运行良好。而且我们希望使用 Windows 抽象（ IO完成端口）来实现异步IO 。所以，这需要重写核心库，最后做出的是 libuv 库。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">是的，但是在某些时候，所有这些都做完了，我们已经发布 Windows 版本了，而且你知道，它也运行良好。我的意思是，这是我本来打算实现的，我很高兴能够有机会实现。当然，之后会有无数的错误需要修正，但是……你看，有足够多的人参与进来。我没有必要去做这件事情，而且我希望其做些其他事情。再加上 Go 的发布，我认为 Node 不能够成为服务器的终极解决方案。而且，我发表博客文章时不希望成为关注的中心。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：很好，是的，有些人不喜欢出名。当你开始开发 Node 的时候，你肯定有一些目标，现在的 Node.js 实现这些目标了吗？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：我的意思..成千上万的人使用 Node (如果不是数百万人)，我认为这肯定超出了我对它的期望，是的，这很酷。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod: Rayan当你完成 Node 的奇妙之旅后，你决定做些什么呢？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：Node 之后，我搬到…我离开 Joyent 并且停止参与 Node 项目后，我搬到了纽约。花了一些时间在一些项目上。我有许多项目，你知道那时 Instagram 已经发布了，但是它很新而且看起来很简单，每个人都在说：哇，它是如此简单，我也可以开发这样的项目。我也这样想。因此，我有了一个社交网络项目；我有一个 C++ 编译系统项目，还有另一个 HTML 编译系统项目，与 Browserify 类似，它以一种更聪明方式打包 JavaScript 和 HTML。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">是的，我做了一大堆项目，但是没有一个项目让我心动。我认为可以推迟其中一些项目，比如我的社交网络项目，我可以在某些时候回头处理。是的，我开发了一段时间。然后我开始阅读关于……我开始了解卷积网络和如何解决图像分类，这让我对机器学习很感兴趣，</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod:你还是 Google Brain 见习项目的成员，给我们讲讲体验吧？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan: 是的，我只在山景城呆了一年。 因此，晚了一步，TensorFlow 两年前发布了。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">与此同时，他们宣布了这个 Google Brain 见习项目，他们邀请 20 个人参与 Google Brain ，Google Brain 是 Google 的一个机器学习研究实验室。 人们……我认为这个实验室的观点是并不一定要学过机器学习，如果你有一定的数学和编程背景，并且对机器学习感兴趣，那么请来这里并实现这些新想法。 因为机器学习变化很快，而且这里已经做了大量的工作。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">但是现在社区已经把机器学习的范围缩小到最有用的神经网络算法了，它可能只需要一些人实现神经网络，而这个新的 ML 框架就是TensorFlow，这将激发一些有趣的想法。 我在那里花了一年的时间，基本上是编写模型和模型文件。 我主要从事图像转换问题的研究。 所以，你知道，如果你有一些输入图像，你想预测一些输出图像。 我觉得这个问题很有趣，让我举一些例子。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">着色的问题。你可以使用黑白照片作为输入，尝试预测输出照片的颜色。这个问题最酷的地方在于有无限的训练数据。你可以拍摄任何彩色照片并去饱和，然后它就成了输入照片，对吧？</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">机器学习的一个问题是需要大量数据，然而对于这类任务，数据将不再是一个问题。而且，最近出现了大量生成模型的工作（输出图像的模型），特别是出现了对抗性网络和像素 CNN，这些模型已经展示了学习自然图像多样性的能力，就像真正理解真实图像是什么、什么不是真实图像、什么看起来像真实形象。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">我的想法是在生成模型中使用这些最新模型，并采取无限的训练数据，看看能否解决一些图像转换问题。 所以，我做了一些超分辨率的工作，也就是提高低分辨率图片的分辨率。 这也是一个图像转换的问题。 现在我已经完成了两个着色的项目。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：很好的解释，Ryan。是的，我认为 TensorFlow 是处理许多机器学习问题的好平台。我不太了解图像分类、转换，但我相信这一定很有趣。你还在继续做 ML 的工作吗？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，我现在还在 Google（作为一个软件工程师）从事这种类型的工作，研究生成模型，并尝试帮助研发人员建立下一代的生成系统，下一代的生成模型。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：生成模型与你之前从事的 node 或 web开发工作使用的 JavaScript 差别是如此之大。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，我想也是。但是我是数学专业，所以我想我有相当不错的数学基础。是的，我认为人们喜欢把别人固定到特定领域，我不想这样做。我不想成为一个 JavaScript 专家，我不想成为一个机器学习专家，我认为探索可能性非常有趣。令人兴奋的是，做以前没做过，并且能够以某种方式令人受益的事情。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：很好，是的，机器学习需要好的数学基础。在你最近一篇关于乐观虚无主义的博客中，你说我们有朝一日能够模仿大脑、开发一个像人类一样理解和思考的机器，我们离实现这个目标还有多远？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，我要对这种说法更谨慎一些…我的意思是，这是我的个人观点。我们开发的东西远不及人类的智慧。我的意思是，我们使用的机器学习系统非常简单，根本不会工作。实际上，我有一篇关于我的见习的文章，我在那篇文章中列举了开发这些模型的所有困难。我认为不从事这类工作的人们可能会有这样的想法，你可以采用这类模型然后输入一些数据，它就能工作了。但事实并非如此，这些模型非常挑剔，而且还没有被很好的理解，要花费很多个月的时间进行精心调整和试验，才能得到相似的结果。</span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">所以，我们离它很远，但是我认为基础……最近有一些有希望的技术得到了改进，卷积网络似乎起作用了，而且 propagation 似乎也正在起作用。事实上，这些东西都建立在模型基础上的，这个神经网络模型不像大脑一样工作，但是以大脑的某种方式激发，这是非常诱人的。我们也有 GPU，我们展示了如何在这些方面训练它和如何通过 GPU 进行分布式训练。所以，我认为出现了建立更大、更智能的系统的基础。而且，我个人认为，我是一个无神论者，我相信我们的大脑中除了化学物质和神经元之外再没有别的东西了。而且我认为我的意识，我们所有的意识都以某种方式都被编码到这些神经元之间的相互作用中。所以，我不明白我们为什么不能通过足够的研究和工作来模仿这种行为。当然，现在还远远没达到能够预测需要多久能够实现的程度。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod:很棒，你已经看到了这一切，Ryan 你认为未来 20 年技术将在哪些领域发展？</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：我对机器学习和它带来的可能性感到非常兴奋。我认为即使在我们实现真正的人工智能之前，这种技术也非常有用。我的意思是，你使用的任何系统都将从这项技术中受益匪浅，比如佩戴智能眼镜将会帮助你。有无数的工业过程可以利用这项技术。比如使用计算机视觉的进行分拣回收的回收中心。我的意思是，将有很多很多系统可以从简单的机器学习系统中受益。而且我们会不断看到这些系统适用于不同的流程。所以，我认为这将对科技行业产生重大的影响，对人类都将产生很大的影响。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：是的，机器学习令人兴奋。我在山景城看到自动驾驶汽车时非常兴奋。有一天我会坐到后面并把控制完全交给汽车。Ryan，谢谢你带给我们如此出色的 Node 框架，谢谢你参加这次节目。祝你好运，和你聊天的感觉非常棒。</strong></span></span></p>\n<p><span class=\"md-line md-end-block\"><span class=\"\">Ryan：是的，很棒，感谢你邀请我。很高兴能够和大家分享这些。</span></span></p>\n<p> </p>\n<p><span class=\"md-line md-end-block\"><span class=\"\"><strong>Pramod：谢谢你。这就是所有内容了，听众们。我真的非常喜欢与 Ryan 聊天，他谦虚而且受人尊敬。他早些年在科技领域取得了如此大的成就，这是一个非常鼓舞人心的故事。再见，我们两周以后会踏上另外一个有趣的旅程，Shukriya。</strong></span></span></p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我翻译更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏译者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我翻译更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/11eefac5bf4ae36c73b7b40eb087be7b.jpg\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/10/02a9f7817f8dd0012ff1327fde5bdc94.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113585\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113585votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113585\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">学以致用123</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            应用软件开发，主要用python、sql        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx232824506\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx232824506/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx232824506/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 20</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/5e826dbb92c991b58a09612202e0b546879e2891.jpg"},{"url_object_id": "0208b3d12db7cfc54ed61c6f01dabacd", "title": "2018 年，程序员要具备哪些核心竞争力？", "url": "http://blog.jobbole.com/113525/", "create_date": "2018/01/25", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/07/b82c41ce36630a47a22e10059671eb52.jpg"], "praise_nums": "1", "comment_nums": 6, "fav_nums": 6, "tags": "职场,程序员,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>近日国外开发者平台 HankerRank 发布了 2018 年开发者技能调查报告，本文摘录程序员求职时必备技能相关的调查结果。</p>\n<h3>雇主招人时，看中哪些核心竞争力？</h3>\n<ol>\n<li>问题解决能力（不管企业大小，都排第1）</li>\n<li>编程语言熟练程度（不管企业大小，排第2）</li>\n<li>调试（不管企业大小，排第3）</li>\n<li>系统设计（综合排第4）</li>\n<li>性能优化（综合排第5）</li>\n<li>剩下见下图</li>\n</ol>\n<p>相比中大型公司，小公司更为看中开发者对框架的熟练程度。因为小公司追求快启动，框架有助于开发者更快速地的推送代码。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fnrq4faqh7j20fz0bhta9.jpg\"></p>\n<h3>雇主招人时，看中哪些任职资质？（普通招聘人员角度）</h3>\n<ol>\n<li>经历/经验</li>\n<li>portfolio/作品集（GitHub是开发者展现个人项目最佳方式之一）</li>\n<li>教育（学历/学位）</li>\n<li>培训（技能认证/证书）</li>\n<li>个人品牌</li>\n</ol>\n<p>有一种流行的观点认为，招聘人员更中意有名牌大学 CS 学位的人选。但事实证明，他们实际上关心的是你所做的，而不是你上学的地方。绝大多数的招聘经理表示，他们寻找开发者的技能证明，比如以往工作，多年的经验和项目/ GitHub。无论公司规模大小如何，90% 的招聘人员表示更看中开发者的「以往工作经验」和「多年的经验」。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fnrq4fw738j20fi0b5js3.jpg\"></p>\n<h3>主管们最看中什么样的任职资质？</h3>\n<ol>\n<li>portfolio/作品集（GitHub是开发者展现个人项目最佳方式之一）</li>\n<li>以往工作经验</li>\n<li>工作年限</li>\n<li>教育（学历/学位）</li>\n<li>培训（技能认证/证书）</li>\n<li>个人品牌</li>\n</ol>\n<p>现在很多公司在招 IT 技术人才时，会查看候选人的 GitHub 上的实际项目，以作为简历之外的技能评估补充。相比多年工作经验，创始人、CTO、VP 等主管人群更看重 GitHub 上的项目。</p>\n<p>他们不像普通招聘人员（HR）那样看重「学历/学位」。这可能是因为候选人进入由高管面试轮时，上一轮的 HR 已经筛选过了。到了这一轮时，有更多时间来根据以往项目来评估候选人的技能。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3ly1fnstmvkb7rj20fm0anq3p.jpg\"></p>\n<h3>相关文章</h3>\n<p>《<a href=\"http://blog.jobbole.com/113526/\" target=\"_blank\">2018 开发者技能调查：这些编程语言受欢迎</a>》</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113525\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113525votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113525\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 261</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/8d41e17ba24bd494b959911d8123d0072c41e2a8.jpg"},{"url_object_id": "5bb4f1cb2252b8e83b3d47a9a443b99d", "title": "如何开始做一个开源项目？他的亲身经历值得参考", "url": "http://blog.jobbole.com/113602/", "create_date": "2018/02/02", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/09/f1a3d556b79a7fae23ad3ecc6f972164.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,开源", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2018329974\">nEoYe</a> 翻译，<a href=\"http://www.jobbole.com/members/nzbin\">叙帝利</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://blog.algolia.com/start-your-open-source-career/\">Vincent Voyer</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：作者 Vincent Voyer 用亲身经历鼓励大家从事开源活动：他在 Nodejs 源码里改了两个字符，解决了内存泄漏，信心大增；没找到合适的图片 lazy load 的库，自己动手做，竟被印度电商巨头的网站用上了，信心倍增。</p>\n<hr>\n<p>今年我做了一次演讲，内容是如何让我们的开源项目获得其他人的贡献，比如提问、写文档或者更新代码，从而打造一个成功的开源项目。在这次演讲结束后，我得到了这样的反馈：“你展示了如何开发一个成功的开源项目，但是我应该怎样开始一个开源项目呢？”。本文便是来回答这个问题的。文章阐述了如何开始贡献开源代码以及如何创建自己的开源项目。</p>\n<p>本文分享的知识是基于我们的工作经验：在 Algolia 工作时，我们发布和维护了许多成功的<a href=\"https://github.com/algolia\">开源项目</a>，它们都经过了长时间的检验。同时，我也花了很多时间来练习和创建自己的<a href=\"https://github.com/vvo\">开源项目</a>。</p>\n<h1>开始我们的开源项目之旅吧</h1>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/ca5cad177a504c81d56c61f9392ed096.png\" alt=\"\"></p>\n<p>我职业生涯的关键时刻是六年前我在 <a href=\"https://www.fasterize.com/en/\">Fasterize</a>（一家做网站应用加速的公司）工作的时候。在 <a href=\"https://nodejs.org/en/\">Node.js</a> 工作进程中，我们遇到了一个很严重的<a href=\"https://en.wikipedia.org/wiki/Memory_leak\">内存泄漏</a>问题。除了 Node.js 源码库，我们找遍了所有可能引发这个问题的地方，结果一无所获。我们的临时解决办法是每天重启这些工作进程（这会使内存使用量归零），但是我们知道这不是一个优雅的解决办法，所以我想从整体考虑问题。</p>\n<p>当我的联合创始人 <a href=\"https://www.linkedin.com/in/stephanerios/\">Stéphane</a> 建议我检查一下 Node.js 的源码时，我几乎笑了出来。我想：“如果有 bug，很可能来自我们自己的代码，而不是来自于创造革命性服务器端框架的开发人员代码。但是，我还是会看一下的”。两天之后，我提交的 <a href=\"https://github.com/nodejs/node-v0.x-archive/pull/3181#issue-4313777\">2 个字符的改动</a>被合并到了 Node.js 的源码中，修复了 http 层的 bug，解决了内存泄漏问题。</p>\n<p>这次的举动给予了我足够大的信心。http.js 文件的其他 30 个代码贡献者都是我崇拜的人，比如 <a href=\"https://github.com/isaacs/\">isaacs</a>（npm 的创造者）—— 这使我明白了不管是谁写的代码，都可能会有瑕疵。</p>\n<p>在使用开源项目的时候，你是否遇到了 bug？尝试查阅源码，不要停留在本地的代码上。你的答案会使其他人收益，引导着你去给更多的开源项目做贡献。阅读其他人的代码，也许不能马上解决你的问题，而且需要花费很长时间才能理解源码，但是你会学到新的模块，新的语法以及编码的不同技巧，这些都会促使你成为一名出色的开发者。</p>\n<h2>抓住贡献开源项目的机会</h2>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/a13423fd1a76761a08fde38801ac6ca2.png\" alt=\"\"></p>\n<p style=\"text-align: center;\"><a href=\"https://github.com/nodejs/node/labels/good%20first%20issue\">Node.js 源码仓库</a>的第一个贡献标签</p>\n<p>“我没有好想法”，这是那些想为开源做贡献，但又自认为没有好的点子或项目来分享的开发者通常会抱怨的一点。那么，我会说：没关系。为开源做贡献的机会有很多。许多项目已经开始通过分类或标签列出那些优秀的首次贡献者。</p>\n<p>你可以通过浏览这些网站获得一些开源灵感：<a href=\"https://opensourcefriday.com/\">Open Source Friday</a>，<a href=\"http://www.firsttimersonly.com/\">First Timers Only</a>，<a href=\"https://yourfirstpr.github.io/\">Your First PR</a>， <a href=\"https://www.codetriage.com/\">CodeTriage</a>，<a href=\"https://24pullrequests.com/\">24 Pull Requests</a>，<a href=\"http://up-for-grabs.net/\">Up For Grabs</a>， <a href=\"https://contributor.ninja/\">Contributor-ninja</a> 和 <a href=\"https://github.com/Roshanjossey/first-contributions/\">First Contributions</a>。</p>\n<h2>创建一些工具</h2>\n<p>创建工具是帮助他人的一种很好的方式，而且不用考虑太多复杂的问题或 API 设计。你可以开发一个你最喜欢的框架或平台的模板。你可以将从许多博客上学到的知识和工具集中到一个项目中进行很好的诠释，并做好随时更新和发布新特性的准备。<a href=\"https://github.com/facebookincubator/create-react-app\">create-react-app</a> 是这种开源工具的一个优秀案例.</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/5ff16a7bfd56db6e7639b46288119561.png\" alt=\"\"></p>\n<p>在 GitHub 上有 <a href=\"https://github.com/search?utf8=%E2%9C%93&amp;q=boilerplate&amp;type=\">5 万 8 千多个开源模板仓库</a>，开发一个这样的项目比较容易而且受欢迎。</p>\n<p>今天，你也可以开发 <a href=\"https://github.com/blog/2231-building-your-first-atom-plugin\">Atom</a> 和 <a href=\"https://code.visualstudio.com/docs/extensions/overview\">Visual Studio Code</a> 的纯 JavaScript 插件，比如我们开发了 <a href=\"https://blog.algolia.com/atom-plugin-install-npm-module/\">Atom 自动补全模块导入的插件</a>。那些 Atom 或 Sublime Text 中的优秀插件是不是还没有出现在你喜欢的编辑器中？赶快去开发一个吧。</p>\n<p>最后，你也可以为 <a href=\"https://webpack.js.org/contribute/writing-a-plugin/\">webpack</a> 或 <a href=\"https://github.com/thejameskyle/babel-handbook\">babel</a> 开发插件，用于解决 JavaScript 技术栈的特殊用例。</p>\n<p>好消息是，很多平台都会告诉你如何去创建和发布插件，所以你不用花费太多的时间去思考怎么下手。</p>\n<h2>成为新的维护者</h2>\n<p>当你在 GitHub 上浏览项目时，你也许会发现和使用那些创建者不再维护的项目。虽然它们有价值，但还有很多创建者没有回答的 issues 和 pull requests 。这时你会怎么做？</p>\n<ul>\n<li>fork 一份并用一个新名字发布</li>\n<li>成为新的维护者</li>\n</ul>\n<p>我建议你两者都做。前者有助于推进你自己的项目，而后者对你自己和社区都有好处。</p>\n<p>你会问，那么如何成为一个新的维护者呢？向创建者发一封邮件或推特，说：“你好，我想继续维护这个项目，你觉得可以吗？”这种方式通常效果不错。这是开始你自己的开源项目的好办法，因为这个项目已有很多人知晓和受益。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c32c679ea325cb60df5f7830c33c43ec.png\" alt=\"\"></p>\n<p style=\"text-align: center;\">成为新维护者的<a href=\"https://twitter.com/vvoyer/status/744986995630424064\">推特消息示例</a></p>\n<h1>创建你自己的开源项目</h1>\n<p>创建自己的开源项目最好的方式是寻找那些至今还没有很好的解决方案的问题。如果你发现你在网上没有找到能解决你问题的特定的库，那么这正是去开发一个开源库的好时机。</p>\n<p>下面是我职业生涯中另一个<strong>关键点</strong>。在 Fasterize 工作时，我们的网站性能加速器需要一个快速、轻量级的图片延迟加载库 —— 不是一个 jQuery 插件，而是一个单独的项目，它必须能嵌入所有浏览器的所有网站并正常工作。我花了数个小时在网上搜索已经存在的优秀的开源库，可是最终没有找到合适的。所以我说道：“完蛋了。我不能找到一个完美的开源库，我们的工作没法开展了。”</p>\n<p>对于这种情况，Stéphane 回复说：“那么，我们自己来创造一个吧”。嗯..好吧！我将 <a href=\"https://stackoverflow.com/questions/3228521/stand-alone-lazy-loading-images-no-framework-based\">StackOverflow 上的一段答案</a>复制粘贴到了我的 JS 文件中，就这样开始了我自己的开源项目之旅。最终，我创建了一个<a href=\"https://github.com/vvo/lazyload\">图片延迟加载的库</a>，它被像 Flipkart.com（每月大约 2 亿的访问量，在印度排名第 9）这样的网站使用着。有了这次成功经历之后，我便无时不刻关注着开源项目。我突然意识到，开源项目可以成为我程序员职业生涯的另一部分，而不是仅有传奇人物和<a href=\"http://antirez.com/news/112\">能力超群的程序员</a>才能做开源项目。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/a22d4ad2e70c2d937cb96293db4a6ac9.png\" alt=\"\"></p>\n<p style=\"text-align: center;\">一个没有好的解决方案的问题：可以尝试以重用的方式解决它！</p>\n<p>时间点很重要。如果你不打算创造一个可重用的库，而是在自己的项目中写一些只适用于你系统的代码，那么你便错失了一次机会。在某个时刻，其他人会开发出你之前可能有机会做出的项目。所以与其被他人抢先一步，你应该尽快从你的项目中抽离和发布可重用的模块。</p>\n<h2>发布，宣传和分享</h2>\n<p>为了确保任何想使用你的模块的开发者能确切地找到你的开源项目，你需要做到以下几点：</p>\n<ul>\n<li>你的 <a href=\"https://opensource.guide/starting-a-project/#writing-a-readme\">README</a> 文档上需要有<a href=\"https://shields.io/\">徽章</a>和虚荣指标</li>\n<li>开发一个有着漂亮的设计和在线演示的网站来专门介绍说明你的项目。需要一些灵感么？看一下 <a href=\"https://github.com/prettier/prettier\">Prettier</a> 吧。</li>\n<li>在 StackOverflow 和 GitHub 上回答一些相关的问题，并在答案中写上你的开源项目</li>\n<li>将你的项目发布到 <a href=\"https://news.ycombinator.com/submit\">HackerNews</a>、<a href=\"https://www.reddit.com/r/programming/\">reddit</a>、<a href=\"https://www.producthunt.com/\">ProductHunt</a>、<a href=\"https://hashnode.com/\">Hashnode</a> 和任何其他技术社区网站</li>\n<li>将你的新项目推荐到相关技术平台的新闻媒体</li>\n<li>和别人交流你的项目，或做一次演讲<br>\n<img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/b55e7f35e70a66a7b51564a69ad43cb4.png\" alt=\"\"></li>\n</ul>\n<h2>向大家展示你的新项目</h2>\n<p>不要害怕向网站投稿；只要你真的相信自己的项目是有价值的，那些网站从来不嫌文章太多。通常，技术社区都是十分欢迎大家投稿分享的！</p>\n<h2>要有耐心，不要怕迭代</h2>\n<p>在“虚荣指标”（stars 数和下载数量）方面，有些项目在第一天会迅速飙升，但是很快会停止增长。而其他人，在他们准备好登上 Hacker News 首页之前，也许需要等上一年。你要相信，你的项目在某一时刻会被他人所注意到，如果没有，那么你也学到了一件事情：这个项目可能只对你有价值 —— 这为你下一个项目的成功做了铺垫。</p>\n<p>我有许多 0 个 stars 的项目（比如 <a href=\"https://github.com/vvo/mocha-browse\">mocha-browse</a>），但是我从来不沮丧，因为我没有很高的期待。在开始做一个项目时，我总是这么想：我发现了一个问题，我用我自认为最好的方式解决了它，也许有的人会使用我的方法，也许没有。这不是什么大不了的事情。</p>\n<h2>一个解决方案，两个项目</h2>\n<p>这是我做开源项目最喜欢的部分之一。2015 年，在 Algolia 工作时，我们尝试寻找单元测试的解决方案，暂停了为 React UI 库 <a href=\"https://community.algolia.com/instantsearch.js/\">InstantSearch.js</a> 编写 React 组件时用 <a href=\"https://reactjs.org/docs/jsx-in-depth.html\">JSX</a> 输出 html 。</p>\n<p>由于 JSX 会被转换成函数调用，当时我们的解决方案是写成这样<code>expect(&lt;Component /&gt;).toDeepEqual(&lt;div&gt;&lt;span/&gt;&lt;/div)</code>。这只是比较两个函数调用的输出结果。但是这两个方法输出的是复杂的对象：当运行这段代码时，会出现“Expected {-type: ‘span’, …}”这样的错误。输入和输出结果无法进行对比，所以当开发者们写单元测试时，他们会疯掉的。</p>\n<p>为了解决这个问题，我们创造了 <a href=\"https://github.com/algolia/expect-jsx\">algolia/expect-jsx</a>，它可以在单元测试中输出对比 JSX 字符串，而不是输出无法阅读的对象。输入输出的测试会使用相同的语义。我们并没有就此停止。我们从代码中又提炼开发出了另一个库，并最终发布了两个开源库，而不是一个：</p>\n<ul>\n<li><a href=\"https://github.com/algolia/react-element-to-jsx-string\">algolia/react-element-to-jsx-string</a> 将 JSX 的函数调用转换成 JSX 字符串的库</li>\n<li><a href=\"https://github.com/algolia/expect-jsx\">algolia/expect-jsx</a> 将断言库 <a href=\"https://github.com/mjackson/expect\">mjackson/expect</a> 和上方的 react-element-to-jsx-string 库结合了起来</li>\n<li>通过发布两个模块来共同解决一个问题，社区的开发者可以将你的低级方案在不同的项目中重用。甚至，他们会以一种你从未想到过的方式来使用你的模块库。<br>\n比如，react-element-to-jsx-string 已经被使用到了许多其他的<a href=\"https://www.npmjs.com/browse/depended/react-element-to-jsx-string\">测试断言框架</a>中，同时也被用到了像 <a href=\"https://github.com/storybooks/addon-jsx\">storybooks/addon-jsx</a> 这样的文档插件中。现在，一般都使用 <a href=\"http://facebook.github.io/jest/docs/en/snapshot-testing.html#snapshot-testing-with-jest\">Jest and snapshots testing</a> 来测试你的 React 组件的输出，在这些场景下已经用不上 expect-jsx 了。</li>\n</ul>\n<h2>反馈和贡献</h2>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/01/47af4661b34bbc7b98458d44f4a80c52.png\" alt=\"\"></p>\n<p>图中有许多 issues。其实这只是为了好看而使用的假数字🙂</p>\n<p>一旦你开始收到反馈和贡献代码，你要以一种开放和乐观的心态去面对它们。你会得到热情的反馈，但也会有负面的评论。记住，与用户的任何互动都是可以看作一种对于项目的贡献，即使有些看起来像是在抱怨。</p>\n<p>首先，用文字来表达意图和语气不是那么的容易。“这很奇怪…”也许会被你解读成：这很棒/这实在是很糟糕/我不理解/我很开心/我很沮丧。询问更多的细节，尝试重新解读这个问题，来更好地理解问题的根源。</p>\n<p>避免抱怨的一些建议：</p>\n<ul>\n<li>为了更好地引导用户提出反馈，可以提供一个<a href=\"https://github.com/blog/2111-issue-and-pull-request-templates\">问题反馈模板</a>，让他们在提问时可以参考。</li>\n<li>尽量对新贡献者的严苛程度降到最低。请记住，他们可能还没有测试，并很乐意向你学习。不要由于少个分号而对于新的贡献者的 Pull Requests 置之不理。让他们感受到温暖。你可以礼貌地要求他们把分号加上。如果，这样不行，你也可以就这样将 Pull Request 合并，然后自己完成测试和文档工作。</li>\n<li>提供一个良好的开发环境，包括自动化测试、<a href=\"https://stackoverflow.com/questions/8503559/what-is-linting\">错误检查</a>和代码格式化或自动刷新示例。</li>\n</ul>\n<h2>总结</h2>\n<p>感谢阅读，我希望你们能够喜欢这篇文章，并帮助你们创建开源项目。贡献开源代码是拓展技能的好办法，并不是每个开发者都需要有这种经历，但是这是一个让你快速进步的好机会。</p>\n<p>我很期待你的第一个或下一个开源项目。记得在推特上 <a href=\"https://twitter.com/vvoyer\">@vvoyer</a>，我会很乐意给你的项目提出建议。</p>\n<p>如果你喜欢开源项目，同时想在工作中去贡献开源代码而不是在你的空闲时间，Algolia 有相应的 <a href=\"https://www.algolia.com/careers#60c7c780-1009-4030-8e44-f653fa2ebd36\">JavaScript 开源项目研发的职位</a>。</p>\n<p>你可能会喜欢的其他资源：</p>\n<ul>\n<li><a href=\"https://opensource.guide/\">opensource.guide</a>，学习如何创建和提升你的项目。</li>\n<li><a href=\"https://octobox.io/\">Octobox</a>，将 GitHub 的通知以邮件的形式发送给你。一个很棒的方式让你避免由于 issues 太多，而忽视了其中重要的问题。</li>\n<li><a href=\"https://probot.github.io/\">Probot</a>，一个GitHub 的 App，帮助提升你的工作流程，使其更自动化，比如关闭时间久远的 issues。</li>\n<li><a href=\"https://github.com/sindresorhus/refined-github\">Refined GitHub</a> 为 GitHub 界面在许多层面提供了更好的体验和特性。</li>\n<li><a href=\"http://octolinker.github.io/\">OctoLinker</a> 给你更好的体验来查看他人的 GitHub 代码。<br>\n感谢 <a href=\"https://twitter.com/voiceofivana\">Ivana</a>，<a href=\"https://www.linkedin.com/in/tiphaine-gillet-01a3735b/\">Tiphaine</a>，<a href=\"https://twitter.com/adrienjoly\">Adrien</a>，<a href=\"https://twitter.com/dzello\">Josh</a>，<a href=\"https://twitter.com/codeharmonics\">Peter</a> 和 <a href=\"https://twitter.com/rayrutjes\">Raymond</a> 对于这篇文章的帮助、建议和贡献。</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113602\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113602votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113602\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2018329974\">nEoYe</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2018329974\">\r\n\t\t\t<img src=\"http://tp4.sinaimg.cn/2018329974/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            喜欢唱歌和游戏的程序员        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2018329974\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2018329974/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2018329974/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 12</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://neoyeelf.github.io\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2018329974\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/70c7b887c37d9154dc2b5636ed919464c716d375.jpg"},{"url_object_id": "70044049fff6d293d468dc718cb06690", "title": "聊聊分布式事务，再说说解决方案", "url": "http://blog.jobbole.com/112749/", "create_date": "2018/02/01", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/10/0923ab0f6010ed3be33f3fcb0b40a49c.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,分布式,数据库", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/savorboard/p/distributed-system-transaction-consistency.html\">杨晓东</a>   </div><h3 id=\"前言\">前言</h3>\n<p>分布式事务是企业集成中的一个技术难点，也是每一个分布式系统架构中都会涉及到的一个东西，特别是在微服务架构中，几乎可以说是无法避免，本文就分布式事务来简单聊一下。</p>\n<h3 id=\"数据库事务\">数据库事务</h3>\n<p>在说分布式事务之前，我们先从数据库事务说起。 数据库事务可能大家都很熟悉，在开发过程中也会经常使用到。但是即使如此，可能对于一些细节问题，很多人仍然不清楚。比如很多人都知道数据库事务的几个特性：原子性(Atomicity )、一致性( Consistency )、隔离性或独立性( Isolation)和持久性(Durabilily)，简称就是ACID。但是再往下比如问到隔离性指的是什么的时候可能就不知道了，或者是知道隔离性是什么但是再问到数据库实现隔离的都有哪些级别，或者是每个级别他们有什么区别的时候可能就不知道了。</p>\n<p>本文并不打算介绍这些数据库事务的这些东西，有兴趣可以搜索一下相关资料。不过有一个知识点我们需要了解，就是假如数据库在提交事务的时候突然断电，那么它是怎么样恢复的呢？ 为什么要提到这个知识点呢？ 因为分布式系统的核心就是处理各种异常情况，这也是分布式系统复杂的地方，因为分布式的网络环境很复杂，这种“断电”故障要比单机多很多，所以我们在做分布式系统的时候，最先考虑的就是这种情况。这些异常可能有 机器宕机、网络异常、消息丢失、消息乱序、数据错误、不可靠的TCP、存储数据丢失、其他异常等等…</p>\n<p>我们接着说本地事务数据库断电的这种情况，它是怎么保证数据一致性的呢？我们使用SQL Server来举例，我们知道我们在使用 SQL Server 数据库是由两个文件组成的，一个数据库文件和一个日志文件，通常情况下，日志文件都要比数据库文件大很多。数据库进行任何写入操作的时候都是要先写日志的，同样的道理，我们在执行事务的时候数据库首先会记录下这个事务的redo操作日志，然后才开始真正操作数据库，在操作之前首先会把日志文件写入磁盘，那么当突然断电的时候，即使操作没有完成，在重新启动数据库时候，数据库会根据当前数据的情况进行undo回滚或者是redo前滚，这样就保证了数据的强一致性。</p>\n<p>接着，我们就说一下分布式事务。</p>\n<h3 id=\"分布式理论\">分布式理论</h3>\n<p>当我们的单个数据库的性能产生瓶颈的时候，我们可能会对数据库进行分区，这里所说的分区指的是物理分区，分区之后可能不同的库就处于不同的服务器上了，这个时候单个数据库的ACID已经不能适应这种情况了，而在这种ACID的集群环境下，再想保证集群的ACID几乎是很难达到，或者即使能达到那么效率和性能会大幅下降，最为关键的是再很难扩展新的分区了，这个时候如果再追求集群的ACID会导致我们的系统变得很差，这时我们就需要引入一个新的理论原则来适应这种集群的情况，就是 CAP 原则或者叫CAP定理，那么CAP定理指的是什么呢？</p>\n<h4 id=\"cap定理\">CAP定理</h4>\n<p>CAP定理是由加州大学伯克利分校Eric Brewer教授提出来的，他指出WEB服务无法同时满足一下3个属性：</p>\n<ul>\n<li>一致性(Consistency) ： 客户端知道一系列的操作都会同时发生(生效)</li>\n<li>可用性(Availability) ： 每个操作都必须以可预期的响应结束</li>\n<li>分区容错性(Partition tolerance) ： 即使出现单个组件无法可用,操作依然可以完成</li>\n</ul>\n<p>具体地讲在分布式系统中，在任何数据库设计中，一个Web应用至多只能同时支持上面的两个属性。显然，任何横向扩展策略都要依赖于数据分区。因此，设计人员必须在一致性与可用性之间做出选择。</p>\n<p><strong>这个定理在迄今为止的分布式系统中都是适用的！</strong> 为什么这么说呢？</p>\n<p>这个时候有同学可能会把数据库的2PC（两阶段提交）搬出来说话了。OK，我们就来看一下数据库的两阶段提交。</p>\n<p>对数据库分布式事务有了解的同学一定知道数据库支持的2PC，又叫做 XA Transactions。</p>\n<blockquote><p>MySQL从5.5版本开始支持，SQL Server 2005 开始支持，Oracle 7 开始支持。</p></blockquote>\n<p>其中，XA 是一个两阶段提交协议，该协议分为以下两个阶段：</p>\n<ul>\n<li>第一阶段：事务协调器要求每个涉及到事务的数据库预提交(precommit)此操作，并反映是否可以提交.</li>\n<li>第二阶段：事务协调器要求每个数据库提交数据。</li>\n</ul>\n<p>其中，如果有任何一个数据库否决此次提交，那么所有数据库都会被要求回滚它们在此事务中的那部分信息。这样做的缺陷是什么呢? 咋看之下我们可以在数据库分区之间获得一致性。</p>\n<p>如果CAP 定理是对的，那么它一定会影响到可用性。</p>\n<p>如果说系统的可用性代表的是执行某项操作相关所有组件的可用性的和。那么在两阶段提交的过程中，可用性就代表了涉及到的每一个数据库中可用性的和。我们假设两阶段提交的过程中每一个数据库都具有99.9%的可用性，那么如果两阶段提交涉及到两个数据库，这个结果就是99.8%。根据系统可用性计算公式，假设每个月43200分钟，99.9%的可用性就是43157分钟, 99.8%的可用性就是43114分钟，相当于每个月的宕机时间增加了43分钟。</p>\n<p>以上，可以验证出来，CAP定理从理论上来讲是正确的，CAP我们先看到这里，等会再接着说。</p>\n<h4 id=\"base理论\">BASE理论</h4>\n<p>在分布式系统中，我们往往追求的是可用性，它的重要程序比一致性要高，那么如何实现高可用性呢？ 前人已经给我们提出来了另外一个理论，就是BASE理论，它是用来对CAP定理进行进一步扩充的。BASE理论指的是：</p>\n<ul>\n<li>Basically Available（基本可用）</li>\n<li>Soft state（软状态）</li>\n<li>Eventually consistent（最终一致性）</li>\n</ul>\n<p>BASE理论是对CAP中的一致性和可用性进行一个权衡的结果，理论的核心思想就是：<strong>我们无法做到强一致，但每个应用都可以根据自身的业务特点，采用适当的方式来使系统达到最终一致性</strong>（Eventual consistency）。</p>\n<p>有了以上理论之后，我们来看一下分布式事务的问题。</p>\n<h3 id=\"分布式事务\">分布式事务</h3>\n<p>在分布式系统中，要实现分布式事务，无外乎那几种解决方案。</p>\n<h4 id=\"一两阶段提交2pc\">一、两阶段提交（2PC）</h4>\n<p>和上一节中提到的数据库XA事务一样，两阶段提交就是使用XA协议的原理，我们可以从下面这个图的流程来很容易的看出中间的一些比如commit和abort的细节。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/0923ab0f6010ed3be33f3fcb0b40a49c.png\"></p>\n<p>两阶段提交这种解决方案属于牺牲了一部分可用性来换取的一致性。在实现方面，在 .NET 中，可以借助 TransactionScop 提供的 API 来编程实现分布式系统中的两阶段提交，比如WCF中就有实现这部分功能。不过在多服务器之间，需要依赖于DTC来完成事务一致性，Windows下微软搞的有MSDTC服务，Linux下就比较悲剧了。</p>\n<p>另外说一句，TransactionScop 默认不能用于异步方法之间事务一致，因为事务上下文是存储于当前线程中的，所以如果是在异步方法，需要显式的传递事务上下文。</p>\n<p><strong>优点：</strong> 尽量保证了数据的强一致，适合对数据强一致要求很高的关键领域。（其实也不能100%保证强一致）</p>\n<p><strong>缺点：</strong> 实现复杂，牺牲了可用性，对性能影响较大，不适合高并发高性能场景，如果分布式系统跨接口调用，目前 .NET 界还没有实现方案。</p>\n<h4 id=\"二补偿事务tcc\">二、补偿事务（TCC）</h4>\n<p>TCC 其实就是采用的补偿机制，其核心思想是：针对每个操作，都要注册一个与其对应的确认和补偿（撤销）操作。它分为三个阶段：</p>\n<ul>\n<li>Try 阶段主要是对业务系统做检测及资源预留</li>\n<li>Confirm 阶段主要是对业务系统做确认提交，Try阶段执行成功并开始执行 Confirm阶段时，默认 Confirm阶段是不会出错的。即：只要Try成功，Confirm一定成功。</li>\n<li>Cancel 阶段主要是在业务执行错误，需要回滚的状态下执行的业务取消，预留资源释放。</li>\n</ul>\n<p>举个例子，假入 Bob 要向 Smith 转账，思路大概是：<br>\n我们有一个本地方法，里面依次调用<br>\n1、首先在 Try 阶段，要先调用远程接口把 Smith 和 Bob 的钱给冻结起来。<br>\n2、在 Confirm 阶段，执行远程调用的转账的操作，转账成功进行解冻。<br>\n3、如果第2步执行成功，那么转账成功，如果第二步执行失败，则调用远程冻结接口对应的解冻方法 (Cancel)。</p>\n<p><strong>优点：</strong> 跟2PC比起来，实现以及流程相对简单了一些，但数据的一致性比2PC也要差一些</p>\n<p><strong>缺点：</strong> 缺点还是比较明显的，在2,3步中都有可能失败。TCC属于应用层的一种补偿方式，所以需要程序员在实现的时候多写很多补偿的代码，在一些场景中，一些业务流程可能用TCC不太好定义及处理。</p>\n<h4 id=\"三本地消息表异步确保\">三、本地消息表（异步确保）</h4>\n<p>本地消息表这种实现方式应该是业界使用最多的，其核心思想是将分布式事务拆分成本地事务进行处理，这种思路是来源于ebay。我们可以从下面的流程图中看出其中的一些细节：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/c9554e428ab1f2c3eb922c4417f4c11b.png\"></p>\n<p>基本思路就是：</p>\n<p>消息生产方，需要额外建一个消息表，并记录消息发送状态。消息表和业务数据要在一个事务里提交，也就是说他们要在一个数据库里面。然后消息会经过MQ发送到消息的消费方。如果消息发送失败，会进行重试发送。</p>\n<p>消息消费方，需要处理这个消息，并完成自己的业务逻辑。此时如果本地事务处理成功，表明已经处理成功了，如果处理失败，那么就会重试执行。如果是业务上面的失败，可以给生产方发送一个业务补偿消息，通知生产方进行回滚等操作。</p>\n<p>生产方和消费方定时扫描本地消息表，把还没处理完成的消息或者失败的消息再发送一遍。如果有靠谱的自动对账补账逻辑，这种方案还是非常实用的。</p>\n<p>这种方案遵循BASE理论，采用的是最终一致性，笔者认为是这几种方案里面比较适合实际业务场景的，即不会出现像2PC那样复杂的实现(当调用链很长的时候，2PC的可用性是非常低的)，也不会像TCC那样可能出现确认或者回滚不了的情况。</p>\n<p><strong>优点：</strong> 一种非常经典的实现，避免了分布式事务，实现了最终一致性。在 .NET中 有现成的解决方案。</p>\n<p><strong>缺点：</strong> 消息表会耦合到业务系统中，如果没有封装好的解决方案，会有很多杂活需要处理。</p>\n<h4 id=\"四mq-事务消息\">四、MQ 事务消息</h4>\n<p>有一些第三方的MQ是支持事务消息的，比如RocketMQ，他们支持事务消息的方式也是类似于采用的二阶段提交，但是市面上一些主流的MQ都是不支持事务消息的，比如 RabbitMQ 和 Kafka 都不支持。</p>\n<p>以阿里的 RocketMQ 中间件为例，其思路大致为：</p>\n<p>第一阶段Prepared消息，会拿到消息的地址。<br>\n第二阶段执行本地事务，第三阶段通过第一阶段拿到的地址去访问消息，并修改状态。</p>\n<p>也就是说在业务方法内要想消息队列提交两次请求，一次发送消息和一次确认消息。如果确认消息发送失败了RocketMQ会定期扫描消息集群中的事务消息，这时候发现了Prepared消息，它会向消息发送者确认，所以生产方需要实现一个check接口，RocketMQ会根据发送端设置的策略来决定是回滚还是继续发送确认消息。这样就保证了消息发送与本地事务同时成功或同时失败。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/35201aeeac828723ddb48fa80eb28577.png\"></p>\n<p>遗憾的是，RocketMQ并没有 .NET 客户端。有关 RocketMQ的更多消息，大家可以查看<a href=\"http://www.jianshu.com/p/453c6e7ff81c\">这篇博客</a></p>\n<p><strong>优点：</strong> 实现了最终一致性，不需要依赖本地数据库事务。</p>\n<p><strong>缺点：</strong> 实现难度大，主流MQ不支持，没有.NET客户端，RocketMQ事务消息部分代码也未开源。</p>\n<h4 id=\"五sagas-事务模型\">五、Sagas 事务模型</h4>\n<p>Saga事务模型又叫做长时间运行的事务（Long-running-transaction）, 它是由普林斯顿大学的H.Garcia-Molina等人提出，它描述的是另外一种在没有两阶段提交的的情况下解决分布式系统中复杂的业务事务问题。你可以在<a href=\"https://www.cs.cornell.edu/andru/cs711/2002fa/reading/sagas.pdf\">这里</a>看到 Sagas 相关论文。</p>\n<p>我们这里说的是一种基于 Sagas 机制的工作流事务模型，这个模型的相关理论目前来说还是比较新的，以至于百度上几乎没有什么相关资料。</p>\n<p>该模型其核心思想就是拆分分布式系统中的长事务为多个短事务，或者叫多个本地事务，然后由 Sagas 工作流引擎负责协调，如果整个流程正常结束，那么就算是业务成功完成，如果在这过程中实现失败，那么Sagas工作流引擎就会以相反的顺序调用补偿操作，重新进行业务回滚。</p>\n<p>比如我们一次关于购买旅游套餐业务操作涉及到三个操作，他们分别是预定车辆，预定宾馆，预定机票，他们分别属于三个不同的远程接口。可能从我们程序的角度来说他们不属于一个事务，但是从业务角度来说是属于同一个事务的。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/10/65cc84933104b8f5dbcb5e72c334b640.png\"></p>\n<p>他们的执行顺序如上图所示，所以当发生失败时，会依次进行取消的补偿操作。</p>\n<p>因为长事务被拆分了很多个业务流，所以 Sagas 事务模型最重要的一个部件就是工作流或者你也可以叫流程管理器（Process Manager），工作流引擎和Process Manager虽然不是同一个东西，但是在这里，他们的职责是相同的。在选择工作流引擎之后，最终的代码也许看起来是这样的</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5a76c2ddbb9e8985028278\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSagaBuilder saga = SagaBuilder.newSaga(\"trip\")\r\n        .activity(\"Reserve car\", ReserveCarAdapter.class) \r\n        .compensationActivity(\"Cancel car\", CancelCarAdapter.class) \r\n        .activity(\"Book hotel\", BookHotelAdapter.class) \r\n        .compensationActivity(\"Cancel hotel\", CancelHotelAdapter.class) \r\n        .activity(\"Book flight\", BookFlightAdapter.class) \r\n        .compensationActivity(\"Cancel flight\", CancelFlightAdapter.class) \r\n        .end()\r\n        .triggerCompensationOnAnyError();\r\n\r\ncamunda.getRepositoryService().createDeployment() \r\n        .addModelInstance(saga.getModel()) \r\n        .deploy();</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5a76c2ddbb9e8985028278-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-1\"><span class=\"crayon-e\">SagaBuilder </span><span class=\"crayon-v\">saga</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SagaBuilder</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newSaga</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"trip\"</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c2ddbb9e8985028278-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">activity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Reserve car\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ReserveCarAdapter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">compensationActivity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Cancel car\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CancelCarAdapter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c2ddbb9e8985028278-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">activity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Book hotel\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BookHotelAdapter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">compensationActivity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Cancel hotel\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CancelHotelAdapter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c2ddbb9e8985028278-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">activity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Book flight\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">BookFlightAdapter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">compensationActivity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"Cancel flight\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CancelFlightAdapter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-t\">class</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c2ddbb9e8985028278-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">triggerCompensationOnAnyError</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c2ddbb9e8985028278-10\"> </div><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-11\"><span class=\"crayon-v\">camunda</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getRepositoryService</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createDeployment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5a76c2ddbb9e8985028278-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addModelInstance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">saga</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getModel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5a76c2ddbb9e8985028278-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">deploy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n\n</div>\n<p><a href=\"https://github.com/flowing/flowing-trip-booking-saga-c-sharp\">这里</a>有一个 C# 相关示例，有兴趣的同学可以看一下。</p>\n<p>优缺点这里我们就不说了，因为这个理论比较新，目前市面上还没有什么解决方案，即使是 Java 领域，我也没有搜索的太多有用的信息。</p>\n<h3 id=\"分布式事务解决方案cap\">分布式事务解决方案：CAP</h3>\n<p>上面介绍的那些分布式事务的处理方案你在其他地方或许也可以看到，但是并没有相关的实际代码或者是开源代码，所以算不上什么干货，下面就放干货了。</p>\n<p>在 .NET 领域，似乎没有什么现成的关于分布式事务的解决方案，或者说是有但未开源。具笔者了解，有一些公司内部其实是有这种解决方案的，但是也是作为公司的一个核心产品之一，并未开源…</p>\n<p>鉴于以上原因，所以博主就打算自己写一个并且开源出来，所以从17年初就开始做这个事情，然后花了大半年的时间在一直不断完善，就是下面这个 CAP。</p>\n<p>Github <a href=\"https://github.com/dotnetcore/CAP\">CAP</a>：这里的 CAP 就不是 CAP 理论了，而是一个 .NET 分布式事务解决方案的名字。</p>\n<p>详细介绍：<br>\n<a href=\"http://www.cnblogs.com/savorboard/p/cap.html\">http://www.cnblogs.com/savorboard/p/cap.html</a><br>\n相关文档：<br>\n<a href=\"http://www.cnblogs.com/savorboard/p/cap-document.html\">http://www.cnblogs.com/savorboard/p/cap-document.html</a></p>\n<p>夸张的是，这个解决方案是具有可视化界面（Dashboard）的，你可以很方面的看到哪些消息执行成功，哪些消息执行失败，到底是发送失败还是处理失败，一眼便知。</p>\n<p>最夸张的是，这个解决方案的可视化界面还提供了<strong>实时动态图表</strong>，这样不但可以看到实时的消息发送及处理情况，连当前的系统处理消息的速度都可以看到，还可以看到过去24小时内的历史消息吞吐量。</p>\n<p>最最夸张的是，这个解决方案的还帮你集成了 Consul 做分布式节点发现和注册还有心跳检查，你随时可以看到其他的节点的状况。</p>\n<p>最最最夸张的是，你以为你看其他节点的数据要登录到其他节点的Dashboard控制台看？错了，你随便打开其中任意一个节点的Dashboard，点一下就可以切换到你想看的节点的控制台界面了，就像你看本地的数据一样，他们是完全去中心化的。</p>\n<p>你以为这些就够了？不，远远不止：</p>\n<ul>\n<li>CAP 同时支持 RabbitMQ，Kafka 等消息队列</li>\n<li>CAP 同时支持 SQL Server, MySql, PostgreSql 等数据库</li>\n<li>CAP Dashboard 同时支持中文和英文界面双语言，妈妈再也不用担心我看不懂了</li>\n<li>CAP 提供了丰富的接口可以供扩展，什么序列化了，自定义处理了，自定义发送了统统不在话下</li>\n<li>CAP 基于MIT开源，你可以尽管拿去做二次开发。（记得保留MIT的License）</li>\n</ul>\n<p>这下你以为我说完了？ 不！</p>\n<p>你完全可以把 CAP 当做一个 EventBus 来使用，CAP具有优秀的消息处理能力，不要担心瓶颈会在CAP，那是永远不可能， 因为你随时可以在配置中指定CAP处理的消息使用的进程数， 只要你的数据库配置足够高…</p>\n<p>说了这么多，口干舌燥的，你不 <strong>Star</strong> 一下给个精神上的支持说不过去吧？ ^_^</p>\n<p>2号传送门： <a href=\"https://github.com/dotnetcore/CAP\">https://github.com/dotnetcore/CAP</a></p>\n<blockquote><p>不 Star 也没关系，我选择原谅你~</p></blockquote>\n<h3 id=\"总结\">总结</h3>\n<p>通过本文我们了解到两个分布式系统的理论，他们分别是CAP和BASE 理论，同时我们也总结并对比了几种分布式分解方案的优缺点，分布式事务本身是一个技术难题，是没有一种完美的方案应对所有场景的，具体还是要根据业务场景去抉择吧。 然后我们介绍了一种基于本地消息的的分布式事务解决方案CAP。</p>\n<p>如果你觉得本篇文章对您有帮助的话，感谢您的【推荐】。</p>\n<p>如果你对 .NET Core 有兴趣的话可以关注我，我会定期的在博客分享我的学习心得。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112749\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112749votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112749\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/5a37eb6aa1f47735bfe2f1e45b3c35ead1752c50.jpg"},{"url_object_id": "6577977ccb5507514a22f0ef401d210d", "title": "2018 开发者技能调查：这些编程语言受欢迎", "url": "http://blog.jobbole.com/113526/", "create_date": "2018/01/25", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhvezgh4j20jx0aggm9.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 1, "tags": "开发,编程语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>近日国外开发者平台 HankerRank 发布了 2018 年开发者技能调查报告，本文摘录部分和编程语言相关的调查结果。</p>\n<p>尽管经常有新编程语言出现，但程序员需要掌握核心、传统语言也是非常重要的。 总的来说，在「雇主青睐的编程语言」中，JavaScript、Java、Python、C++、C、C# 和 PHP 排在前位。</p>\n<h3>所有行业</h3>\n<p>JavaScript 第一，Java 稍微比 JS 少一点排第二，Python 第三、C++ 第四、C 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhvezgh4j20jx0aggm9.jpg\"></p>\n<h3>汽车 &amp; 运输行业</h3>\n<p>JS 第一、Java 第二、Python 第三、C++ 第四、C# 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhrvb4gnj20k30ag0tf.jpg\"></p>\n<h3>计算机硬件</h3>\n<p>C 语言和 C++ 的需求量，明显高于其他语言。Python 第三、Java 第四、JS 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3ly1fnrhw6oxxnj20k20adaaq.jpg\"></p>\n<h3>金融服务</h3>\n<p>Java 第一、JS 第二、Python 第三、C# 第四、C++ 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3ly1fnrhrwgvvej20jw0ahaaq.jpg\"></p>\n<h3>政府</h3>\n<p>Java 第一、JS 第二、C# 第三</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhrx8xc9j20jw0a974x.jpg\"></p>\n<h3>卫生保健</h3>\n<p>JS 第一、Java 第二、Python 第三、C# 第四</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3ly1fnrhrxts28j20jw0abdgh.jpg\"></p>\n<h3>媒体/娱乐/游戏</h3>\n<p>JS 第一、Python 第二、Java 第三、PHP 第四</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhrydd76j20jx0agmxv.jpg\"></p>\n<h3>零售 &amp; 电商</h3>\n<p>Java 第一、JS 第二、Python 第三</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3ly1fnrhryzgeej20jv0a63z6.jpg\"></p>\n<h3>安全</h3>\n<p>Java 第一、Python 第二、JS 第三、C++ 第四、C 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3ly1fnrhw76pymj20k109qq3k.jpg\"></p>\n<h3>技术</h3>\n<p>Java 第一、JS 第二、Python 第三、C++ 第四、C 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3ly1fnrhs05ww2j20ju09r0td.jpg\"></p>\n<h3>开发者计划学习的编程语言</h3>\n<ol>\n<li>Go （得益于 Google）</li>\n<li>Python</li>\n<li>Scala</li>\n<li>Kotlin</li>\n<li>Ruby</li>\n<li>R</li>\n<li>Typescript</li>\n<li>Swift</li>\n<li>Rust</li>\n<li>Haskell</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fnrq4gi03wj20jm0cq3zk.jpg\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113526\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113526votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113526\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 261</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a23d4dd651e63b6379778b3eceede0c0b4e94d72.jpg"},{"url_object_id": "e81ca961a8c2d048c7cc921d4868bb72", "title": "一个技术大牛对程序员招聘的吐槽和建议", "url": "http://blog.jobbole.com/113532/", "create_date": "2018/01/26", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/7dd60e003318e539f9469a088c0cac3b.png"], "praise_nums": "2", "comment_nums": 2, "fav_nums": 1, "tags": "其他,招聘,程序员,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/c14033\">十七树</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://www.b-list.org/weblog/2015/oct/19/destroy-all-hiring-processes/\">James Bennett</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>【导读】：James Bennett 是一个来自美国西弗吉尼亚州的程序员，Python Web 框架 Django 的核心团队成员之一。做过自由职业者，也做过全职工作。前端、后端都干过。James 对好工具充满热情，所以他一直参与 Django 框架的开发贡献，还有其他开源软件。</p>\n<p>本文是他对程序员招聘的吐槽，最后给了一些建议。</p>\n<hr>\n<p><strong>作为软件人，找工作有时候似乎挺苦逼的。</strong></p>\n<p>说真的，让我去掉前面这句中“似乎”二字吧。<span style=\"color: #ff0000;\">就是苦逼！</span>很多人都曾抱怨处在招聘的一方很糟糕——我们没有任何可靠的方式来甄别会写代码并且写得好的人。<span style=\"color: #ff0000;\">这的确是真的，我们这行在这方面做得很糟糕</span>。即使是在最常见的开发者群体（美国人、男性、白人、较为年轻和中产背景）当中，我们的甄别能力也绝对是一败涂地，而当面对更广泛的人群时，我们只会干得更差。但我们不得不扩大范围，因为就算我们没有道德感，我们也面临着数量的问题，职位岗位比上述“精英”多，总共只有那么多美国中产二十多岁的白人男性，然后其中一半根本不会应聘你们只发股权的“支持Uber、23andme、推特、部落冲突的无人机运输”公司，因为他们正在你创业的星巴克马路对面的另一家星巴克成立自己的公司。另一方面称职并且想要技术岗位却没得到的女性、非白人、外国人数量简直太多了。</p>\n<p>但是应聘的一方（我现在所在的一方）也很苦逼。招聘方遇到的困境，也恰恰是造成痛苦流程的原因。</p>\n<h3>教育很烂</h3>\n<p>我们尝试过的其中一个方法是看学历。但是我们根本不擅长在学校教人编程。涉及到计算机的课程，应该是数学系还是工程系的延伸，多数大学都决定不下来。结果他们最后弄出来的是诡异的融合，但其实两者都不是；或者他们在教编程，但是语言和技术已经落后现有规范好多年；又或者他们让学生死记算法列表及其复杂度，这会让学生误以为编程不过是死记硬背，然后成为一个能输出正确算法名字和伪代码的自动机。因为公司真正想找的是就是复读机，难道不是吗？直接开发一个数据结构的复读机，可能再加上一个排序算法的复读机，大概就能省下很多面试的时间。</p>\n<p>我深信现有的教育方式及其缺陷，是造成我们听到的软件招聘恐怖故事的原因。拥有 CS 硕士学位，却似乎不能从一张白纸开始写代码的人，其实不差；更有可能是他们受到的教育轻视实际编程而注重理论。在邮件列表和论坛发布“请给我写好的代码”帖子的人，其实不差；更有可能他们受到的教育建基于背诵和应试。另外如果你从没读过<a href=\"http://v.cx/2010/04/feynman-brazil-education\">著名物理学家费曼造访一所采用这个方法的大学的故事</a>，我强烈推荐它。</p>\n<p>那仍然是编程教学处在的阶段：我们知道自己需要程序员，而我们没有足够多的程序员来写代码，更别说教出更多的程序员，所以这种死记硬背的现象广泛存在，这是因为这已经是我们现在力所能及的范围。我们只是希望我们“教”出来的学生，会跑去看 Ruby on Rails 的教程，然后无意中看见 GitHub 的文档，然后从中神奇地学会真正的软件开发、架构和最佳规范。因为大家都明白，他们不可能在学校里学会这些。</p>\n<p>与此同时另一方面，在我合作过的技术牛人当中，大多数根本没有软件工程和计算机科学的大学背景；很多人直到快上完学才第一次写代码（ 不要脸的偏见：我直到快大学毕业才开始通常意义上的“编程”，我也是在毕业几年后才开始以此谋生）。很多真正厉害的人会被“计算机科学本科”这一条件过滤掉，这是招聘方不谨慎定下职位要求时会遇到的问题。即使招聘方费心加上“或拥有相当的经验”，他们甚至也还是被过滤掉，因为履历上的学位似乎就是招聘者和 HR 筛选推送给实际技术人员的求职者的第一条依据。</p>\n<p>顺带一提，我有一个哲学学位。并不是炫耀，不过软件领域很多我认识并尊敬的非常厉害的人都有着相同的背景。</p>\n<p>所以将学历作为筛选标准效果并不好；公司也很苦逼，因为拥有 CS 学位并不意味着一个人已经准备好坐下来写代码；准备好写代码的求职者也苦逼，因为没有 CS 学位仍然是个短板，而且为了学位回归学校四年并不轻松。而且每一飞秒都有五万个编程训练营/培训班被启动，从中出来的人拥有哲学系、文学系、神学系、历史系和现代 A 线诗歌符号学的学位，但是当他们经历了训练营后，他们大概至少能和计算机系的学生水平相当，因为 CS 的课程基本都很烂，而且主动加入编程训练营的人通常很聪明而且充满动力。而且如果他们能学会拆解 A 线诗歌，基本就能确认他们能用你的 JavaScript 框架写出一个 CRUD 应用程序，因为那个 JavaScript 框架上周才发布，所以根本没有多少人拥有超过一两天的 ReAngleBoneASS 实战经验。</p>\n<h3>编程面试很烂</h3>\n<p>由于学历不靠谱，另一个甄别会编程的人的方式是编程面试。求职者和公司内部的某人交谈（通常是电话或者视频聊天），并被要求写出解决问题的代码。如果你还保留着好奇心我就告诉你吧，我们不擅长用这个方式选出会编程的人。简单来说，此类面试并不靠谱，因为它们太短、太做作、太压迫。</p>\n<p>详细一点来说：我认识多个顶级人才被他们绝对胜任的职位给拒了，就因为这种编程面试。我倾向于把它们看作“问个谜语”风潮的最新版，这个环节当年由于微软的实施而流行一时，因为每家公司都想像微软一样又大又成功。现在，人们听说谷歌会进行编程面试，并且看到 <a href=\"http://blog.codinghorror.com/why-cant-programmers-program/\">Jeff Atwood 的 FizzBuzz 测试</a>，而每家公司都想像谷歌一样又大又成功，并且与 Jeff Atwood 的招聘恐怖故事产生共鸣，所以现在所有人都在进行编程面试。但是这种面试依旧很烂。可能这是因为谷歌据说用的是白板，而其他公司用的是电话。</p>\n<p>想不想看一个非常称职却因为编程面试而被拒绝的一个例子？他被拒是因为面试官在电话那头笔录错了他念的 Bash 脚本，这当然让脚本出了问题。我绝对没有开玩笑或者夸张，而除了“神经病”我实在找不到其他形容。如果用的是白板，他就被录取了。</p>\n<p>事实上，我十分确定我搞砸过一次编程面试（至少我到现在还没收到该公司的答复）。要记住我并不是刚毕业入行的人。我已经有超过十年的 Web 应用开发经验，处理过各种各样的规模系统；我是一个非常重要的 Web 框架的核心团队成员，并且可能是这方面的世界级专家；我真的写了关于使用该框架的书（最早的几本之一），有时会被聘请去教这个框架，以及被学术会议邀请去做关于这个框架的 keynote 演讲。我曾经有一阵子没怎么睡觉，全程死死盯着一个正在运行的程序，想要理清 Django 的旧式系统，发现我的精神动物是一只迟缓的懒猴，而过了一阵子当我的意识像甘道夫那样重新塞进身体时，我<a href=\"https://github.com/django/django/commit/8a0fa75839\">提交了仅仅两行代码</a>进行反击，解决了五个“深藏 Django 腹中”不同的 bug。我挺擅长这些的，如果你还没注意到的话我希望你记住这点咯。</p>\n<p>我希望你注意到，因为我基本确信我最近搞砸了一次编程面试。</p>\n<p>我不会提那家公司的名字，因为这跟本文无关。我也不会公布他们问的题目，因为那也同样无关。那个题目并没有 FizzBuzz 那么简单，但还是很简单，是我下意识就能提出好几种解决方式的那种问题。面试官否决了我偏好的方法（大概因为这个方法直接调用标准库的函数而无法展示我能手动解决），于是我换了另一个方式。而我从记忆中重新构筑这个方法的时候恰巧犯了一个小错误，因为我过于自信了并且想跟面试官聊其他的，于是我想着我都知道怎么只靠记忆完成这个解决方案了，为啥不赶紧水过这个题目，然后谈谈我真正在乎的事呢。</p>\n<p>顺便一提，我出了一个小笔误，就是我给错误的循环变量加了值。单字母的变量名很糟糕，即使是在你为了敷衍面试官而写的傻瓜程序里；再说白一点，代码能跑起来，但是结果是错误的。</p>\n<p>而当程序跑完然后吐出错误的结果时，我全部的自信都荡然无存，内心OS：“我的个天！为啥不对！我应该知道的呀”，然后我一边疯狂调试，一边尝试向面试官解释我的做法并且回答他们的问题，一边读代码、看结果、加 debug 语句来查看中间值，然后整个气氛是：「哦！提醒一下，这会决定你是否能得到心仪的工作，所以别有任何负担哦」。所以虽然我修改好了，但是用了比正常更多的时间，这让我想到我是不是可能会变成 Atwood 风格的失败招聘故事的新事例。“没错，有个拥有十年经验的人，所谓‘专家’，通过了前两轮电面，结果他居然连这个超级简单的函数都不会写，还花了九牛二虎之力来找到自己的错误。用这题当过滤器真是爽歪歪！”</p>\n<p>如果你曾经在一轮技术面试之后感觉糟糕，如果你曾经感觉你彻底失败，是个废物，不该获得任何职位，只想住到远离计算机、技术和那些让你产生这种情绪的招聘流程的话：我真希望我能说一切正在好转。我能说的是，你并不是一个人。我自身的傲慢和想要赶紧完事然后往下继续的不耐烦，是我在那次面试失败的主因。</p>\n<p>但是那并不会让最终的结果容易接受，也大概不会让这种面试变成公司有力的工具；这些面试似乎就是因为它们自身的属性而无法避免地会挤走合格的候选人。也就是说：缺乏经验的应聘者更有可能缺乏自信而大脑一片空白；或者花费太多力气来想出惊艳面试官的奇招，以至于最终垂死挣扎，看着无能；而有经验的应聘者很可能（我就是）把这种面试看成烦人的形式主义，只想越快搞定越好（约时间进行编程面试的时候，我甚至还跟招聘方开玩笑说我至少能用六种语言写 FizzBuzz，所以他们就直接告诉我想要哪种吧），面试结果只会符合古希腊人教育我们对于过分自信的期望。</p>\n<p>而作为应聘者/候选人，这种面试更是烂。压力太大和缺乏容错空间，总是会让人感觉身体不适。编程面试对精神的虐待也同样糟糕。这真的是一个简单的“来证明你会写 for 循环吧”的题目吗？还是说这是一道藏着面试官想让你发现并阐述的深层问题的陷阱题？这真的只是在考察基本的编程技巧吗？会不会有一些知名的算法或技巧，而你没有的 CS 学位早就会让你滚瓜烂熟，甚至能作为软件共济会的接头暗号？你是不是应该展示你精通这个语言和工具，还是说他们想你开口说出心中所想，来展示你可以好好分析这个问题？如果你能在 A 线诗歌里面藏头打出“FizzBuzz”，面试官会不会对你印象更好？</p>\n<p>这些念头会全程萦绕在你的脑海。他们会使你麻痹，抽空你的自信和思考能力，然后让你看上去完全不胜任。但是 $大公司 就是这么干的，他们又大又有钱又成功，所以其他人也会跟着做，留下一片大脑麻痹、毫无自信、犹豫再三再四再七十四的僵尸程序员，他们只会语气平平大声喊“超出递归最大深度”，而那些公司只会全程抱怨为什么就是找不到人才，然后麻烦谁能清理一下这些僵尸吗？</p>\n<h3>一切都很烂</h3>\n<p>我曾多次处在招聘双方的处境，我也经历过这个欣欣向荣的软件行业的各个阶段的面试（我似乎平均每五年就要找一轮工作，这让我对各个阶段都有一些有趣的印象）。而我从中学到的只是我们干得太糟糕了。科学哲学（我在学校学过一点）有个很有名的“划界问题”：如何区分真正的科学，和那些用 看起来是正经科学的字眼 包装起来的伪科学。这个问题，至今仍没有什么灵丹妙药。</p>\n<p>软件开发也面临着划界问题，但我们的问题有点不同：我们需要知道的不仅仅是谁已经会写代码，还要知道写得多好，而在那些还不会写的有志之士当中，他们还差多少，还需要多少帮助才能做到（换言之，不仅仅是“我们可以聘用谁”，还有“高低职位分别可以聘用谁”，以及“我们可以招哪个实习生然后给他推荐好的培训日后再聘用他”）。这边也没有灵丹妙药；如果存在的话，我们早就找到了，因为很多天才都花了大量的时间在寻找它。</p>\n<p>至今为止，我发现有用的做法总会在其他时候失灵。那包含了审查 GitHub 或其他类似的东西来评估能力；用人际关系和介绍信来找出已经证明自己的人；用对话形式、交换人生故事的面试（也就是面试官和应聘者聊一些看过做过的事，还有他们解决问题的方式）；编程面试；“关键词”面试（我参加过一次面试，目标真的就只是看应聘者有没有“说出关键词”，来看他们是不是真的熟悉这个领域）；高压面试；低压面试；短合同观察期；实习生返聘计划；团队融入面试；结对编程；黑客马拉松；一对一面试；多对一面试；你再随便想一个吧，肯定被使用过了而且成功率最高只有一半。</p>\n<p>因此这对雇主很不利。我应该提到过对应聘者来说也很烂了吧？太多流程都严重有失公允，然后由于面试官和应聘者立场上的鸿沟，这些流程更加糟糕。有时候你甚至不知道有人在评估你（特别是当流程第一环节就是 GitHub 主页筛选的时候），而且被找来主管技术/编程面试的人，经常把这看作一件浪费时间的苦差事，他们不会花时间准备，甚至不会了解一下应聘者，甚至不知道他们来面试什么岗位（我遭遇过好几次这样的情况，我敢说一个连应聘者的简历都懒得看的面试官，是不会让应聘者想要加入他们的）。除此之外，就算是最好的技术面试，也有很强的对抗性因素，这也特别让人不舒服。</p>\n<p>但是作为应聘者，不在面试前恶补公司的技术结构，可能加上一些技术面经，包含排序、搜搜算法和怎么计算费米对芝加哥钢琴调音师人数的估计算法的复杂度。<strong>应聘者事先不做准备，那就太离谱了</strong>。因为就算面试官可以完全不了解应聘者和那个职位，应聘者必须做足功夫，说不定面试官真的会问调音师那道题。</p>\n<p>我知道理论上这种非人性化和脱节，是太多人申请技术岗位的副作用；让流程人性化和处理所有申请，这两者不可兼得。但这肯定会让求职者充满苦涩。我真希望，我能感觉我是作为一个将要成为同事的人在接受面试，而不是由可替换齿轮 #7365 作为可替换齿轮 #9540 岗位的面试官，然后由于更多的可替换齿轮在排队面试而时间有限。而且如果你是最早的五千个齿轮，你只能获得股权。</p>\n<p>这完全没考虑到人与人的差别，有些人擅长应对形式化的面试，而有些人并不擅长。（这两点都看不出，这个人会在真正的工作环境做得如何；如果看得出的话，那某种程度上，这些面试技巧可以用来申请我并不想要的那种职位。）</p>\n<h3>那我们该怎么做?</h3>\n<p><strong>老实说，我根本不知道。技术招聘对各方来说都很烂，而且没有简单的解决方式</strong>。甚至都没有能让我们撑到解决方式出炉的权宜之计。不过我还是会提一些东西，只因为洋洋洒洒写 3,000 字吐槽却不提出建议，看上去太糟糕了。</p>\n<p><strong>一旦一家公司大到分离出专门的招聘团队或部门时，HR 就会变成应聘者和现有员工双方的痛点。</strong>我的意思是应聘者面对的很多招聘者，他们自己都只是刚刚找到工作。这就降低了他们的反应能力以及说服其他人这家公司值得加入的能力，拖慢了整个招聘流程。如果你的招聘团队像旋转门一样很多人进进出出，你就该找出原因并解决问题，保证你放在那里的人真的了解公司，了解你在找的人才，别让任何一方（应聘者或需要信任的团队）空等。说的就是你，上次电话一个礼拜了都还没发送“招聘进度”邮件的某某公司。</p>\n<p><strong>当你依靠开发者进行面试时，请负责任地排好班。</strong>你已经在占用他们的时间，而且强迫他们切换注意力了；确保他们有足够的时间来不仅仅是打一个 30 分钟的电话，还要浏览应聘者的简历、GitHub 等，了解他们主管的职位的细节。跟一个能说出“我发现你做了/贡献了（项目）”并且能把这个项目跟公司和职位扯上关系的人交谈虽然只是一个小美好，但是小美好可以产生深远的影响。还有要确保面试官想要当面试官；我能判断出对方很明显只想面试赶紧结束然后回到“宏图大计”，这很糟糕。</p>\n<p><strong>别搞编程面试，如果可以的话，看看应聘者写过的代码，或者向他们描述你最近遇到的一个小 bug，然后问他们会怎么解决。如果你能相处跟职位相关的问题那就更好了。</strong>让应聘者选择在电话上解释，或者写下来发邮件给你。我认识一些能写出神级代码却没办法开口好好解释的人，我也认识擅长开口解释却害怕写哪怕只是零散代码的人；除非你的职位要求特别的演说/写作能力，不然就别偏向任何一边。如果你必须进行编程面试，把用时和压力控制在合理的范围——你家的开发者都未必能在 30 分钟内在面对陌生人电话听写软件输出的情况下解决 bug，那就别强迫应聘者了。还有，你可以让讨厌面试的开发者改变心态：“这不是面试，是代码评估”。所有人都能把代码评估“电解”成 Agile™ 和 Lean® 等等的关键词。代码评估有开发者渴望的元素！</p>\n<p><strong>在所有这些之上最重要的是，请人性化一些。我们不是机器</strong>；我们只是让机器做有趣的事情。有时候我们甚至可以让它们做正确而有趣的事情。但我们终究是人类，而现在的招聘流程存在鸿沟般严重的人性化缺失。对人类人性化一些吧，其他所有事情都会轻松很多。</p>\n<p>还有，如果你正在寻找可以让机器做有趣事情的人，我还在等待合适的招聘者，所以可以来<a href=\"http://www.b-list.org/contact/\">联系我</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113532\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113532votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113532\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/c14033\">十七树</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/c14033\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            香港大学在读博士生，研究 GPGPU        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/c14033\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/c14033/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/c14033/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a4cbdf94fbd0138a52e9c8226246e1bb36133e9e.jpg"},{"url_object_id": "20b860929b17a2f1ee48016ac924977a", "title": "分析了 7500w+ GitHub 代码仓库 哪门语言热度最高？", "url": "http://blog.jobbole.com/113546/", "create_date": "2018/01/27", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/01/f9dc3a6611e10b616985757498ed6a74.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Github,语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.oschina.net/news/92822/ranking-programming-languages-by-github-users\">开源中国社区</a>   </div><p>近日，有开发者在 reddit <a href=\"https://www.reddit.com/r/programming/comments/7sxser/ranking_programming_languages_by_github_users/\" target=\"_blank\">发布</a>了一个帖子，内容是通过对 GitHub 用户的数据进行分析得到的编程语言排序榜。作者认为，通过计算 GitHub 上有多少人使用每种语言来对所有的编程语言进行排序会很有趣。</p>\n<p>下面我们不妨看看这份数据源“独特”的排行榜有哪些值得关注的东西。</p>\n<p>首先，作者表示这次分析的数据主要来源于 <a href=\"https://www.githubarchive.org/\" target=\"_blank\">GitHub Archive</a> 和 <a href=\"http://ghtorrent.org/\" target=\"_blank\">GHTorrent</a>。他通过分析 GitHub Archive 上 7500w+ 个不同的仓库中超过 12.5 亿次的事件（包括推送新代码、fork、star、issue 处理等），每月汇总一次，计算了每种语言的 MAU(月活跃用户数量)，详细的分析说明可<a href=\"https://github.com/benfred/github-analysis/#inferring-languages\" target=\"_blank\">点此查看</a>。</p>\n<p>先看看总体数据，截至 2018 年 1 月 24 日，通过统计 GitHub 上活跃用户的活动情况，对每种语言的排名结果如下(TOP 25)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/fc887734f13170721d21150266c78b0f.png\" alt=\"\"></p>\n<p>整体排名十分有趣，但我们应该深入了解这些语言随着时间的推移有着怎么的演变。（数据可以追溯到 7 年前）</p>\n<p><strong>主流编程语言</strong></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/9f50396b32bcc8cd904aa87e9e97086e.png\" alt=\"\"></p>\n<p>可以看到，主流编程语言都有着相对稳定的用户群，而且大多数也都是你意料之中的。</p>\n<p>从追踪的数据来看，JavaScript, Python, Java, C++ 和 C 保持这种热度的势头已经超过 7 年，所以近段时间依然不会有所改变。</p>\n<p>JavaScript 保持它的“龙头”地位是可以解释的，因为它基本上是所有程序员都需要使用的一门语言。</p>\n<p>不过随着时间的推移，Python 的使用者越来越多，最近已超过 Java 成为 GitHub 上第二大流行的编程语言。Python 的增长大部分似乎都来自开发者对机器学习的兴趣。事实上，Python 的整体流行度在这里可能被低估了（以后可能会更多）。</p>\n<p>C++ 似乎也正在超越 C 的地位，而这也是有根据的，像 GCC 这种项目都已经从 C 转换到 C++，以便使用 C++ 的一些特性。由于 C++ 基本上是 C 的超集，GCC 团队发现<a href=\"https://lwn.net/Articles/542457/\" target=\"_blank\">使用 C++ 的有限子集可让他们编写更干净的代码</a>。</p>\n<p><strong>2018 年要学习的编程语言</strong></p>\n<p>观察这种编程语言趋势的最好方法就是，确定具有快速增长的用户群的新兴编程语言：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/d8411b438b8276b946a43f1a946b143f.png\" alt=\"\"></p>\n<p>明显能看到，用户群增长最快的语言分别有：Go，TypeScript，Kotlin 和 Rust。</p>\n<p>作者表示，在过去的几周里他也一直在学习 Go 和 Typescript。他发现，对于编写并发的服务器端程序，Go 确实非常有用，而在使用 TypeScript 几个星期后，自己可能再也不会乐意使用 JavaScript 了。</p>\n<p>Kotlin 的崛起是意料之中的，Kotlin 主要用于 Android 应用程序开发，当被宣布成为 Android 开发的官方支持语言后，看看图中的斜率变化情况。</p>\n<p>对于 Rust，在这里的增长虽然比其他语言慢，但其中依然有许多令人惊叹的项目。作者推荐了两个用 Rust 编写的两个项目 —— <a href=\"https://github.com/rbspy/rbspy\" target=\"_blank\">用于 Ruby 的采样分析器</a>和 <a href=\"https://github.com/maciejkula/wyrm\" target=\"_blank\">autodifferentiation 框架</a>。</p>\n<p>事实上，所有这些语言都有一个共同点，它们背后都有大公司在支持着。正如谷歌之于 Go，微软之于 TypeScript，JetBrains 之于 Kotlin，Mozilla 之于 Rust。成功推广一门新的语言需要不少的付出 —— 至少仅仅开发出一门优雅的语言是不够的，还必须扩大语言背后的社区和生态系统。诸如 IDE 支持，用于常见任务的库和软件包、工具和文档，这些对于让用户使用某种语言都非常重要，而且都需要付出巨大的努力。</p>\n<p><strong>出现下滑趋势的语言</strong></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/52a6027178298cf4ac5fcb4fd2cdfca6.png\" alt=\"\"></p>\n<p>在过去的 7 年里，Ruby，PHP，Objective-C，CoffeeScript 和 Perl 在 GitHub 上的用户比例都显着下降。</p>\n<p>不过值得注意的是，这些数据是以 GitHub 用户群的百分比得出的，而 GitHub 的用户数量正在快速增长。在过去的 7 年中，GitHub 的用户增长已经超过了 20 倍。这意味着即使是市场份额下降的语言也可能拥有不断增长的用户群。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/0cb76bf1f6742f4bffa034266b101d3a.png\" alt=\"\"></p>\n<p>这样来看，相比 2011 年，使用 Ruby 语言的活跃用户数量已经超过了3倍。它的增长没有其他语言那么快，导致它在这个分析上的表现相对较差。</p>\n<p>此外要注意的是，某些较新的语言似乎在蚕食旧版语言的用户群。例如，Objective-C 用户的下降与 Swift 的上升相对应。另外，CoffeeScript 似乎已经被 TypeScript 取代：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/1bbc04d35c7761d2c22bbab0a085feaf.png\" alt=\"\"></p>\n<p>虽然 Objective-C 正在下滑，但整体上 iOS 开发相对稳定。同样的，CoffeeScript 似乎已经为 TypeScript 铺平了道路，因为它让程序员习惯于将代码编译成 JavaScript。</p>\n<p><strong>函数式编程语言</strong></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/c44dae18e5d68f2769917e1d42df0ee9.png\" alt=\"\"></p>\n<p>作者表示，这里的数据相对较少，排名中的干扰因素较多，他不相信随着时间的推移，Clojure 和 Haskell 会出现这样明显的下滑。而 Elixir 这门语言值得大家留意，虽然未能排在前 25 名。</p>\n<p>文中作者还对用于科学领域的语言进行了分析，详情可查看<a href=\"http://www.benfrederickson.com/ranking-programming-languages-by-github-users/\" target=\"_blank\">原文</a>。作者还表示未来对编程语言流行度的跟踪将会参考其他一些数据，如 TIOBE 指数、Stack Overflow 上的标签趋势图、GitHub Octoverse 等。</p>\n<p>源码和整体排名可在 <a href=\"https://github.com/benfred/github-analysis\" target=\"_blank\">GitHub</a> 上查看。</p>\n<p>最后，reddit 帖子的回帖中，有用户给出了自己统计的数据以进行对比参考，他统计了 reddit 上十大最受欢迎的编程语言的 subreddits 数量（ subreddits 是 reddit 中的子版块，用户可根据自己的兴趣和需要进行订阅）</p>\n<blockquote><p>Python – 213594<br>\nJavaScript – 199592<br>\nJava – 81241<br>\nPHP – 58794<br>\nC++ – 58788<br>\nC# – 52103<br>\nGo – 39529<br>\nRuby – 38405<br>\nRust – 33124<br>\nC – 32351</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113546\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113546votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113546\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/9a8539839727cdcb8492a550ef7b35f838a85f14.jpg"},{"url_object_id": "7804089960a8b7ca460bb1b60e30fcd6", "title": "与 C 语言长别离", "url": "http://blog.jobbole.com/113538/", "create_date": "2018/01/26", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/5f9c96a67bd10a4615ff06707ba2295f.jpg"], "praise_nums": "1", "comment_nums": 2, "fav_nums": 2, "tags": "C/C++,别离", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://esr.ibiblio.org/?p=7711\"> Eric Raymond</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9268-1.html\"> Yu Haixin</a>   </div><div id=\"article_content\">\n<div> 这几天来，我在思考那些正在挑战 C 语言的系统编程语言领袖地位的新潮语言，尤其是 Go 和 Rust。思考的过程中，我意识到了一个让我震惊的事实 —— 我有着 35 年的 C 语言经验。每周我都要写很多 C 代码，但是我已经记不清楚上一次我 <em>创建一个新的 C 语言项目</em> 是在什么时候了。</div>\n<div><a href=\"http://jbcdn2.b0.upaiyun.com/2018/01/5f9c96a67bd10a4615ff06707ba2295f.jpg\"><img class=\"aligncenter size-full wp-image-113540\" src=\"http://jbcdn2.b0.upaiyun.com/2018/01/5f9c96a67bd10a4615ff06707ba2295f.jpg\" alt=\"timg\"></a></div>\n<p>如果你完全不认为这种情况令人震惊，那你很可能不是一个系统程序员。我知道有很多程序员使用更高级的语言工作。但是我把大部分时间都花在了深入打磨像 NTPsec、 GPSD 以及 giflib 这些东西上。熟练使用 C 语言在这几十年里一直就是我的专长。但是，现在我不仅是不再使用 C 语言写新的项目，甚至我都记不清我是什么时候开始这样做的了，而且……回头想想，我觉得这都不是本世纪发生的事情。</p>\n<p>这个对于我来说是件大事，因为如果你问我，我的五个最核心软件开发技能是什么，“C 语言专家” 一定是你最有可能听到的之一。这也激起了我的思考。C 语言的未来会怎样 ？C 语言是否正像当年的 COBOL 语言一样，在辉煌之后，走向落幕？</p>\n<p>我恰好是在 C 语言迅猛发展，并把汇编语言以及其它许多编译型语言挤出主流存在的前几年开始编程的。那场过渡大约是在 1982 到 1985 年之间。在那之前，有很多编译型语言争相吸引程序员的注意力，那些语言中还没有明确的领导者；但是在那之后，小众的语言就直接毫无声息的退出了舞台。主流的语言（FORTRAN、Pascal、COBOL）则要么只限于老代码，要么就是固守单一领域，再就是在 C 语言的边缘领域顶着愈来愈大的压力苟延残喘。</p>\n<p>而在那以后，这种情形持续了近 30 年。尽管在应用程序开发上出现了新的动向： Java、 Perl、 Python， 以及许许多多不是很成功的竞争者。起初我很少关注这些语言，这很大一部分是因为在它们的运行时的开销对于当时的实际硬件来说太大。因此，这就使得 C 的成功无可撼动；为了使用和对接大量已有的 C 语言代码，你得使用 C 语言写新代码（一部分脚本语言尝试过打破这种壁垒，但是只有 Python 有可能取得成功）。</p>\n<p>回想起来，我在 1997 年使用脚本语言写应用时本应该注意到这些语言的更重要的意义的。当时我写的是一个名为 SunSITE 的帮助图书管理员做源码分发的辅助软件，当时使用的是 Perl 语言。</p>\n<p>这个应用完全是用来处理文本输入的，而且只需要能够应对人类的反应速度即可（大概 0.1 秒），因此使用 C 或者别的没有动态内存分配以及字符串类型的语言来写就会显得很傻。但是在当时，我仅仅是把其视为一个试验，而完全没有想到我几乎再也不会在一个新项目的第一个文件里敲下 <code>int main(int argc, char **argv)</code> 这样的 C 语言代码了。</p>\n<p>我说“几乎”，主要是因为 1999 年的 <a href=\"http://sng.sourceforge.net/\">SNG</a>。 我想那是我最后一个用 C 从头开始写的项目了。</p>\n<p>在那之后我写的所有的 C 代码都是在为那些上世纪已经存在的老项目添砖加瓦，或者是在维护诸如 GPSD 以及 NTPsec 一类的项目。</p>\n<p>当年我本不应该使用 C 语言写 SNG 的。因为在那个年代，摩尔定律的快速迭代使得硬件愈加便宜，使得像 Perl 这样的语言的执行效率也不再是问题。仅仅三年以后，我可能就会毫不犹豫地使用 Python 而不是 C 语言来写 SNG。</p>\n<p>在 1997 年我学习了 Python， 这对我来说是一道分水岭。这个语言很美妙 —— 就像我早年使用的 Lisp 一样，而且 Python 还有很酷的库！甚至还完全遵循了 POSIX！还有一个蛮好用的对象系统！Python 没有把 C 语言挤出我的工具箱，但是我很快就习惯了在只要能用 Python 时就写 Python ，而只在必须使用 C 语言时写 C。</p>\n<p>（在此之后，我开始在我的访谈中指出我所谓的 “Perl 的教训” ，也就是任何一个没能实现和 C 语言语义等价的遵循 POSIX 的语言<em>都注定要失败</em>。在计算机科学的发展史上，很多学术语言的骨骸俯拾皆是，原因是这些语言的设计者没有意识到这个重要的问题。）</p>\n<p>显然，对我来说，Python 的主要优势之一就是它很简单，当我写 Python 时，我不再需要担心内存管理问题或者会导致核心转储的程序崩溃 —— 对于 C 程序员来说，处理这些问题烦的要命。而不那么明显的优势恰好在我更改语言时显现，我在 90 年代末写应用程序和非核心系统服务的代码时，为了平衡成本与风险都会倾向于选择具有自动内存管理但是开销更大的语言，以抵消之前提到的 C 语言的缺陷。而在仅仅几年之前（甚至是 1990 年），那些语言的开销还是大到无法承受的；那时硬件产业的发展还在早期阶段，没有给摩尔定律足够的时间来发挥威力。</p>\n<p>尽量地在 C 语言和 Python 之间选择 C —— 只要是能的话我就会从 C 语言转移到 Python 。这是一种降低工程复杂程度的有效策略。我将这种策略应用在了 GPSD 中，而针对 NTPsec , 我对这个策略的采用则更加系统化。这就是我们能把 NTP 的代码库大小削减四分之一的原因。</p>\n<p>但是今天我不是来讲 Python 的。尽管我觉得它在竞争中脱颖而出，Python 也未必真的是在 2000 年之前彻底结束我在新项目上使用 C 语言的原因，因为在当时任何一个新的学院派的动态语言都可以让我不再选择使用 C 语言。也有可能是在某段时间里在我写了很多 Java 之后，我才慢慢远离了 C 语言。</p>\n<p>我写这个回忆录是因为我觉得我并非特例，在世纪之交，同样的发展和转变也改变了不少 C 语言老手的编码习惯。像我一样，他们在当时也并没有意识到这种转变正在发生。</p>\n<p>在 2000 年以后，尽管我还在使用 C/C++ 写之前的项目，比如 GPSD ，游戏韦诺之战以及 NTPsec，但是我的所有新项目都是使用 Python 的。</p>\n<p>有很多程序是在完全无法在 C 语言下写出来的，尤其是 <a href=\"http://www.catb.org/esr/reposurgeon/\">reposurgeon</a> 以及 <a href=\"http://www.catb.org/esr/doclifter/\">doclifter</a> 这样的项目。由于 C 语言受限的数据类型本体论以及其脆弱的底层数据管理问题，尝试用 C 写的话可能会很恐怖，并注定失败。</p>\n<p>甚至是对于更小的项目 —— 那些可以在 C 中实现的东西 —— 我也使用 Python 写，因为我不想花不必要的时间以及精力去处理内核转储问题。这种情况一直持续到去年年底，持续到我创建我的第一个 Rust 项目，以及成功写出第一个<a href=\"http://www.catb.org/esr/loccount/\">使用 Go 语言的项目</a>。</p>\n<p>如前文所述，尽管我是在讨论我的个人经历，但是我想我的经历体现了时代的趋势。我期待新潮流的出现，而不是仅仅跟随潮流。在 98 年的时候，我就是 Python 的早期使用者。来自 <a href=\"https://www.tiobe.com/tiobe-index/\">TIOBE</a> 的数据则表明，在 Go 语言脱胎于公司的实验项目并刚刚从小众语言中脱颖而出的几个月内，我就开始实现自己的第一个 Go 语言项目了。</p>\n<p>总而言之：直到现在第一批有可能挑战 C 语言的传统地位的语言才出现。我判断这个的标准很简单 —— 只要这个语言能让我等 C 语言老手接受不再写 C 的事实，这个语言才 “有可能” 挑战到 C 语言的地位 —— 来看啊，这有个新编译器，能把 C 转换到新语言，现在你可以让他完成你的<em>全部工作</em>了 —— 这样 C 语言的老手就会开心起来。</p>\n<p>Python 以及和其类似的语言对此做的并不够好。使用 Python 实现 NTPsec（以此举例）可能是个灾难，最终会由于过高的运行时开销以及由于垃圾回收机制导致的延迟变化而烂尾。如果需求是针对单个用户且只需要以人类能接受的速度运行，使用 Python 当然是很好的，但是对于以 <em>机器的速度</em> 运行的程序来说就不总是如此了 —— 尤其是在很高的多用户负载之下。这不只是我自己的判断 —— 因为拿 Go 语言来说，它的存在主要就是因为当时作为 Python 语言主要支持者的 Google 在使用 Python 实现一些工程的时候也遭遇了同样的效能痛点。</p>\n<p>Go 语言就是为了解决 Python 搞不定的那些大多由 C 语言来实现的任务而设计的。尽管没有一个全自动语言转换软件让我很是不爽，但是使用 Go 语言来写系统程序对我来说不算麻烦，我发现我写 Go 写的还挺开心的。我的很多 C 编码技能还可以继续使用，我还收获了垃圾回收机制以及并发编程机制，这何乐而不为？</p>\n<p>（<a href=\"https://blog.ntpsec.org/2017/02/07/grappling-with-go.html\">这里</a>有关于我第一次写 Go 的经验的更多信息）</p>\n<p>本来我想把 Rust 也视为 “C 语言要过时了” 的例证，但是在学习并尝试使用了这门语言编程之后，我觉得<a href=\"http://esr.ibiblio.org/?p=7303\">这种语言现在还没有做好准备</a>。也许 5 年以后，它才会成为 C 语言的对手。</p>\n<p>随着 2017 的尾声来临，我们已经发现了一个相对成熟的语言，其和 C 类似，能够胜任 C 语言的大部分工作场景（我在下面会准确描述），在几年以后，这个语言界的新星可能就会取得成功。</p>\n<p>这件事意义重大。如果你不长远地回顾历史，你可能看不出来这件事情的伟大性。<em>三十年了</em> —— 这几乎就是我作为一个程序员的全部生涯，我们都没有等到一个 C 语言的继任者，也无法遥望 C 之后的系统编程会是什么样子的。而现在，我们面前突然有了后 C 时代的两种不同的展望和未来……</p>\n<p>……另一种展望则是下面这个语言留给我们的。我的一个朋友正在开发一个他称之为 “Cx” 的语言，这个语言在 C 语言上做了很少的改动，使得其能够支持类型安全；他的项目的目的就是要创建一个能够在最少人力参与的情况下把古典 C 语言修改为新语言的程序。我不会指出这位朋友的名字，免得给他太多压力，让他做出太多不切实际的保证。但是他的实现方法真的很是有意思，我会尽量给他募集资金。</p>\n<p>现在，我们看到了可以替代 C 语言实现系统编程的三种不同的可能的道路。而就在两年之前，我们的眼前还是一片漆黑。我重复一遍：这件事情意义重大。</p>\n<p>我是在说 C 语言将要灭绝吗？不是这样的，在可预见的未来里，C 语言还会是操作系统的内核编程以及设备固件编程的主流语言，在这些场景下，尽力压榨硬件性能的古老规则还在奏效，尽管它可能不是那么安全。</p>\n<p>现在那些将要被 C 的继任者攻破的领域就是我之前提到的我经常涉及的领域 —— 比如 GPSD 以及 NTPsec、系统服务以及那些因为历史原因而使用 C 语言写的进程。还有就是以 DNS 服务器以及邮件传输代理 —— 那些需要以机器速度而不是人类的速度运行的系统程序。</p>\n<p>现在我们可以对后 C 时代的未来窥见一斑，即上述这类领域的代码都可以使用那些具有强大内存安全特性的 C 语言的替代者实现。Go 、Rust 或者 Cx ，无论是哪个，都可能使 C 的存在被弱化。比如，如果我现在再来重新实现一遍 NTP ，我可能就会毫不犹豫的使用 Go 语言去完成。</p>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113538\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113538votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113538\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/4bd39b61ac115b0fa2ba173dd3b4e750ad79564a.jpg"},{"url_object_id": "9ea437f3d3d30a092e2c2f413d7f863b", "title": "这种 Unicode 符号，让百万人中招下了假应用……", "url": "http://blog.jobbole.com/113609/", "create_date": "2018/02/01", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3ly1fo11hn13nkj20kr0dw42b.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Unicode", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://gojko.net/2017/11/07/five-things-about-unicode.html\">Gojko Adzic</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p><img class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3ly1fo11hn13nkj20kr0dw42b.jpg\" width=\"690\" height=\"462\"></p>\n<p>2017年11月 BBC 报道了一个假冒 WhatsApp 的新闻。假应用似乎与官方应用属于同一个开发者名下。原来这些骗子通过在开发者名字中加入 Unicode 的非打印空格（nonprintable space），绕开验证。在 Google Play 维护人员发现之前，下载假应用超过 100 万人。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3ly1fo11eelthtj20ee0ekwis.jpg\"></p>\n<p>Unicode 是极其有价值的标准，使得电脑、智能手机和手表，在全球范围内以同样的方式显示同样的消息。不幸的是，它的复杂性使其成为了骗子和恶作剧者的金矿。如果像 Google 这样的巨头都不能抵御 Unicode 造成的基本问题，那对小一点的公司来说，这可能就像是必输的战役了。然而，大多数这些问题都是围绕着几个漏洞利用的。以下是关于 Unicode 所有开发者都应该知道的前五件事，并用来防止欺诈。</p>\n<h3>1. 很多 Unicode 代码点是不可见的</h3>\n<p>Unicode 中有一些零宽度代码点，例如零宽度连接器（U+200D）和零宽度非连接器（U+200C），它们都暗示了连字符工具。零宽度代码点对屏幕显示没有可见的影响，但是它们仍会影响字符串比较。这也是假 WhatApp 应用的骗子能这么长时间不被发现的原因。这些字符大多数都在一般标点符号区（从  U+2000 到 U+206F）。一般来说，没有理由允许任何人在标识符中使用这个区的代码点，所以它们是最不易过滤的。但是该区域外也有部分其他不可见的特别代码，比如蒙古文元音分隔符（U+180E）。</p>\n<p>一般来说，用 Unicode 对唯一性约束做简单的字符串比较，这很危险的。有一个可能的解决方法，限制允许用作标识符及其他任何能被骗子滥用的数据的字符集。不幸的是，这并非该问题的彻底解决方法。</p>\n<h3>2. 很多代码点看起来很相似</h3>\n<p>Unicode 努力覆盖全世界书写语言中的所有符号，必然有很多看起来相似的字符。人类甚至无法把它们区分开来，但是电脑能毫不费力地识别出差别。对这个问题的一种令人惊讶的滥用是拟态（Mimic）。拟态是一项有趣的应用，将软件开发所使用的常见符号，例如冒号和分号，替换成相似的 Unicode 字符。这能在代码编译工具中制造混乱，留下一脸懵逼的开发者。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/11/9ef4204bb9d07e30c4be079a88fa2606.png\"><img class=\"alignnone wp-image-66894\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/9ef4204bb9d07e30c4be079a88fa2606.png\"></a></p>\n<p>相似符号带来的问题，远不止是简单的恶作剧。花哨的叫法是 homomorphic attacks（同态攻击）。利用这些漏洞，会导致严重的安全问题。在 2017 年 4 月，一位安全研究员通过<a href=\"https://www.theguardian.com/technology/2017/apr/19/phishing-url-trick-hackers\">混合不同字符集中的字母</a>，成功地注册了一个看起来与 apple.com 非常相似的域名，甚至为它拿到了 SSL 证书。各大浏览器都愉快地显示了 SSL 挂锁，将该域名列为安全域名。</p>\n<p>与混合可见字符和不可见字符相似，没有道理允许标识符，尤其是域名，使用混合字符集名。大多数浏览器已经采取了行动，将混合字符集域名显示为十六进制的 unicode 值以对其进行处罚，这样用户就不会轻易地被迷惑。如果你向用户显示标识符，比如说在搜索结果中，考虑类似的方法来避免混淆。但是，这也不是完美的解决方法。某些域名可以轻易地用一个非拉丁字符集中的单单一个区来构建，比如 ap.com 或者 chase.com。</p>\n<p>Unicode 协会出版了一张<a href=\"http://www.unicode.org/Public/security/revision-03/confusablesSummary.txt\">易混淆字符表</a>，可能作为自动检查潜在诈骗的好参考。另一方面，如果你想找一个快速创造疑惑的方法，看看 <a href=\"http://shapecatcher.com/\">Shapecatcher</a> 吧。它是一个奇妙工具，列举了视觉上像图画的 Unicode 符号。</p>\n<h3>3. 规范化并不那么规范</h3>\n<p>规范化对像用户名这样的标识符来说非常重要，帮助人们用不同的方法输入值，但是用一致的方法来处理。规范标识符的一个常见方法是把所有字符都转变成小写，确保 JamesBond 和 jamesbond 是一样的。</p>\n<p>因为有如此多的相似字符和交叉集，不同的语言或者 unicode 处理库，可能应用不同的规范化策略。如果在若干地方进行了规范化，会潜在地带来安全风险。简单来说，不要假设小写转换在应用软件中的不同部分是一样的。来自 Spotify 的 Mikael Goldmann 在他们的一名用户发现了一个盗用账户的方法后，于 2013 年针对这个问题写了一份事件分析。攻击者可以注册其他人用户名的变体，比如 BIGBIRD，会转换成标准的账户名 bigbird。该应用软件的不同层对单词的规范化不同，使得人们能够注册模仿账号，而重置目标账户的密码。</p>\n<h3>4. 屏幕显示长度和内存大小无关</h3>\n<p>使用基础拉丁字符集和大多数欧洲字符集时，一段文本在屏幕或者纸上所占的空间大致与符号数成比例，大致与文本的内存大小成比例。这也是 EM 和 EN 成为流行长度单位的原因。但使用 Unicode 时，像这样任何种类的假设都会变得危险。有像 Bismallah Ar-Rahman Ar-Raheem (U+FDFD)这样可爱的字符，单单一个字符就比大多数英文单词都要长，能够轻易地超过网页上假定的视觉外框。这意味着基于字符串字符长度的任何种类的自动换行，或者文本中断算法都能轻易被愚弄。大多数终端程序要求固定宽度的字体，所以在这些程序中显示的话，你会看到右引号完全标在了错误的位置上。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/11/8807a0fdc5995ae8ec722f39a31300b3.png\"><img class=\"alignnone size-medium wp-image-66895\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/8807a0fdc5995ae8ec722f39a31300b3.png\"></a></p>\n<p>该问题一种滥用是 zalgo 文本生成器，它在一段文本周围加上垃圾，让这些东西占据了更多的垂直空间。</p>\n<p>当然了，整个不可见代码点的问题导致屏幕长度和内存大小无关。所以与输入区恰好合适的东西可能长到能摧毁一个数据库区。过滤不可见字符来规避问题还不够，因为还有很多不占用它们自己空间的其他例子。</p>\n<p>混合占据前一个字母上的空间的拉丁字符（比如 U+036B 和 U+036C），这样你能在一行文本行中写多行文本（Nu036BOu036C 产生 NͫOͬ）。吟诵标记是用来示意吟唱希伯来圣经经文的语调的。这些吟诵标记能够在同样的视觉空间中无限堆叠，意味着他们能被轻易地滥用，将大量信息编写进屏幕上的一个字符空间。Martin Kleppe 用<a href=\"http://aem1k.com/%D7%90/\">吟诵标记</a>为浏览器编码了 Conway’s Game of Life 的实现。看看该页面的源代码吧，你会感到震惊的。</p>\n<h3>5. Unicode 远不止是被动数据</h3>\n<p>有些代码点是用来影响输出字符的显示方式的，意味着用户不仅可以复制粘贴数据，也能键入处理指令。一个常见恶作剧是，使用右到左覆盖（U+202E）来转变文本方向。例如，用<a href=\"https://www.google.co.uk/maps/search/%E2%80%AEsajnin/\">谷歌地图搜索 Ninjas</a>。该查询字符串实际上转换了搜索单词的方向，尽管页面上的搜索区域显示着“ninjas”，但是实际上搜索的是“sajnin”。</p>\n<p>这种漏洞利用非常流行，<a href=\"https://xkcd.com/1137/\">XKCD</a> 漫画网站上有一张相应漫画。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/11/a19aec609e8062ff7823e8ce4c42db43.png\"><img class=\"size-medium wp-image-66896 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/a19aec609e8062ff7823e8ce4c42db43.png\"></a></p>\n<p>混合数据和处理指令——可有效执行的代码——不是个好主意，尤其是如果用户可以直接键入。这对任何在页面显示中包括的用户键入来说都是大问题。大多数网页开发者知道通过移除 HTML 标签来清理用户键入，但是也需要注意键入中的 Unicode 控制字符。这是个应对任何脏话或者内容过滤器的简单方法——只要把单词倒转过来，在开始加上右到左覆盖。</p>\n<p>右到左（Right-to-left）hack 可能无法嵌入恶意代码，但是如果你不小心的话，它能扰乱内容或者翻转整个页面。抵御这个问题，常见方法是把用户提供的内容放进一个输入区域或者文本区域，这样处理指令不会影响页面。</p>\n<p>处理指令对显示的另一个特别问题是字型变换选取器。为了避免为每种颜色的 emoji 创造单独的代码，Unicode 允许使用字型变换选取器来混合基本符号和颜色。白旗，字型变换选取器和彩虹正常会产生彩虹颜色的旗。但是并不是所有变换都可行。在 2017 年 1 月，iOS unicode 处理中的一个 bug 允许恶作剧者，仅仅发送一条特制信息就远程导致 iPhone 瘫痪。该信息包括白旗，字型变换选取器和一个零。iOS CoreText 陷入了恐慌模式，想要挑出正确的变换，导致了 OS 的瘫痪。这个恶作剧在直接信息，群聊甚至分享联系人名片中都奏效。这个问题也影响了 iPad，甚至部分 MacBook。该恶作剧针对的目标人群，面对系统崩溃，无能为力。</p>\n<p>相似的 bug 每几年就发生一次。在 2013 年，出现了一个阿拉伯字符处理 bug，它能使 OSX 和 iOS 崩溃。所有这些 bug 都深深埋藏在 OS 文本处理模块里，所以典型客户端应用开发者根本无法躲开它们。</p>\n<p>想知道其他有趣的处理指令，请移步  <a href=\"https://github.com/Codepoints/awesome-codepoints\">Awesome Codepoints</a> 清单。想知道更多 Unicode 造成的混乱，请阅读我的书 <a href=\"https://gojko.net/books/humans-vs-computers/\">Humans vs Computers</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113609\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113609votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113609\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 19</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/af97550999b0e4d2774bb8793f1174ce118b4be3.jpg"},{"url_object_id": "4e5a1f0a9df35564532b911089a9915e", "title": "免费知识哪里来？Arxiv 使用指南", "url": "http://blog.jobbole.com/113524/", "create_date": "2018/01/29", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520-1024x576.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 4, "tags": "其他,Arxiv", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<p>如果你非常确定自己想要找什么，比如知道论文的名字（算法的名字）或者作者的名字，直接去Google Scholar上搜索是最快的。然而如果你并不是很确定自己想要什么，只是想要看看某个领域的最新发展，知道大家都在干什么，然而却发现Google Scholar给你的结果多半不靠谱，请读下去。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520-1024x576.jpg\" alt=\"\" width=\"700\" height=\"394\"></a></p>\n<h3>引子</h3>\n<p>最近半年，在我身上时常发生下面这类对话：</p>\n<blockquote><p>“Hey， 你知道XXXXXXXXXXXXX问题怎么解决吗？”</p>\n<p>“哦，我刚好读过两篇相关的论文，等下发给你。”</p>\n<p>……</p></blockquote>\n<p>尴尬的沉默，一般来说拿到文章之后对方就再也不会来找我了，虽然我是真心的想要交流，然而有一些好学的孩子会接着问：</p>\n<blockquote><p>“你的论文是哪里找到的呢？”</p></blockquote>\n<p>鉴于论文背景不同，我会丢一个链接过去——这个链接（网站）在大部分数学/物理/计算机/统计领域里面，都是<a href=\"https://arxiv.org/\">https://arxiv.org/</a>。</p>\n<h3>Arxiv是什么</h3>\n<p>arxiv设计的初衷是一群物理学家们想要交流自己将要发表的论文，可以想象一下，在上世纪九十年代，人们用的还是软盘（包括5.25吋软盘和3.5寸什么的，存储空间可以说以KB计算），邮箱也不例外，投稿高峰期分分钟几百个KB的邮箱就会被文章塞满。Paul Ginsparg一看这不行，论文如果想要很好的被分享并审核，大约是需要集中存储的，就在1991年于LANL（<a href=\"http://www.lanl.gov/\">http://www.lanl.gov/ </a>洛斯阿拉莫斯国家实验室）建立了arxiv的雏形，如下图所示。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/1-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/1-Arxiv.png\" alt=\"\" width=\"941\" height=\"504\"></a></p>\n<p>当时有个萌萌的域名：<a href=\"http://xxx.lanl.gov/\">http://xxx.lanl.gov/</a> ，到现在也可以被访问。不过由于LANL作为一个严谨的科学实验室实在是懒得运营这个网站，后来就被康奈尔大学接管支持。</p>\n<p>然而，今天当我们谈到arxiv，就不能不说Open Access【开放获取】。 我们都知道，以前看文章是要钱的，直到今天，看大部分的文章也是要钱的。如下图所示，看一篇Nature一般要20美元，折合100多人民币。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/2-Open-Access.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/2-Open-Access.png\" alt=\"\" width=\"941\" height=\"727\"></a></p>\n<p>这个价格吧，说贵不贵说便宜不便宜，在大部分有钱公司和牛逼学校买个site license或者报个销都是不成问题的，但是对那些有科研兴趣的个人或者是那些落后地区的学校，就很成问题了。像马拉维啊中非啊这种国家，到2016年，官方数据中人均GDP才400美刀（大约20篇文章），你让人家怎么玩嘛。难道要让知识像财富一样集中在少数人手里么？</p>\n<p>就好像我们一直希望互联网拥有中立性（电信运营商、有线电视公司等互联网服务提供商应当平等地对待所有通过他们网络的流量，网络服务提供商有区别地对待不同的流量可能会使大公司能够限制消费者的自由）一样，我们并不希望因为钱而阻挡了知识的传播。 所以，我们有了<a href=\"http://www.budapestopenaccessinitiative.org/read\">布达佩斯宣言</a>:</p>\n<blockquote><p>There are many degrees and kinds of wider and easier access to this literature. By ‘open access’ to this literature, we mean its free availability on the public internet, permitting any users to read, download, copy, distribute, print, search, or link to the full texts of these articles, crawl them for indexing, pass them as data to software, or use them for any other lawful purpose, without financial, legal, or technical barriers other than those inseparable from gaining access to the internet itself. The only constraint on reproduction and distribution, and the only role for copyright in this domain, should be to give authors control over the integrity of their work and the right to be properly acknowledged and cited.</p></blockquote>\n<p>作为开放获取的先驱者，我们要为arxiv——这一开放获取的先驱鼓掌！为我们带来的好处就是，免费！免费！免费！</p>\n<p>基于我的个人访问经验，大家如果想知道都有哪些杂志或者期刊提供免费的资源，可以参考这个列表：<a href=\"https://en.wikipedia.org/wiki/List_of_open_access_journals\">https://en.wikipedia.org/wiki/List_of_open_access_journals</a> 图中是“数学”类目下提供开放获取的期刊。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/3-mathematics.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/3-mathematics.png\" alt=\"\" width=\"941\" height=\"602\"></a></p>\n<p><strong>实在找不到免费文章咋办？</strong></p>\n<p>我一般会直接发邮件问作者要，顺便聊聊自己的研究领域以及跟这篇文章相关的几个最新问题，成功率还是蛮高的，还可能交到好朋友。</p>\n<p>说到Arxiv还有一样不能不说的就是LaTex——个人认为最美的文本编辑器（或者语言？），只是从学术圈儿跳出来之后发现大家好像都懒得用，在此由于篇幅所限，不再赘述。</p>\n<h3>Arxiv有什么</h3>\n<p>由于各种历史原因，Arxiv中文献的主要研究领域还是数理哲学，包括数学/物理/计算机/统计/天文/定量生物/定量金融等领域。截止到2016年的发表量统计可以参考下面这张图。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/4-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/4-Arxiv.png\" alt=\"\" width=\"941\" height=\"481\"></a></p>\n<p>左图中是每年新提交的文章数目，右图是每年的发表量所占百分比（总和为1）， “hep-“代表高能物理学，(hep-th+hep-ph+hep-lat+hep-ex), “cond-mat” 代表凝聚态物理学, “astro-ph” = 天体物理学, “math” 代表数学, “other physics” 表示物理学的其他领域（ physics+nucl+gr-qc+quant-ph+nlin） “biology” 指的是量化生物学，“finance” 指的是量化金融，“cs”指的是计算机科学。</p>\n<p>我们可以看到，在2002年之前，计算机科学领域的占比几乎可以忽略不计，然而到2016年已然占据了近五分之一，并且还在以极快的速度增长。而1992至1996年间占据了大半江山的高能物理学，到了今天地盘几乎被蚕食殆尽，只剩约10%的份额苟延残喘。沧海桑田，可见一斑。</p>\n<p>还有论文发表总量如下图：</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/5-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/5-Arxiv.png\" alt=\"\" width=\"941\" height=\"427\"></a></p>\n<p>（信息来自：<a href=\"https://arxiv.org/help/stats/2016_by_area/index\">https://arxiv.org/help/stats/2016_by_area/index</a> ）</p>\n<p>从图中，我们可以清楚的发现三个事情：</p>\n<ol>\n<li>所有论文发表量都在时间轴上爆发式的增长，在上面这张历史发表总量图中体现的尤为明显；</li>\n<li>数学一家独大，不管是在年度发表量还是历史发表总量上；</li>\n<li>计算机（cs）在历史发表总量中只占了8.3%，然而2016年的提交量占了18.3%，结合提交数量图的分析，真是长势喜人、值得期待。</li>\n<li>每个月近10000篇文章提交（正式接受的会少一些，如果精准到感兴趣的垂直领域会更少）。</li>\n</ol>\n<p>那么，不想只关心数理领域的咋办？</p>\n<p>很简单，就好像任何市场一样，arxiv火了之后大批人跟风，所以我们现在有了生物学版本arxiv <a href=\"https://www.biorxiv.org/\">https://www.biorxiv.org/</a>，心理学版本arxiv <a href=\"https://psyarxiv.com/\">https://psyarxiv.com/</a> ，等等等等。当然，知识的沉淀往往需要时间，这些垂直领域的“arxiv”们到目前为止还不是非常成熟，所以我仍然建议大家结合上文提到的Open Access列表里的机构，去寻找想要的免费资源。</p>\n<h3>Arxiv怎么用</h3>\n<p>就像我在本文开头提到的那样，这个引擎最大的效果是当你并不确定自己想要什么的时候，去看看领域的最新发展，知道大家都在干什么。它最大的好处是值得信任。 当然，同样值得信任的还有很多——虽然它们大部分都要钱，针对大多数期刊们，可以按照影响因子从大往小排个序（众所周知，影响因子这个评定标准就像高考成绩一样非常片面，然而这也是目前最普遍的解决方案了），前文中提到的Nature系列和Science系列，都非常值得信任。不做赘言。</p>\n<p>很高兴的一点是，收费（还收的比较贵的）基本都是期刊，然而与其他领域尤其是生物学方向不太一样，计算机方向最顶级的往往是会议而不是期刊，而会议往往是不收费的！这里举个例子，International Conference on Machine Learning 【ICML】，机器学习方面的顶级会议之一，其中所有的文章都可以在下面的链接里找到。<a href=\"https://icml.cc/Conferences/2017/Schedule?type=Poster\">https://icml.cc/Conferences/2017/Schedule?type=Poster</a></p>\n<p>太幸福了！——这个也是我最最最推荐大家找到值得读的文章的办法：盯着领域著名会议列表刷（虽然有个缺点，就是刷到啥算啥）。</p>\n<p>但是，往往新入门的人往往没有办法靠关键字搜索【看脸】来分辨哪个期刊哪个会议才是真正有价值的。每年的会议不知凡几，我在wikiCFP上随便搜了一下人工智能，在接下来一年内仅仅这个垂直领域就有3130个会议。平心而论，有多少是真正有价值的呢？每个会议按照50篇paper来算，15万篇paper，一个人类就是不吃不睡不工作全职看一年paper，能看几篇？</p>\n<p>当然，据个人经验，关于计算机方向的会议排名，大家可以参考下面的链接 <a href=\"https://www.aminer.cn/ranks/conf\">https://www.aminer.cn/ranks/conf</a> ，我截取了AI/PR (人工智能/模式识别）领域排名靠前的一段，如下图。有想看计算机视觉的可以参考里面带”vision”的，具体会议的分析和比较将另文分析，这里不做赘言。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/6.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/6.png\" alt=\"\" width=\"941\" height=\"546\"></a></p>\n<p>但是，如果不想这样盯着列表一个一个会议慢慢看下来呢？如果就是想要找一下某个主题或者关键字呢？或者就是想要知道这个月出现了什么新算法呢？——会议可都是一年一次的。 这个时候，就是arxiv大放异彩的时候了。它给了我们一个更集中的搜索平台，而且相对来说更值得信任（反正比起来什么都可以搜索的Google Scholar，用户要筛选的噪声少了很多）。</p>\n<p>没有证据都是耍流氓？ 请点开下面这个链接 <a href=\"https://arxiv.org/list/cs.LG/recent\">https://arxiv.org/list/cs.LG/recent</a>，这是对Machine Learning领域的一个搜索。仅仅看这一页简介那些熟悉的作者名字，就知道大部分都不会让你失望的。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/7.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/7.png\" alt=\"\" width=\"941\" height=\"519\"></a></p>\n<p>尽管arxiv定位是preprint，但其中也囊括了各种已经被NIPS，AAAI等等行业顶级会议接受的文章。而且，所有这些，都有直接的pdf原文可以免费下载。搜索和筛选成本都低到极致。同时，只需要点击感兴趣的作者名字，所有他发表过的文章都会被列出来（如下图中的Lei Shu），而完全不用担心其他搜索引擎中常常发生的同名同姓作者的麻烦——这一点相信搜索过中文名拼音的都深有体会——张王李赵遍天下绝对不是说说的。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/8.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/8.png\" alt=\"\" width=\"941\" height=\"585\"></a></p>\n<p>得数据库如此，夫复何求？</p>\n<p>作为对比，下面是我在Google Scholar同样搜索Machine Learning关键字得到的结果。大家可以自行体会时效性，相关度和质量。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/9.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/9.png\" alt=\"\" width=\"941\" height=\"385\"></a></p>\n<p>当然，时效性这个可以通过点击左手边的“Sort by date”来解决，然而点击了之后是这个样子的：</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/10.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/10.png\" alt=\"\" width=\"941\" height=\"515\"></a></p>\n<p>——反正前面Springer家的都是要钱的，质量不提，单单是能下载的pdf也真的不常有。</p>\n<p>更重要的是，google作为跨平台老牌全网搜索引擎，看到某个关键字的时候并不会针对特殊的领域进行搜索，所以大批量主题无关的文章（不信的可以搜一下lenet，vgg这类，看看搜索结果），就会干扰搜索结果。</p>\n<p>所以，当你要找的参考文献属于数理领域尤其是AI/ML/Stat相关，而Google Scholar又没能给你满意的结果（又或者很贵），就试试看arxiv吧！</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113524\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113524votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113524\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 78</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://insights.thoughtworkers.org/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/b6904127059aff354b12d2cb953eb7733f8d9064.jpg"}]